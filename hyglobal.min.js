function getDragAngle(e) {
  var a = e.target,
    t = parseFloat(a.dataset.angle) || 0,
    o = {
      x: parseFloat(a.dataset.centerX) || 0,
      y: parseFloat(a.dataset.centerY) || 0,
    },
    s = Math.atan2(o.y - e.clientY, o.x - e.clientX);
  return s - t;
}
var _wxObj = {},
  _shareObj = {},
  _meta =
    __WASEE_DATA__.product.panoinfo.meta &&
    __WASEE_DATA__.product.panoinfo.meta.length > 10
      ? JSON.parse(__WASEE_DATA__.product.panoinfo.meta)
      : { openin_image_show: 1 };
0 == __INFO__.product_status &&
  ((__INFO__.password_status = 0),
  (__WASEE_DATA__.product.panoinfo.contextmenu_show = 0),
  (__WASEE_DATA__.product.panoinfo.contextmenu = []),
  (__WASEE_DATA__.product.switch.definimenu.bottommenu_show = 0),
  __WASEE_DATA__.product.switch.definimenu &&
    (__WASEE_DATA__.product.switch.definimenu.menus = []),
  (__WASEE_DATA__.product.switch.overallNav.switch_body_compound = 0),
  (__WASEE_DATA__.product.panoinfo.skinItem = 0),
  (_meta.langue = 0),
  (_meta.openin_image_show = 1),
  _meta.openin_bg && delete _meta.openin_bg,
  _meta.openin_image && delete _meta.openin_image),
  ("" != __INFO__.format_pano_expire &&
    1 != paramObj._isexport &&
    paramObj._isWaseehost) ||
    ((__WASEE_DATA__.product.panoinfo.switch_nav = 0),
    delete __WASEE_DATA__.product.panoinfo.nav),
  __WASEE_DATA__.product.panoinfo.switch_nav > 0 &&
    0 == $.getParameter("isn") &&
    (__WASEE_DATA__.product.panoinfo.switch_nav = 0),
  __WASEE_DATA__.product.panoinfo.switch_nav > 0 &&
    ($("#pano_body").addClass("ZHNAVION"),
    "pc" == $.browserRedirect() &&
      $("html,body").css({ width: "520px", overflow: "hidden" }),
    (__WASEE_DATA__.product.panoinfo.skinItem = 0),
    (__WASEE_DATA__.product.switch.overallNav.scene_search = 0),
    (__WASEE_DATA__.product.switch.overallNav.switch_hdmap = 0),
    (__WASEE_DATA__.product.openmap.switch_hdmap = 0)),
  4 == __WASEE_DATA__.product.panoinfo.skinItem && (_meta.langue = 0),
  (1 != _meta.openin_image_show && null != _meta.openin_image_show) ||
    (_meta.openin_bg &&
    0 == _meta.openin_bg.indexOf("#") &&
    7 == _meta.openin_bg.length
      ? ((_meta.isopenin_bg = 1),
        $("html").css("background-color", _meta.openin_bg))
      : (_meta.isopenin_bg = 0),
    _meta.openin_image &&
    -1 == _meta.openin_image.indexOf("/home/materxml/wl.gif") &&
    _meta.openin_image &&
    _meta.openin_image.length > 10
      ? $("body").prepend(
          '<div class="loadingwasee"' +
            (_meta.isopenin_bg
              ? ' style="background-color:' + _meta.openin_bg + '"'
              : "") +
            '><img class="loadimg-s" src="' +
            _meta.openin_image +
            '?x-oss-process=image/resize,m_fixed,w_480"></div>'
        )
      : $("body").prepend(
          '<div class="loadingwasee"' +
            (_meta.isopenin_bg
              ? ' style="background-color:' + _meta.openin_bg + '"'
              : "") +
            '><img class="loadimg" src="' +
            paramObj.resourceWasee +
            '/home/materxml/wl.gif" style="opacity:0;position: absolute;" onload="$(this).removeAttr(\'style\');$(\'.loadimg-s\').remove();"><img class="loadimg-s" src="' +
            paramObj.resourceWasee +
            '/home/materxml/wl-small.png"></div>'
        )),
  (_languageObj.langlist = {
    0: "CN",
    1: $.getBrowserLang().indexOf("CN") >= 0 ? "CN" : "EN",
    2: "EN",
  }),
  (_languageObj.lang =
    _meta.langue && _meta.langue >= 0
      ? _languageObj.langlist[_meta.langue]
      : "CN");
let _langObj = _languageObj[_languageObj.lang]
  ? _languageObj[_languageObj.lang]
  : _languageObj.CN;
(("CN" != _languageObj.lang && _languageObj[_languageObj.lang]) ||
  paramObj._isexport) &&
  ($("#pano_body").addClass(_languageObj.lang),
  $(".navrighttop .fullscreen").attr("data-tips", _langObj.quanqingqieh),
  $(".navrighttop .autorotate").attr("data-tips", _langObj.zidongxuny),
  $(".navrighttop .vrr").attr("data-tips", _langObj.vr),
  $(".navrighttop .music").attr("data-tips", _langObj.beijingmusic),
  $(".navrighttop .voice").attr("data-tips", _langObj.beijingvoice),
  $(".navrighttop .gyro").attr("data-tips", _langObj.tuoluoyi),
  $(".navrighttop .fullflag").attr("data-tips", _langObj.hideflag),
  $(".navrighttop .winecellar_p").attr("data-tips", _langObj.shapan),
  $(".navrighttop .winecellar_p .title").html(_langObj.shapan),
  $(".radarimgbody .scalebsg .title").attr("tips", _langObj.fangda),
  $(".radarimgbody .shouqi .title").attr("tips", _langObj.close)),
  4 == __WASEE_DATA__.product.panoinfo.skinItem &&
    ((_meta.langue_show = 0),
    (__WASEE_DATA__.product.switch.overallNav.showpraise = 0),
    (__WASEE_DATA__.product.switch.overallNav.showmessage = 0),
    (__WASEE_DATA__.product.switch.overallNav.enablemessage = 0),
    (__WASEE_DATA__.product.switch.overallNav.showmsg = 0),
    (__WASEE_DATA__.product.switch.overallNav.showshare = 0),
    (__WASEE_DATA__.product.switch.overallNav.scene_list = 1),
    (__WASEE_DATA__.product.switch.definimenu.topmenu_show = 0),
    (__WASEE_DATA__.product.panoinfo.notice_show = 0),
    "pc" != $.browserRedirect() &&
      ((__WASEE_DATA__.product.switch.overallNav.scene_list = 0),
      (__WASEE_DATA__.product.panoinfo.contextmenu_show = 0))),
  (function () {
    1 == __WASEE_DATA__.product.panoinfo.switch_firstscene &&
      ((paramObj._getAth = null),
      (paramObj._getAtv = null),
      __WASEE_DATA__.product.panoinfo.firstscene > 0
        ? (paramObj._getSceneId = __WASEE_DATA__.product.panoinfo.firstscene)
        : (paramObj._getSceneId = null)),
      paramObj._isexport &&
        (($.getCookie("openinpassword" + __WASEE_DATA__.product.panoinfo.id) &&
          1 ==
            $.getCookie(
              "openinpassword" + __WASEE_DATA__.product.panoinfo.id
            )) ||
        void 0 === __WASEE_DATA__.product.panoinfo.openin.openin_type2
          ? (__INFO__.password_status = 0)
          : 1 == __INFO__.product_status &&
            __WASEE_DATA__.product.panoinfo.openin.openin_type2 &&
            __WASEE_DATA__.product.panoinfo.openin.openin_type2.length > 0 &&
            (__INFO__.password_status = 1)),
      __INFO__.password_status || (__INFO__.password_status = 0),
      (paramObj = $.extend(
        {
          _width: $("body").width(),
          _height: $("body").height(),
          startscene: "scene" + paramObj._getSceneId,
          isPhone: $.isPhone(),
          krpano: { krpano_id: __WASEE_DATA__.product.panoinfo.id, sceneId: 0 },
        },
        paramObj
      )),
      $(window).resize(function () {
        (paramObj._width = $("body").width()),
          (paramObj._height = $("body").height()),
          _waseeVRObj.scene &&
            _waseeVRObj.scene.winImgObj &&
            $(".moveimgbody").length > 0 &&
            setTimeout(function () {
              _waseeVRObj.change_move_img(_waseeVRObj.scene.winImgObj);
            }, 100);
      });
    var e =
      __INFO__.group_data && "object" == typeof __INFO__.group_data
        ? __INFO__.group_data
        : __WASEE_DATA__.product.groups;
    if (null != e) {
      for (let a = 0; a < e.length; a++) {
        const t = e[a];
        let o = !1,
          s = 0;
        for (let a = 0; a < e.length; a++)
          t.id != e[a].id && t.id == e[a].pid && s++;
        if (0 == s && t.scenes.length > 0)
          for (let e = 0; e < t.scenes.length; e++) {
            const a = t.scenes[e];
            if (0 != a.isshow) {
              null == paramObj._getSceneId &&
                (paramObj.startscene = "scene" + a.id),
                (paramObj.onescene = paramObj.FirstSceneName = "scene" + a.id),
                (o = !0);
              break;
            }
          }
        if (o) break;
      }
      if (
        (null == paramObj._getSceneId &&
          1 == __WASEE_DATA__.product.switch.overallNav.switch_hdmap &&
          (1 == __WASEE_DATA__.product.panoinfo.scenic_map &&
          0 != __WASEE_DATA__.product.switch.overallNav.openmap_inshow
            ? (paramObj.startscene = null)
            : 0 != __WASEE_DATA__.product.panoinfo.scenic_map ||
              (1 != __WASEE_DATA__.product.switch.overallNav.openmap_inshow &&
                null !=
                  __WASEE_DATA__.product.switch.overallNav.openmap_inshow) ||
              (1 != __INFO__.password_status &&
                $("#pano_body").addClass("opa0"),
              (paramObj.sceneMapId = 1),
              "object" != typeof trpm_publicModule
                ? ($("head").prepend(
                    '<link rel="stylesheet" type="text/css" href="https://resourceqiniu.v123.cn/public/trpm/public/css/trpm-public-px.css?ver=1622775735910">'
                  ),
                  $.addJavascript({
                    src:
                      paramObj.resourcePublic +
                      "/trpm/public/js/trpm-public.js?20220822",
                    callBack: function () {
                      location.href.indexOf("onethink") > 0
                        ? $.addJavascript({
                            src:
                              paramObj.resourceWasee +
                              "/home/vrpano/js/open_map.js",
                          })
                        : "object" != typeof window.openmapModule &&
                          $.addJavascript({
                            src:
                              paramObj.resourceWasee +
                              "/home/vrpano/js/open_map.min.js?" +
                              paramObj.open_map_time,
                          });
                    },
                  }))
                : location.href.indexOf("onethink") > 0
                ? $.addJavascript({
                    src: paramObj.resourceWasee + "/home/vrpano/js/open_map.js",
                  })
                : "object" != typeof window.openmapModule &&
                  $.addJavascript({
                    src:
                      paramObj.resourceWasee +
                      "/home/vrpano/js/open_map.min.js?" +
                      paramObj.open_map_time,
                  }))),
        (function () {
          $("#pano_body").prepend(
            '<div id="panoContent" class="panoContent"></div>'
          );
          var e = this,
            a = {
              startscene: paramObj.startscene,
              myresourceWasee: paramObj._isexport
                ? "../../.."
                : paramObj.resourceWasee,
              mypath: paramObj._isexport
                ? "ws/_static/home/vrpano/"
                : paramObj.resourceWasee + "/home/vrpano/",
              exportpath: paramObj.exportpath,
              versiontime: paramObj.versiontime,
              time: paramObj.time,
              _time: paramObj._time,
              _video_time: paramObj._video_time,
              _video_time_i: paramObj._video_time_i,
              _wasee_time: paramObj._wasee_time,
              inhotspot_time: paramObj.inhotspot_time,
              _expo_time: paramObj._expo_time,
              _zhnav_time: paramObj._zhnav_time,
              panoinfoId: __WASEE_DATA__.product.panoinfo.id,
              lkmult: __INFO__.password_status,
              Imgtime: paramObj.Imgtime,
              myserver: paramObj.myserver,
              _switch_compass:
                __WASEE_DATA__.product.switch.overallNav.switch_compass,
            };
          __WASEE_DATA__.product.panoinfo.switch_nav > 0 &&
            ((a.isSwitch_nav = 1),
            (a.nav_skin =
              "red" != __WASEE_DATA__.product.panoinfo.nav.nav_skin
                ? ""
                : "_" + __WASEE_DATA__.product.panoinfo.nav.nav_skin),
            (a._navimg_time = paramObj._navimg_time)),
            (e.loadxml = function (a) {
              e.krp.call("loadxml(" + a + ")");
            }),
            (e.pano = embedpano({
              swf: paramObj.resourceWasee + "/vrpano/js/pano.swf",
              id: "waseeVrPano",
              xml: null,
              target: "panoContent",
              html5: "auto",
              webglsettings: { depth: !0 },
              passQueryParameters: !0,
              initvars: a,
              onready: function (a) {
                (window._krpano = e.krp = a),
                  e.loadxml(__WASEE_DATA__.product.xml),
                  1 == __WASEE_DATA__.product.switch.overallNav.switch_hdmap &&
                    krp.set(
                      "switch_cloudmap",
                      __WASEE_DATA__.product.switch.overallNav.switch_cloudmap
                    );
              },
            })),
            null == __WASEE_DATA__.product.panoinfo.skinItem &&
              (__WASEE_DATA__.product.panoinfo.skinItem = 0),
            null == __WASEE_DATA__.product.panoinfo.menustyle &&
              (__WASEE_DATA__.product.panoinfo.menustyle = 0),
            $("#pano_body").addClass(
              "menustyle" +
                __WASEE_DATA__.product.panoinfo.menustyle +
                " skinItem" +
                __WASEE_DATA__.product.panoinfo.skinItem +
                ("pc" == $.browserRedirect() ? " pc" : " mobile") +
                " " +
                paramObj.isPhone
            );
          let t = "",
            o = " onhide";
          switch (__WASEE_DATA__.product.panoinfo.skinItem) {
            case 0:
            case 1:
            case 3:
            case 4:
              1 == __WASEE_DATA__.product.switch.overallNav.scene_list &&
                (o = "");
              let e =
                  '<span class="icon flex__center"><i class="iconfont icon_yuanxia_x"></i></span>',
                a = _langObj.changjinlist,
                s = "";
              if (
                (__WASEE_DATA__.product.panoinfo.menustyle > 0 &&
                  (e =
                    '<img class="iconimg on" src="' +
                    paramObj.resourceWasee +
                    "/home/vrpano/img/menusicon/menus_" +
                    __WASEE_DATA__.product.panoinfo.menustyle +
                    '_1.png?20210301"><img class="iconimg close" src="' +
                    paramObj.resourceWasee +
                    "/home/vrpano/img/menusicon/menus_" +
                    __WASEE_DATA__.product.panoinfo.menustyle +
                    '_43.png">'),
                $.isJSONstr(__WASEE_DATA__.product.switch.definimenu.scene_btn))
              ) {
                let t = JSON.parse(
                  __WASEE_DATA__.product.switch.definimenu.scene_btn
                );
                t.icon && t.icon.length > 10
                  ? (e = '<img class="iconimg" src="' + t.icon + '">')
                  : __WASEE_DATA__.product.panoinfo.menustyle > 0 &&
                    (1 == t.icon
                      ? (e =
                          '<img class="iconimg on" src="' +
                          paramObj.resourceWasee +
                          "/home/vrpano/img/menusicon/menus_" +
                          __WASEE_DATA__.product.panoinfo.menustyle +
                          '_1.png?20210301"><img class="iconimg close" src="' +
                          paramObj.resourceWasee +
                          "/home/vrpano/img/menusicon/menus_" +
                          __WASEE_DATA__.product.panoinfo.menustyle +
                          '_43.png">')
                      : t.icon > 1 &&
                        (e =
                          '<img class="iconimg" src="' +
                          paramObj.resourceWasee +
                          "/home/vrpano/img/menusicon/menus_" +
                          __WASEE_DATA__.product.panoinfo.menustyle +
                          "_" +
                          t.icon +
                          '.png">')),
                  (s = t.name),
                  "" != t.name &&
                    "场景列表" != t.name &&
                    "场景切换" != t.name &&
                    "CN" == _languageObj.lang &&
                    (a = t.name);
              }
              t =
                '<div class="item_bottom p-re menustyle' +
                __WASEE_DATA__.product.panoinfo.menustyle +
                '"><div class="menu_left flex__wrap__b"><em class="flex_center_y pano_group_list_btn list none">' +
                e +
                '<span class="title" ytitle="' +
                s +
                '">' +
                a +
                '</span></em></div><div class="menu_right flex__wrap__b"></div></div>';
          }
          $(".navrighttop").addClass(
            "menustyle" + __WASEE_DATA__.product.panoinfo.menustyle
          ),
            $("#pano_body").append(
              '<div class="pano_bottom_item visib_h' +
                o +
                ("pc" == $.browserRedirect() ? "" : " mobile") +
                " " +
                paramObj.isPhone +
                " skinItem" +
                __WASEE_DATA__.product.panoinfo.skinItem +
                '">' +
                t +
                "</div>"
            );
        })(),
        $("meta[name=description]").attr(
          "content",
          __WASEE_DATA__.product.panoinfo.brief
        ),
        $(".winecellar_p.muousetips .title").html(_langObj.shapan),
        $(".radarimgbodyBox .scalev").html("100%"),
        1 == __INFO__.password_status &&
          0 == $(".lock.windowBody").length &&
          (4 == __WASEE_DATA__.product.panoinfo.skinItem &&
            $("head").prepend(
              '<link rel="stylesheet" type="text/css" href="' +
                paramObj.resourceWasee +
                "/home/vrpano/css/skin.css?" +
                Math.random() +
                '">'
            ),
          $("#subinformain").append(
            '<div class="lock windowBody"> <div class="title"><i class="iconfont icon_suo"></i> ' +
              _langObj.fangwenmima +
              '</div> <div class="tinput"><input type="password" name="password" placeholder="' +
              _langObj.fwmiantips +
              '" maxlength="12"><i class="iconfont icon_preview" onclick=""></i><span class="tips none">' +
              _langObj.fwmiantips2 +
              '</span></div> <button class="wBtn gosee">' +
              _langObj.kaishichakan +
              "</button> </div>"
          ),
          4 == __WASEE_DATA__.product.panoinfo.skinItem &&
            $(".lock").before(
              '<div class="lockbg"><pre>Sampe Script<br>All rights of the PGS system reserved to Beijing2022.</pre></div>'
            ),
          setTimeout("$('.lock.windowBody').addClass('on')", 1e3)),
        __WASEE_DATA__.product.panoinfo.wasee_scenic_id > 0
          ? (delete __WASEE_DATA__.product.panoinfo.switch_nav,
            (__WASEE_DATA__.product.openmap.switch_hdmap = 1),
            (__WASEE_DATA__.product.switch.overallNav.switch_hdmap = 1),
            (__WASEE_DATA__.product.switch.overallNav.openmap_menu = 0),
            (__WASEE_DATA__.product.switch.overallNav.openmap_inshow = 1),
            (__WASEE_DATA__.product.switch.overallNav.showAname = 0),
            location.href.indexOf("wasee.com") > 0 || paramObj._isexport
              ? ($("head").prepend(
                  '<link rel="stylesheet" type="text/css" href="' +
                    paramObj.resourceWasee +
                    "/home/vrpano/css/scenic.min.css?" +
                    paramObj.sceniccss_time +
                    '">'
                ),
                $.addJavascript({
                  src:
                    paramObj.resourceWasee +
                    "/home/vrpano/js/scenic.min.js?" +
                    paramObj.scenicjs_time,
                  callBack: function () {
                    _scenicObj.init();
                  },
                }))
              : ($("head").prepend(
                  '<link rel="stylesheet" type="text/css" href="' +
                    paramObj.resourceWasee +
                    '/home/vrpano/css/scenic.css">'
                ),
                $.addJavascript({
                  src: paramObj.resourceWasee + "/home/vrpano/js/scenic.js",
                  callBack: function () {
                    _scenicObj.init();
                  },
                })))
          : __WASEE_DATA__.product.panoinfo.switch_nav > 0 &&
            ((__WASEE_DATA__.product.switch.overallNav.showAname = 0),
            (__WASEE_DATA__.product.switch.overallNav.showsandtable = 0),
            (__WASEE_DATA__.product.switch.overallNav.map_showtype = 0),
            (__WASEE_DATA__.product.switch.overallNav.map_showfull = 0),
            (__WASEE_DATA__.product.panoinfo.notice_show = 0),
            (__WASEE_DATA__.product.switch.overallNav.logo_switch = 0),
            (__WASEE_DATA__.product.switch.overallNav.showvisit = 0),
            (__WASEE_DATA__.product.switch.overallNav.switch_cls = 0),
            (__WASEE_DATA__.product.switch.overallNav.showmessage = 0),
            (__WASEE_DATA__.product.switch.overallNav.showmsg = 0),
            location.href.indexOf("wasee.com") > 0 || paramObj._isexport
              ? ($("head").prepend(
                  '<link rel="stylesheet" type="text/css" href="' +
                    paramObj.resourceWasee +
                    "/home/vrpano/css/navglobal.min.css?" +
                    paramObj._zhnavcss_time +
                    '">'
                ),
                $.addJavascript({
                  src:
                    paramObj.resourceWasee +
                    "/home/vrpano/js/navglobal.min.js?" +
                    paramObj._zhnavjs_time,
                  callBack: function () {
                    _panonavObj.init({
                      doc: "#subinformain",
                      resourceWasee: paramObj.resourceWasee,
                    });
                  },
                }))
              : ($("head").prepend(
                  '<link rel="stylesheet" type="text/css" href="' +
                    paramObj.resourceWasee +
                    '/home/vrpano/css/navglobal.css">'
                ),
                $.addJavascript({
                  src: paramObj.resourceWasee + "/home/vrpano/js/navglobal.js",
                  callBack: function () {
                    _panonavObj.init({
                      doc: "#subinformain",
                      resourceWasee: paramObj.resourceWasee,
                    });
                  },
                }))),
        $.getParameter("embmap") >= 1 &&
          (2 != $.getParameter("embmap") &&
            3 != $.getParameter("embmap") &&
            ((__WASEE_DATA__.product.switch.overallNav.showmusic = 0),
            (__WASEE_DATA__.product.switch.overallNav.showvoice = 0),
            (__WASEE_DATA__.product.switch.overallNav.showpraise = 0)),
          (__WASEE_DATA__.product.switch.definimenu.showpanoinfo = 0),
          (__WASEE_DATA__.product.switch.overallNav.showmessage = 0),
          (__WASEE_DATA__.product.switch.overallNav.enablemessage = 0),
          (__WASEE_DATA__.product.switch.overallNav.showmsg = 0),
          (__WASEE_DATA__.product.switch.overallNav.showshare = 0),
          (__WASEE_DATA__.product.switch.overallNav.isautoshow = 0),
          (__WASEE_DATA__.product.switch.overallNav.showAname = 0),
          (__WASEE_DATA__.product.panoinfo.logo_redirect_url = ""),
          (__WASEE_DATA__.product.switch.overallNav.switch_body_compound = 0),
          1 == __WASEE_DATA__.product.panoinfo.openin.cover_type &&
            (__WASEE_DATA__.product.panoinfo.openin.cover_type = -1)),
        (window._openobj = __WASEE_DATA__.product.panoinfo.openin),
        (_openobj.openimg = ""),
        (_openobj._openinhtml = ""),
        0 == _openobj.cover_type)
      ) {
        1 == _openobj.pcimage_show && "pc" == $.browserRedirect()
          ? (_openobj.openimg = _openobj.openin_pcimage)
          : 1 == _openobj.mobileimage_show &&
            "phone" == $.browserRedirect() &&
            (_openobj.openimg = _openobj.openin_mobileimage),
          (_openobj.isopenin = 0),
          "" != _openobj.openimg &&
            (3 == _openobj.openin_dktype ||
              2 == _openobj.openin_dktype ||
              (1 == _openobj.openin_dktype && _openobj.openin_waitime > 0)) &&
            (_openobj.isopenin = 1);
        let e = 1 == __INFO__.password_status ? " visib_h" : "";
        1 == _openobj.isopenin &&
          ("phone" == $.browserRedirect() &&
            _meta.openin_type_mobile > 0 &&
            (_openobj.openin_type = _meta.openin_type_mobile),
          1 == _openobj.openin_type
            ? (_openobj._openinhtml =
                '<div class="openinobj' +
                e +
                '" style="background: ' +
                _openobj.openin_bg +
                '"><img src="' +
                _openobj.openimg +
                '"></div>')
            : 2 == _openobj.openin_type &&
              (_openobj._openinhtml =
                '<div class="openinobj' +
                e +
                '" style="background:' +
                _openobj.openin_bg +
                " url(" +
                _openobj.openimg +
                ') center center/cover no-repeat"></div>')),
          $("body").prepend(_openobj._openinhtml);
      } else if (
        1 == _openobj.cover_type &&
        "" != __INFO__.format_pano_expire &&
        ("pc" == $.browserRedirect()
          ? (_openobj.openimg = _openobj.openin_pcimage)
          : "phone" == $.browserRedirect() &&
            ((_openobj.openimg = _openobj.openin_mobileimage),
            _meta.openin_type_mobile > 0 &&
              (_openobj.openin_type = _meta.openin_type_mobile)),
        "" != _openobj.openimg)
      ) {
        _openobj.isopenin = 1;
        let e = 1 == __INFO__.password_status ? " visib_h" : "",
          a = 3,
          t = _openobj.openimg + "?x-oss-process=video/snapshot,t_0,f_jpg";
        (_openobj.fmimgload = function () {
          if (
            ($(".openinobj .fmimg").removeAttr("onload"),
            $(".openinobj .openinvideo").addClass("on"),
            2 == _openobj.openin_type && self == top)
          ) {
            let e = new Image();
            (e.src = t),
              (e.onload = function () {
                let a = e.width / paramObj._width,
                  t = e.height / paramObj._height;
                if (a > t) {
                  let e =
                    1 == _openobj.openin_type
                      ? paramObj._height - 100
                      : paramObj._height;
                  $(".openinobj .fmimg").css("height", e + "px"),
                    $("#vVideo").css({ width: "auto", height: e + "px" });
                } else {
                  let e =
                    1 == _openobj.openin_type
                      ? paramObj._width - 100
                      : paramObj._width;
                  $(".openinobj .fmimg").css({ width: e + "px" }),
                    $("#vVideo").css("width", e + "px");
                }
              });
          }
        }),
          (_openobj._openinhtml =
            '<div class="openinobj' +
            e +
            '" style="background: ' +
            _openobj.openin_bg +
            '"><video id="vVideo" class="openinvideo windowBody ' +
            (1 == _openobj.openin_type ? "nofull" : "") +
            '" playsinline="true" crossorigin="anonymous" x5-video-player-type="h5" x5-video-player-fullscreen="true" x5-video-orientation="portrait"' +
            (1 != __INFO__.password_status ? " autoplay" : "") +
            ' src="' +
            _openobj.openimg +
            '" ' +
            (1 == _openobj.openin_controls ? "controls" : "") +
            ' poster="' +
            t +
            '"></video><img class="fmimg ' +
            (1 == _openobj.openin_type ? "nofull" : "") +
            '" src="' +
            t +
            '" style="z-index:99999;" onload="_openobj.fmimgload()"><i class="iconfont icon_kaishi" style="position: absolute; left: 50%; top: 50%; transform: translate(-50%,-50%); font-size: 36px; z-index: 99999;text-shadow: 0 0 #000000, 0 0px 6px rgba(0,0,0,.4), 0 0 #000000, 0 0 #000000;"></i><span class="djs disabled22 none" style="z-index:9999999;opacity: 0.6;">3 ' +
            _langObj.tiaoguo +
            "</div></div>"),
          $("body").prepend(_openobj._openinhtml),
          2 == _openobj.openin_dktype &&
            1 == _openobj.openin_loop &&
            $("#vVideo").attr("loop", !0),
          (2 != _openobj.openin_dktype && 3 != _openobj.openin_dktype) ||
            $(".openinobj .djs").removeClass("none"),
          (_openobj._vVideo = document.getElementById("vVideo")),
          $(".openinobj .fmimg,.openinobj .icon_kaishi").click(function () {
            _openobj._vVideo.play();
          }),
          "ios" == $.isPhone() &&
            "phone" == $.browserRedirect() &&
            $(".openinobj .djs").bind($.touchEvents.start, function () {
              $(this).click();
            }),
          _openobj._vVideo.addEventListener(
            "canplay",
            function () {
              1 != __INFO__.password_status && _openobj._vVideo.play(),
                1 != _openobj.openin_controls &&
                  $("#vVideo").click(function () {
                    _openobj._vVideo.paused
                      ? _openobj._vVideo.play()
                      : _openobj._vVideo.pause();
                  });
            },
            !1
          ),
          _openobj._vVideo.addEventListener(
            "play",
            function (e) {
              $(".openinobj .openinvideo").addClass("on"),
                "phone" == $.browserRedirect()
                  ? ($.isWeiXinClient() &&
                      $(".openinobj .icon_kaishi").remove(),
                    (_openobj.currentTimeint = setInterval(function () {
                      _openobj._vVideo.currentTime > 0 &&
                        ($(".openinobj .fmimg").remove(),
                        $(".openinobj .icon_kaishi").remove(),
                        clearInterval(_openobj.currentTimeint));
                    }, 100)))
                  : ($(".openinobj .fmimg").remove(),
                    $(".openinobj .icon_kaishi").remove()),
                window._openobj.djs ||
                  $(".openinobj .djs").hasClass("keet") ||
                  (window._openobj.djs = setInterval(function () {
                    a--,
                      a > 0
                        ? $(".openinobj .djs").html(a + " " + _langObj.tiaoguo)
                        : ($(".openinobj .djs")
                            .addClass("keet")
                            .removeClass("disabled22")
                            .html(_langObj.tiaoguo)
                            .css("opacity", "1"),
                          clearInterval(window._openobj.djs),
                          delete window._openobj.djs);
                  }, 1e3));
            },
            !1
          ),
          (1 != _openobj.openin_dktype && 3 != _openobj.openin_dktype) ||
            _openobj._vVideo.addEventListener(
              "ended",
              function () {
                $(".openinobj .djs").click();
              },
              !1
            ),
          1 != __INFO__.password_status && _openobj._vVideo.play();
      }
      if (
        1 == _openobj.isopenin &&
        (1 == _openobj.cover_type ||
          (1 != _openobj.openin_dktype && 3 != _openobj.openin_dktype) ||
          ((_openobj.autoopen = function () {
            delete _openobj.autoopen;
            let e = _openobj.openin_waitime;
            (window.tiaoguo = setTimeout(function () {
              clearTimeout(window.tiaoguo),
                delete window.tiaoguo,
                $(".openinobj").remove(),
                (_openobj.isopenin = 0),
                1 != _krpano.get("oncomplete") ||
                _krpano.get("is_action_endopenanimate")
                  ? (window.endopenanimateInter = setInterval(function () {
                      1 != _krpano.get("oncomplete") ||
                      _krpano.get("is_action_endopenanimate")
                        ? _krpano.get("is_action_endopenanimate") &&
                          (clearInterval(window.endopenanimateInter),
                          delete window.endopenanimateInter)
                        : (clearInterval(window.endopenanimateInter),
                          delete window.endopenanimateInter,
                          _krpano.call("endopenanimate()"));
                    }, 1e3))
                  : _krpano.call("endopenanimate()");
            }, 1e3 * Number(e))),
              $(".openinobj").append(
                '<span class="djs">' + e + " " + _langObj.tiaoguo + "</span>"
              ),
              (window._openobj.djs = setInterval(function () {
                e--,
                  e > 0
                    ? $(".openinobj .djs").html(e + " " + _langObj.tiaoguo)
                    : (clearInterval(window._openobj.djs),
                      delete window._openobj.djs);
              }, 1e3));
          }),
          0 == __INFO__.password_status && _openobj.autoopen()),
        1 == _openobj.cover_type ||
          (0 == _openobj.cover_type &&
            (2 == _openobj.openin_dktype || 3 == _openobj.openin_dktype)))
      ) {
        let e = 1 != _openobj.cover_type ? ".openinobj" : ".openinobj .close";
        $(e).click(function () {
          $(".openinobj").remove(),
            (_openobj.isopenin = 0),
            window.tiaogelem &&
              (clearTimeout(window.tiaoguo), delete window.tiaoguo),
            window._openobj.djs &&
              (clearInterval(window._openobj.djs), delete window._openobj.djs),
            1 != _krpano.get("oncomplete") ||
            _krpano.get("is_action_endopenanimate")
              ? (window.endopenanimateInter = setInterval(function () {
                  1 != _krpano.get("oncomplete") ||
                  _krpano.get("is_action_endopenanimate")
                    ? _krpano.get("is_action_endopenanimate") &&
                      (clearInterval(window.endopenanimateInter),
                      delete window.endopenanimateInter)
                    : (clearInterval(window.endopenanimateInter),
                      delete window.endopenanimateInter,
                      _krpano.call("endopenanimate()"));
                }, 1e3))
              : _krpano.call("endopenanimate()");
        });
      }
      (__WASEE_DATA__.product.panoinfo.skinItem > 0 && _meta.langue_show > 0) ||
      4 == __WASEE_DATA__.product.panoinfo.skinItem
        ? ((paramObj.langClass = " clangugee"),
          $(".navrighttop .fullscreen").attr("data-lname", "quanqingqieh"),
          $(".navrighttop .autorotate").attr("data-lname", "zidongxuny"),
          $(".navrighttop .vrr").attr("data-lname", "vr"),
          $(".navrighttop .music").attr("data-lname", "beijingmusic"),
          $(".navrighttop .voice").attr("data-lname", "beijingvoice"),
          $(".navrighttop .gyro").attr("data-lname", "tuoluoyi"),
          $(".navrighttop .fullflag").attr("data-lname", "hideflag"),
          $(".navrighttop .winecellar_p").attr("data-lname", "shapan"),
          $(".radarimgbody .scalebsg .title").attr("data-lname", "fangda"),
          $(".radarimgbody .shouqi .title").attr("data-lname", "close"),
          $(".item_bottom .pano_group_list_btn .title").attr(
            "data-lname",
            "changjinlist"
          ),
          $(".winecellar_p.muousetips .title").attr({
            "data-lname": "shapan",
            "data-lname2": "shouqi",
          }))
        : (paramObj.langClass = ""),
        4 == __WASEE_DATA__.product.panoinfo.skinItem &&
          (1 == __INFO__.password_status &&
            ($("#subinformain .lock .title")
              .attr("data-lname", "fangwenmima")
              .after(
                '<div class="title title2">' +
                  _languageObj.EN.fangwenmima +
                  "</div>"
              ),
            $("#subinformain .lock input[name=password]").attr({
              "data-lname": "fwmiantips",
              placeholder: "Password",
            }),
            $("#subinformain .lock .tips")
              .attr("data-lname", "fwmiantips2")
              .append(" " + _languageObj.EN.fwmiantips2),
            $("#subinformain .lock .wBtn")
              .attr("data-lname", "kaishichakan")
              .html("进入 " + _languageObj.EN.kaishichakan)),
          $(".openinobj .djs").length > 0 &&
            $(".openinobj .djs").attr("data-lname", "tiaoguo")),
        1 != __WASEE_DATA__.product.switch.overallNav.switch_hdmap ||
          1 != __WASEE_DATA__.product.panoinfo.scenic_map ||
          (paramObj.startscene && "scene_map" != paramObj.startscene) ||
          (_openobj.in_startanima = 0),
        (_openobj.autorotate =
          __WASEE_DATA__.product.switch.overallNav.autorotate),
        (_openobj.enableLookto =
          __WASEE_DATA__.product.switch.overallNav.enableLookto),
        (_openobj.autorotate_view =
          __WASEE_DATA__.product.switch.overallNav.autorotate_view),
        (_openobj.autorotate_time =
          __WASEE_DATA__.product.switch.overallNav.autorotate_time);
    } else
      $("body").append(
        '<div class="allcenter flex__center" style=" width: auto; background: #fff; color: #000; padding: 8px 14px; min-height: 60px; max-width: 80%; border-radius: 6px;">未检测到任何场景，场景或已删除。</div>'
      );
  })(),
  $(function () {
    function e() {
      _waseeVRObj.addJavascript({
        src: paramObj.resourceWasee + "/js/wxjssdk.min.js?20220616",
        callBack: function () {
          _waseeVRObj.isWeiXinClient &&
            (paramObj._isWaseehost ||
              ((shareObj.doAddWxShareRecord = function () {}),
              (shareObj.isOnloadShare = !1)),
            wx.ready(function () {
              "object" == typeof _openobj &&
                1 == _openobj.cover_type &&
                document.getElementById("vVideo") &&
                document.getElementById("vVideo").play(),
                0 == $("#audio_bgmusic").length &&
                  $("#pano_body").append(
                    '<audio id="audio_bgmusic" src="' +
                      paramObj.resourceWasee +
                      '/js/wasee.mp3" autoplay></audio>'
                  ),
                0 == $("#audio_bgvoice").length &&
                  $("#pano_body").append(
                    '<audio id="audio_bgvoice" src="' +
                      paramObj.resourceWasee +
                      '/js/wasee.mp3" autoplay></audio>'
                  ),
                0 == $("#audio_xianlu_guide").length &&
                  $("#pano_body").append(
                    '<audio id="audio_xianlu_guide" src="' +
                      paramObj.resourceWasee +
                      '/js/wasee.mp3" autoplay></audio>'
                  ),
                $("#audio_bgmusic").attr("autoplay") &&
                  document.getElementById("audio_bgmusic").play(),
                $("#audio_bgvoice").attr("autoplay") &&
                  document.getElementById("audio_bgvoice").play(),
                document.getElementById("audio_xianlu_guide").play(),
                "object" == typeof _openobj &&
                  _openobj._vVideo &&
                  _openobj._vVideo.play();
            }));
        },
      });
    }
    (_shareObj = {
      _pool_: paramObj._pool_,
      title: __WASEE_DATA__.wxShare.title,
      desc:
        (0 == __INFO__.product_status ? "wasee.com技术支持~" : "") +
        __WASEE_DATA__.wxShare.desc,
      imgUrl: __WASEE_DATA__.wxShare.imgUrl,
      link:
        1 == __WASEE_DATA__.product.panoinfo.switch_firstscene &&
        __WASEE_DATA__.product.panoinfo.firstscene > 0
          ? location.origin +
            location.pathname +
            "?def_sid=" +
            __WASEE_DATA__.product.panoinfo.firstscene
          : __WASEE_DATA__.wxShare.link,
      isOnloadShare: !0,
      shareData: { obj_type: 121, obj_id: __WASEE_DATA__.product.panoinfo.id },
    }),
      $.isWeiXinClient()
        ? (_waseeVRObj.addJavascript({
            src: "https://res.wx.qq.com/open/js/jweixin-1.6.0.js",
            callBack: function () {
              e();
            },
          }),
          (_wxObj = {
            jsApiList: [
              "onMenuShareAppMessage",
              "onMenuShareTimeline",
              "onMenuShareQQ",
              "onMenuShareQZone",
              "getLocation",
              "openLocation",
            ],
            openTagList: ["wx-open-launch-weapp"],
          }))
        : e(),
      (paramObj.addCss = ".pano_group_list_btn{cursor: pointer;}"),
      $("#dataObj").remove(),
      ("245327" != paramObj.krpano.krpano_id &&
        115605 != __WASEE_DATA__.anchor.id &&
        115606 != __WASEE_DATA__.anchor.id) ||
        (paramObj.addCss +=
          ".radarimgbody{background-color: initial;height:auto;}"),
      _waseeVRObj.setCss(paramObj.addCss),
      $(".navmenu")
        .on("click", ".btn.wechat", function () {
          var e = "长按识别二维码",
            a = "",
            t = "";
          "" == paramObj.barcode_url &&
            ((paramObj.barcode_url =
              paramObj.resourceWasee + "/home/krpano/img/noqrcode.jpg"),
            (e = "城主未配置二维码")),
            (a =
              "" != paramObj.pool_mobile
                ? ' href="tel:' + paramObj.pool_mobile + '"'
                : " onclick=\"$.toast('城主未配置联系方式','text');void(0);\"");
          var o =
            '<div class="mask_Box_overlay" onclick="_waseeVRObj.closeMask_Box(\'.wachatBody\')"></div><div class="wachatBody allcenter mask_Box"><img src="' +
            paramObj.resourceWasee +
            '/home/krpano/img/xg_bg.png" class="bg"><div class="title">名片</div><div class="qrCodebody"><div class="body"><img class="qrCode' +
            t +
            '" src="' +
            paramObj.barcode_url +
            '" onload="this.height=this.width;"><span class="j1"></span><span class="j2"></span><span class="j3"></span><span class="j4"></span></div><div class="tips">' +
            e +
            '</div></div><a class="tel1"' +
            a +
            '><div class="tel2"><div class="tel flex__center">联系我们</div></div></a></div>';
          $("#subinformain").append(o),
            setTimeout(function () {
              $(".wachatBody").addClass("on").prev().addClass("on");
            }, 10);
        })
        .on("click", ".btn.music", function () {
          $(this).hasClass("off")
            ? ($(this).removeClass("off"), paramObj.myAudio.play())
            : ($(this).addClass("off"), paramObj.myAudio.pause());
        })
        .on("click", ".btn.cls", function () {
          if ($(this).hasClass("barragebtn")) {
            if (
              ($.setCookie(
                "closeBarrage",
                $.getCookie("closeBarrage") +
                  "pano" +
                  paramObj.krpano.krpano_id +
                  "=" +
                  paramObj.closeBarrageDate +
                  "|",
                864e5
              ),
              barrageModule.clear_fun(),
              (paramObj.bullet_screen_status = "0"),
              $(this).removeClass("barragebtn"),
              "1" == paramObj.clear_screen_status)
            )
              $(this).addClass("cls2");
            else {
              $(".navmenu").removeClass("hide");
              var e = paramObj._App_NaviBarHeight + 10;
              if ($("#wsNotice").length > 0)
                e =
                  paramObj._App_NaviBarHeight +
                  document.getElementById("wsNotice").scrollHeight +
                  10;
              $(".navmenu").css("top", e + "px"),
                $(".navmenu .btn").addClass("show"),
                $(".navmenu_more").removeClass("nonee");
            }
            return (
              $(
                ".menuWrap .hyrlbg_ind,#hymenu_industry,#hymenu_sub,.hyrlbg_sub"
              ).removeClass("nonee"),
              $(".next.ww").length > 0
                ? $(".next.ww").removeClass("none")
                : $(".bottomOther").length > 0 &&
                  $(".bottomOther").addClass("on"),
              $(".navmenu_more input[name=bullet_screen_status]").prop(
                "checked",
                !1
              ),
              void (
                "1" != paramObj.clear_screen_status &&
                (_krpano.call("showAllHotspot(cls);"),
                _waseeVRObj.clsOrBullanToClose(0))
              )
            );
          }
          if ($(this).hasClass("cls2")) {
            $(this).removeClass("cls2"),
              (paramObj.clear_screen_status = "0"),
              $(".navmenu").removeClass("hide");
            e = paramObj._App_NaviBarHeight + 10;
            if ($("#wsNotice").length > 0)
              e =
                paramObj._App_NaviBarHeight +
                document.getElementById("wsNotice").scrollHeight +
                10;
            $(".navmenu").css("top", e + "px"),
              $(".navmenu .btn").addClass("show"),
              $(".navmenu_more").removeClass("nonee"),
              _waseeVRObj.cls_small &&
                ((_waseeVRObj.cls_small = !1), $(".cbottom.hylogo").click()),
              $("#wsNotice").length > 0 &&
                $("#wsNotice,.noticetops").removeClass("hide"),
              $(".cintyfwliBody").length > 0 &&
                $(".cintyfwliBody").removeClass("hide"),
              $(".next.ww").length > 0
                ? $(".next,ww").removeClass("none")
                : $(".bottomOther").length > 0 &&
                  $(".bottomOther").addClass("on"),
              $(".lightBox").removeClass("hide"),
              _waseeVRObj.clsOrBullanToClose(0),
              _krpano.call("showAllHotspot(cls);"),
              paramObj._isForAPP &&
                (window.webkit.messageHandlers.API_UI_showNaviBar.postMessage(
                  !0
                ),
                window.webkit.messageHandlers.API_UI_showStatusBar.postMessage(
                  !0
                ));
          } else (paramObj.clear_screen_status = "1"), $(".navmenu").addClass("hide").find(".show").removeClass("show"), $(".navmenu_more").addClass("nonee"), $(this).addClass("cls2"), $(".cbottom.hylogo").hasClass("small") || ((_waseeVRObj.cls_small = !0), $(".cbottom.hylogo").click()), $("#wsNotice").length > 0 && $("#wsNotice,.noticetops").addClass("hide"), $(".cintyfwliBody").length > 0 && $(".cintyfwliBody").addClass("hide"), $(".next.ww").length > 0 ? $(".next.ww").addClass("none") : $(".bottomOther").length > 0 && $(".bottomOther").removeClass("on"), $(".lightBox").addClass("tstion hide"), _waseeVRObj.clsOrBullanToClose(-1), _krpano.call("hideAlltHotspot(cls);"), paramObj._isForAPP && (window.webkit.messageHandlers.API_UI_showNaviBar.postMessage(!1), window.webkit.messageHandlers.API_UI_showStatusBar.postMessage(!1));
        }),
      document.addEventListener("visibilitychange", function () {
        document.hidden
          ? _soundObj.stopsound("allsound", "temporary_pause_gq")
          : _soundObj.stopsound("allsound", "temporary_nopause_gq");
      }),
      ($.touchEvents = {
        start: $.support.touch ? "touchstart" : "mousedown",
        move: $.support.touch ? "touchmove" : "mousemove",
        end: $.support.touch ? "touchend" : "mouseup",
      });
    var a = _waseeVRObj.isDesktop ? "click" : "touchend",
      t = $.touchEvents.start,
      o = $.touchEvents.move,
      s = $.touchEvents.end;
    $(document)
      .on(o, "", function (e) {
        let a = e;
        if (
          ($.support.touch && (e = e.touches[0]),
          (_waseeVRObj.xx = e.pageX),
          (_waseeVRObj.yy = e.pageY),
          window.radar && window.radar.init)
        ) {
          if (
            (e.pageX < radar.xx
              ? (radar.slateX = radar.slateX - Math.abs(e.pageX - radar.xx))
              : (radar.slateX = radar.slateX + Math.abs(e.pageX - radar.xx)),
            e.pageY < radar.yy
              ? (radar.slateY = radar.slateY - Math.abs(e.pageY - radar.yy))
              : (radar.slateY = radar.slateY + Math.abs(e.pageY - radar.yy)),
            $(".radarimg").css(
              "transform",
              "translate3d(" +
                radar.slateX +
                "px," +
                radar.slateY +
                "px,0px) scale(1) "
            ),
            (radar.xx = e.pageX),
            (radar.yy = e.pageY),
            $.support.touch)
          ) {
            let e = a;
            if (!store.moveable) return;
            e.preventDefault();
            var t = e.touches,
              o = t[0],
              s = t[1];
            if (s) {
              store.pageX2 || (store.pageX2 = s.pageX),
                store.pageY2 || (store.pageY2 = s.pageY);
              var i = function (e, a) {
                  return Math.hypot(a.x - e.x, a.y - e.y);
                },
                n =
                  i({ x: o.pageX, y: o.pageY }, { x: s.pageX, y: s.pageY }) /
                  i(
                    { x: store.pageX, y: store.pageY },
                    { x: store.pageX2, y: store.pageY2 }
                  ),
                r = store.originScale * n;
              (store.scale = r),
                (radar.scale = store.scale),
                $(".radarimg,.radarimg .moveimg").css({
                  width: window.radar.scale * radar.radar_img.width,
                  height: window.radar.scale * radar.radar_img.height,
                }),
                $(".radarimgbody .scale .scalev").html(
                  (100 * radar.scale).toFixed(0) + "%"
                );
            }
          }
        } else "object" == typeof _waseeVRObj && _waseeVRObj.is_panoMousedown && "object" == typeof wstphdObj && 2 == wstphdObj.is_sign && wstphdObj.pushsignbrush();
      })
      .on(t, "", function (e) {
        "object" == typeof _waseeVRObj && (_waseeVRObj.is_panoMousedown = 1),
          "object" == typeof wstphdObj &&
            2 == wstphdObj.is_sign &&
            wstphdObj.addsignhot(),
          $(".panotipsContent.on").length > 0 &&
            "1" != $(".panotipsContent").attr("data-focus") &&
            $(".panotipsContent.on").removeClass("on");
      })
      .on(s, function (e) {
        "object" == typeof _waseeVRObj && delete _waseeVRObj.is_panoMousedown,
          window.radar && (window.radar.init = !1),
          window.radarhotview && (window.radarhotview.init = !1),
          window.moveimg && (window.moveimg.init = !1),
          "object" == typeof wstphdObj &&
            2 == wstphdObj.is_sign &&
            wstphdObj.brush_mousedown();
      })
      .on(a, ".weui-actions_mask", function () {})
      .on(a, ".mask_Box_overlay", function () {
        _waseeVRObj.setAutorotateObj.goautogyro(),
          _waseeVRObj.setAutorotateObj.govideoautoplay(),
          $(this).next(".mask_Box").hasClass("link_3D") &&
            _soundObj.stopsound("allsound", "temporary_nopause"),
          $(this).hasClass("remove") &&
            setTimeout(function () {
              $(".mask_Box:last,.mask_Box_overlay:last").remove();
            }, 300);
      })
      .on(
        "click",
        '#iframe-alert[data-type="article"] .trpm-bk,#iframe-alert[data-type="article"] .trpm-x',
        function () {
          _soundObj.stopsound("allsound", "temporary_nopause"),
            _waseeVRObj.setAutorotateObj.goautogyro(),
            _waseeVRObj.setAutorotateObj.govideoautoplay();
        }
      )
      .on("click", ".openinobj .djs", function () {
        if (!$(this).hasClass("disabled22"))
          return (
            clearInterval(window._openobj.djs),
            delete window._openobj.djs,
            clearTimeout(window.tiaoguo),
            delete window.tiaoguo,
            $(".openinobj").remove(),
            (_openobj.isopenin = 0),
            1 != _krpano.get("oncomplete") ||
            _krpano.get("is_action_endopenanimate")
              ? (window.endopenanimateInter = setInterval(function () {
                  1 != _krpano.get("oncomplete") ||
                  _krpano.get("is_action_endopenanimate")
                    ? _krpano.get("is_action_endopenanimate") &&
                      (clearInterval(window.endopenanimateInter),
                      delete window.endopenanimateInter)
                    : (clearInterval(window.endopenanimateInter),
                      delete window.endopenanimateInter,
                      _krpano.call("endopenanimate()"));
                }, 1e3))
              : _krpano.call("endopenanimate()"),
            _waseeVRObj.is_scenic > 0 &&
              "object" == typeof _scenicObj &&
              1 == _scenicObj.data.firstpausetad &&
              (delete _scenicObj.data.firstpausetad,
              _scenicObj.openscenemapBack(1)),
            !1
          );
      })
      .on("click", ".wsyindao", function () {
        let e = $(this).find(".systips:eq(0)"),
          a = e.attr("data-Cook"),
          t = 2592e6;
        e.remove(),
          a &&
            a.length > 0 &&
            ($.setCookie(a, -1, t),
            _waseeVRObj.panohelptimeout[a] &&
              (clearTimeout(_waseeVRObj.panohelptimeout[a]),
              delete _waseeVRObj.panohelptimeout[a])),
          _waseeVRObj.panohelp();
      })
      .on("click", ".pano_group_list_btn", function () {
        $(this).hasClass("list")
          ? ($(this).removeClass("list"),
            $(".pano_bottom_item").removeClass("onhide"),
            $(".pano_bottom_item .item_top").removeClass("transhide"))
          : (null != window.show_guide_speci &&
              (clearTimeout(window.show_guide_speci),
              delete window.show_guide_speci),
            window.showspecificlist_timeout &&
              (clearTimeout(window.showspecificlist_timeout),
              delete window.showspecificlist_timeout),
            $(this).addClass("list"),
            $(".pano_bottom_item").addClass("onhide"),
            $(".pano_bottom_item .item_top").addClass("transhide")),
          window.isshowspeci && $(".setspecir .dl_stop").click(),
          _waseeVRObj.panovideoObj.setvideocontrolwzhi(1);
      })
      .on(
        "click",
        ".panogroupBody .panogrouplist span.swiper-slide",
        function () {
          if (!$(this).hasClass("on")) {
            var e = $(this).attr("data-gid");
            if (
              ($(this).addClass("on").siblings().removeClass("on"),
              $(".childgrouplist.on .swiper-slide.on").removeClass("on"),
              $(".panogroupBody .panogrouplist .swiper-slide.on a").width() >
                $(".panogroupBody .panogrouplist .swiper-slide.on i").width())
            ) {
              let e =
                2.5 *
                Math.floor(
                  $(
                    ".panogroupBody .panogrouplist .swiper-slide.on a"
                  ).width() / 120
                );
              $(".panogroupBody .panogrouplist .swiper-slide.on a").addClass(
                "_animatitle"
              ),
                e > 2.5 &&
                  $(".panogroupBody .panogrouplist .swiper-slide.on a").css(
                    "animation-duration",
                    e + "s"
                  );
            }
            _panoGroupObj.setPanoGroupHtml(e);
          }
        }
      )
      .on(
        "click",
        ".panogroupBody .childgrouplist span.swiper-slide",
        function () {
          if (!$(this).hasClass("on")) {
            var e = $(this).attr("data-gid");
            if (
              ($(this).addClass("on").siblings().removeClass("on"),
              $(this).find("a").width() > $(this).find("i").width())
            ) {
              let e = 2.5 * Math.floor($(this).find("a").width() / 120);
              $(this).find("a").addClass("_animatitle"),
                e > 2.5 &&
                  $(this)
                    .find("a")
                    .css("animation-duration", e + "s");
            }
            _panoGroupObj.setPanoGroupHtml(e);
          }
        }
      )
      .on(
        "mousedown touchstart",
        ".panogroupBody .panogrouplist span.swiper-slide,.panogroupBody .childgrouplist span.swiper-slide",
        function () {
          _panoGroupObj.panogroupKeydown = !0;
        }
      )
      .on("click", ".panogroupBody .panolist .panowrap", function () {
        var e = $(this).attr("data-scenename").substring(5);
        if (
          !$(this).hasClass("on") ||
          ($(this).hasClass("on") &&
            $(this).hasClass("showrelate") &&
            _panoGroupObj.panoOFFgroup[_waseeVRObj.sceneId].pid == e)
        ) {
          var a = $(this).attr("data-group-index"),
            t = $(this).attr("data-this-index");
          (_panoGroupObj.panogroupData[a].scenes[t].is_history = 1),
            (_panoGroupObj.panoOFFgroup[e].isHistory = 1),
            _waseeVRObj.toLoadscene({ id: e });
        } else "1" == _waseeVRObj.is_big_pixel && _waseeVRObj.bigpixelData.length > 0 && _panoGroupObj.isShowpanogroup({ show: "reon" }), _waseeVRObj.setbigpixel_a_b("!s");
      })
      .on(
        "click",
        ".panogroupBody .panolist .panowrap .relat_icon",
        function () {
          $(this).parent().parent().toggleClass("showrelate"),
            $(this).parent().parent().hasClass("showrelate")
              ? (new Swiper(
                  ".pano_bottom_item.on .panogroupBody .panolist .panowrap.showrelate .relatedbody .swiper-container",
                  {
                    freeMode: !0,
                    freeModeMomentum: !0,
                    slidesPerView: "auto",
                    nested: !0,
                    prevButton: ".swiper-button-prev.repl",
                    nextButton: ".swiper-button-next.repl",
                  }
                ),
                $(".panogroupBody .panolist .panotb").addClass("overini"),
                $(
                  ".pano_bottom_item.on .panogroupBody .panolist .panowrap.showrelate .relatedbody"
                ).offset().left < 25
                  ? $(
                      ".pano_bottom_item.on .panogroupBody .panolist .panowrap.showrelate .relatedbody"
                    ).css({ left: 0, transform: "initial" })
                  : $(
                      ".pano_bottom_item.on .panogroupBody .panolist .panowrap.showrelate .relatedbody"
                    ).removeAttr("style"))
              : $(".panogroupBody .panolist .panotb").removeClass("overini");
        }
      )
      .on(
        a,
        ".panogroupBody .panolist .panowrap .relatedbody .relatpanowrap",
        function () {
          if ($(this).hasClass("on"))
            "1" == _waseeVRObj.is_big_pixel &&
              _waseeVRObj.bigpixelData.length > 0 &&
              _panoGroupObj.isShowpanogroup({ show: "reon" }),
              _waseeVRObj.setbigpixel_a_b("!s");
          else {
            $(this).attr("data-group-index"), $(this).attr("data-this-index");
            var e = $(this).attr("data-scenename").substring(5);
            (_panoGroupObj.panoOFFgroup[e].isHistory = 1),
              _waseeVRObj.toLoadscene({ id: e });
          }
          return !1;
        }
      )
      .on(a, ".in_startpano", function () {
        return (
          $(this).remove(),
          _waseeVRObj.setin_image_url &&
            clearTimeout(_waseeVRObj.setin_image_url),
          _waseeVRObj.bigpixeltipsShow(),
          !1
        );
      })
      .on(a, ".setautotour .dl_start", function () {
        (_waseeVRObj.autoGuidesObj.status = "nopaused"),
          _waseeVRObj.autoGuidesObj.toGuide(
            _waseeVRObj.autoGuidesObj.xianlu_index
          ),
          $(".setautotour .dl_start").addClass("dl_zt").removeClass("dl_start");
      })
      .on(a, ".setautotour .dl_zt", function () {
        _krpano.call("stoplookto()"),
          (_waseeVRObj.autoGuidesObj.ath = _krpano.get("view.hlookat")),
          (_waseeVRObj.autoGuidesObj.atv = _krpano.get("view.vlookat")),
          (_waseeVRObj.autoGuidesObj.fov = _krpano.get("view.fov")),
          (_waseeVRObj.autoGuidesObj.status = "paused"),
          _soundObj.stopsound("guide"),
          _soundObj.stopsound("xianlu_guide"),
          $(".setautotour .dl_zt").addClass("dl_start").removeClass("dl_zt");
      })
      .on(a, ".setautotour .dl_stop", function () {
        _krpano.call("stoplookto()"), _waseeVRObj.autoGuidesObj.endGuide(1);
      })
      .on(a, ".bigpixel .btabel>span", function () {
        if (!$(this).hasClass("more") && !_waseeVRObj.ischangeBigpixelhotspot) {
          $(".bigpixeltipst").length > 0 && $(".bigpixeltipst").remove(),
            (_waseeVRObj.ischangeBigpixelhotspot = !0),
            $(this).addClass("on anima").siblings().removeClass("on anima");
          var e = $(this).attr("ath"),
            a = $(this).attr("atv");
          _krpano.call(
            "zoomto(140,smooth(80,100,220));lookto(" +
              e +
              "," +
              a +
              ");zoomto(2,smooth(80,100,220));js(_waseeVRObj.setBigpixelhotspot(0);)"
          );
        }
      })
      .on("click", ".radarimgbodyBox", function () {
        $(".radarimgbody").hasClass("big") &&
          $(".radarimgbody .closeradar").click();
      })
      .on("click", ".radarimgbody .scalebsg", function () {
        if (
          ($(this).toggleClass("big"),
          $(".radarimgbodyBox").toggleClass("on"),
          $(this).hasClass("big")
            ? $(".radarimgbody").addClass("big big2")
            : ($(".radarimgbody").removeClass("big"),
              setTimeout("$('.radarimgbody').removeClass('big2');", 100),
              $(".radarimg,.radarimg .moveimg").removeAttr("style")),
          $(".radarimgbody").hasClass("amapBody"))
        )
          $(".radarimgbody").hasClass("big")
            ? AMapModule.data.map &&
              _waseeVRObj.radarObj &&
              _waseeVRObj.radarObj.sceneradar &&
              _waseeVRObj.radarObj.sceneradar.radar_img &&
              (1 == _waseeVRObj.radarObj.sceneradar.radar_img.mapshowtype
                ? AMapModule.data.map.setFitView()
                : (AMapModule.data.map.panTo([
                    _waseeVRObj.radarObj.sceneradar.radar_img.lng,
                    _waseeVRObj.radarObj.sceneradar.radar_img.lat,
                  ]),
                  AMapModule.data.map.setZoom(
                    _waseeVRObj.radarObj.sceneradar.radar_img.zoom
                      ? _waseeVRObj.radarObj.sceneradar.radar_img.zoom
                      : 18
                  )))
            : ("pc" == $.browserRedirect()
                ? $(".radarimg").css({
                    height: _waseeVRObj.radarObj.radarimgwidhei,
                    width: _waseeVRObj.radarObj.radarimgwidhei,
                  })
                : $(".radarimg").css({
                    height: _waseeVRObj.radarObj.m_radarimgwidhei,
                    width: _waseeVRObj.radarObj.m_radarimgwidhei,
                  }),
              _waseeVRObj.radarObj.setradar_amap.panoToscene());
        else {
          let e = _waseeVRObj.radarObj.max_width,
            a = _waseeVRObj.radarObj.max_height,
            t = 0,
            o = 0;
          if (
            ($(".radarimgbody").hasClass("big") &&
              ((e = _waseeVRObj.radarObj.big_max_width),
              (a = _waseeVRObj.radarObj.big_max_height)),
            radar.radar_img.width < e && radar.radar_img.height < a)
          )
            (radar.scale = 1),
              (t = radar.radar_img.width),
              (o = radar.radar_img.height);
          else {
            let s = e / radar.radar_img.width;
            s > a / radar.radar_img.height && (s = a / radar.radar_img.height),
              (t = radar.radar_img.width * s),
              (o = radar.radar_img.height * s),
              (radar.scale = s);
          }
          (radar.slateX = 0),
            (radar.slateY = 0),
            $(".radarimgbody .scale .scalev").html(
              (100 * radar.scale).toFixed(0) + "%"
            ),
            $(".radarimgbody").removeClass("none"),
            $(".radarimgbody").hasClass("big")
              ? ($(".radarimg").css({
                  transform:
                    "translate3d(" +
                    radar.slateX +
                    "px," +
                    radar.slateY +
                    "px,0px) scale(1)",
                  width: t,
                  height: o,
                }),
                $(".radarimg .moveimg").css({ width: t, height: o }))
              : $(".radarimg,.radarimg .moveimg").css({
                  width: "auto",
                  height: "auto",
                });
        }
        return !1;
      })
      .on("click", ".radarimgbody .closeradar", function () {
        return (
          $(".radarimgbody").hasClass("big")
            ? $(".radarimgbody .scalebsg").click()
            : ($(".navrighttop .winecellar_p")
                .removeClass("click")
                .find("span")
                .html(_langObj.shapan),
              $(".radarimgbody").removeClass("on")),
          !1
        );
      })
      .on("click", ".radarimgbody .shouqi", function () {
        $(".winecellar_p span.title").html(_langObj.shapan),
          $(".radarimgbody").removeClass("on"),
          $(".winecellar_p").removeClass("click");
      })
      .on(a, ".radarimg", function (e) {
        return !1;
      })
      .on(t, ".radarimg", function (e) {
        let a = e;
        if (
          $(".radarimgbody").hasClass("big") &&
          !$(".radarimgbody").hasClass("amapBody") &&
          (window.radar || (window.radar = { scalev: 1 }),
          (radar.init = !0),
          $.support.touch && (e = e.touches[0]),
          (radar.init = !0),
          (radar.xx = e.pageX),
          (radar.yy = e.pageY),
          (store = { scale: radar.scale }),
          $.support.touch)
        ) {
          let e = a;
          var t = e.touches,
            o = t[0],
            s = t[1];
          s &&
            (e.preventDefault(),
            (store.pageX = o.pageX),
            (store.pageY = o.pageY),
            (store.moveable = !0),
            (store.pageX2 = s.pageX),
            (store.pageY2 = s.pageY)),
            (store.originScale = store.scale || 1);
        }
      })
      .on(s, ".radarimg", function (e) {
        "object" == typeof store &&
          ((store.moveable = !1), delete store.pageX2, delete store.pageY2);
      })
      .on(a, ".radarimgbody .scale", function () {
        return !1;
      })
      .on(a, ".radarimgbody .scale .scaleYSChAnGE", function (e) {
        let a = Number($(".radarimgbody .scale .scalev").html().split("%")[0]),
          t = $(this).hasClass("add")
            ? Math.floor(1.1 * a)
            : Math.floor(a / 1.1),
          o = radar.radar_img.width,
          s = (t * o) / 100;
        return (
          s > 9.99 * o
            ? ((s = 9.99 * o), (t = 999))
            : s < 200 && ((s = 200), (t = 100 * (s / o).toFixed(2))),
          (window.radar.scale = (t / 100).toFixed(2)),
          $(".radarimg,.radarimg .moveimg").css({
            width: window.radar.scale * radar.radar_img.width,
            height: window.radar.scale * radar.radar_img.height,
          }),
          $(".radarimgbody .scale .scalev").html(t + "%"),
          !1
        );
      })
      .on("mousewheel", ".radarimg", function () {
        if ($(".radarimgbody").hasClass("big")) {
          var e = 0;
          if (
            (event || (event = window.event),
            event.wheelDelta
              ? ((e = event.wheelDelta / 120), window.opera && (e = -e))
              : event.detail && (e = -event.detail / 3),
            e)
          ) {
            let a = Number(
                $(".radarimgbody .scale .scalev").html().split("%")[0]
              ),
              t = Math.floor(1.1 * a);
            e < 0 && (t = Math.floor(a / 1.1));
            let o = radar.radar_img.width,
              s = (t * o) / 100;
            s > 9.99 * o
              ? ((s = 9.99 * o), (t = 999))
              : s < 200 && ((s = 200), (t = 100 * (s / o).toFixed(2))),
              (window.radar.scale = (t / 100).toFixed(2)),
              $(".radarimg,.radarimg .moveimg").css({
                width: window.radar.scale * radar.radar_img.width,
                height: window.radar.scale * radar.radar_img.height,
              }),
              $(".radarimgbody .scale .scalev").html(t + "%");
          }
        }
      })
      .on(o, ".radarimg .hot.on", function (e) {
        return !1;
      })
      .on(t, ".radarimg .hot.on img", function (e) {
        return (
          (window.radarhotview.init = !0),
          (window.radarhotview.hlookat = _krpano.get("view.hlookat")),
          (window.radarhotview.angle = $(this).attr("data-angle")),
          !1
        );
      })
      .on(a, ".radarimg .hot,.radarimg .hOT_TITle", function () {
        if (
          ($(this).hasClass("hot") && !$(this).hasClass("on")) ||
          ($(this).hasClass("hOT_TITle") && !$(this).prev().hasClass("on"))
        ) {
          let e = $(this).attr("sceneid");
          e != _waseeVRObj.sceneId &&
            ($(".radarimgbody").hasClass("amapBody")
              ? ($(".radarimgbody.amapBody .markopenin").hide(),
                $(".radarimg .hot[sceneid=" + e + "]")
                  .next(".markopenin")
                  .show())
              : (_waseeVRObj.setmousetips({ del: 1 }),
                1 == __WASEE_DATA__.product.switch.overallNav.map_closeradar &&
                  $(".radarimgbody").hasClass("big") &&
                  $(".radarimgbodyBox .allclose").click(),
                _waseeVRObj.toLoadscene({ id: e })));
        }
        return !1;
      })
      .on(a, ".radarimg .markopenin", function () {
        let e = $(this).prev(".hot").attr("sceneid");
        e != _waseeVRObj.sceneId &&
          (_waseeVRObj.setmousetips({ del: 1 }),
          1 == __WASEE_DATA__.product.switch.overallNav.map_closeradar &&
            $(".radarimgbody").hasClass("big") &&
            $(".radarimgbodyBox .allclose").click(),
          _waseeVRObj.toLoadscene({ id: e }),
          $(".radarimgbody.amapBody .markopenin").hide());
      })
      .on("mouseover", ".radarimg .hot", function (e) {
        $(this).css("z-index", 9);
      })
      .on("mouseleave", ".radarimg .hot", function (e) {
        $(this).css("z-index", 1);
      })
      .on(a, ".toplist span", function () {
        return (
          $(this).hasClass("on") ||
            ((_waseeVRObj.radarObj.sceneradar =
              "1" == $(this).attr("tindex")
                ? _waseeVRObj.radar.overallradar
                : _waseeVRObj.radar.groupradar[
                    _waseeVRObj.radar.scene_radar[_waseeVRObj.sceneId]
                      .radar_imglist[$(this).attr("tindex") + "radar_type"].gid
                  ]),
            (_waseeVRObj.radarObj.sceneradar.radar_type =
              $(this).attr("tindex")),
            (_waseeVRObj.radarObj.sceneradar.isthischange = !0),
            _waseeVRObj.radarObj.change_radar_img(
              _waseeVRObj.radarObj.sceneradar,
              2
            ),
            $(this).addClass("on").siblings().removeClass("on")),
          !1
        );
      }),
      $(document)
        .on("click", ".speguidetail .speciBtn", function () {
          if (
            ($(".speguidetail").addClass("hide"),
            $(".guidecatelist").length > 0 &&
              $(".guidecatelist").hasClass("on") &&
              $(".guidecatelist").removeClass("on").removeAttr("style"),
            0 == $("#subinformain .setspecir").length &&
              ($("#subinformain").append(
                '<div class="setspecir flex__center"><div class="dl_start flex_center_y playerBtn" tips="' +
                  _langObj.xunyou +
                  '" tipss="' +
                  _langObj.pause +
                  '"><i class="iconfont"></i></div><div class="dl_stop flex_center_y" tips="' +
                  _langObj.close +
                  '"><i class="iconfont"></i></div></div>'
              ),
              "" != paramObj.langClass &&
                ($("#subinformain .setspecir .dl_start").attr({
                  "data-lname": "xunyou",
                  "data-lname2": "pause",
                }),
                $("#subinformain .setspecir .dl_stop").attr(
                  "data-lname",
                  "close"
                ))),
            setTimeout("$('#subinformain .setspecir').addClass('on')", 100),
            $(this).hasClass("on"))
          )
            $(this).removeClass("on"),
              $(".specigroupBody").removeClass("on"),
              (window.isshowspeci = !1);
          else {
            if (0 == $(".specigroupBody .specilist").length) {
              let e = _panoGroupObj.panoOFFgroup[_waseeVRObj.sceneId].specifics,
                a = "",
                t = {};
              for (let o = 0; o < e.length; o++) {
                const s = e[o];
                (t[s.name] = s),
                  "" == s.title && (s.title = "-"),
                  (a +=
                    '<div class="swiper-slide speciwrap" name="' +
                    s.name +
                    '" title="' +
                    s.title +
                    '"><div class="speciimg"><img src="' +
                    s.icon +
                    '" alt=""></div><span class="title">' +
                    s.title +
                    "</span></div>");
              }
              (_waseeVRObj.scene.specifics = t),
                $(".specigroupBody").html(
                  '<div class="specilist on"><div class="swiper-container"><div class="swiper-wrapper c">' +
                    a +
                    "</div></div></div>"
                );
              new Swiper(".specilist .swiper-container", {
                freeMode: !0,
                freeModeMomentum: !0,
                slidesPerView: "auto",
                preventClicksPropagation: !1,
                preventClicks: !1,
              });
            }
            $(".specigroupBody").addClass("on"), (window.isshowspeci = !0);
          }
          return (
            setTimeout(function () {
              _waseeVRObj.panovideoObj.setvideocontrolwzhi(5);
            }, 250),
            !1
          );
        })
        .on("click", ".specigroupBody .speciwrap", function () {
          let e = $(this).attr("name");
          _waseeVRObj.clickspecianimat(e, $(this));
        })
        .on("click", ".setspecir .dl_stop", function () {
          window.autospeci && delete window.autospeci,
            $("#subinformain .setspecir").removeClass("on"),
            setTimeout("$('#subinformain .setspecir').remove()", 300),
            $(".speguidetail").removeClass("hide"),
            $(".bigpixeltipst").remove(),
            $(".specigroupBody").removeClass("on"),
            (window.isshowspeci = !1),
            _waseeVRObj.panovideoObj.setvideocontrolwzhi(5);
        })
        .on(a, ".setspecir .playerBtn", function () {
          let e = $(this);
          return (
            $(this).hasClass("dl_start")
              ? ($(this).removeClass("dl_start").addClass("dl_zt"),
                (window.autospeci = {
                  isauto: !0,
                  index: 0,
                  go: function () {
                    if (!this.isauto) return;
                    if (
                      this.index >=
                      _panoGroupObj.panoOFFgroup[_waseeVRObj.sceneId].specifics
                        .length
                    )
                      return (
                        delete window.autospeci,
                        void e.addClass("dl_start").removeClass("dl_zt")
                      );
                    let a =
                      _panoGroupObj.panoOFFgroup[_waseeVRObj.sceneId].specifics[
                        this.index
                      ].name;
                    a && _waseeVRObj.clickspecianimat(a);
                  },
                }),
                window.autospeci.go())
              : (delete window.autospeci,
                $(this).addClass("dl_start").removeClass("dl_zt")),
            !1
          );
        })
        .on(
          "click",
          ".speguidetail .guideBtn,#subinformain .guideBtn",
          function () {
            if (
              _waseeVRObj.autoGuidesObj.autoGuides.length > 1 &&
              1 != _waseeVRObj.autoGuidesObj.zhangjieLen
            ) {
              if (0 == $(".guidecatelist").length) {
                null == _waseeVRObj.autoGuidesObj.zhangjieLen &&
                  (_waseeVRObj.autoGuidesObj.zhangjieLen = 0);
                let e = "";
                for (
                  let a = 0;
                  a < _waseeVRObj.autoGuidesObj.autoGuides.length;
                  a++
                ) {
                  const t = _waseeVRObj.autoGuidesObj.autoGuides[a];
                  if (t.point.length > 0) {
                    let o = 0,
                      s = "";
                    _waseeVRObj.autoGuidesObj.zhangjieLen++;
                    for (let e = 0; e < t.point.length; e++)
                      e < t.point.length - 1 &&
                        (t.point[e].to_sceneid > 0 &&
                        t.point[e].to_sceneid != t.point[e].sceneid
                          ? (o += 3)
                          : Number(t.point[e].time) > 0 &&
                            (o += Number(t.point[e].time)));
                    (s =
                      o > 60 && "CN" == _languageObj.lang
                        ? Math.floor(o / 60) + "分" + (o % 60) + "秒"
                        : o + " " + _langObj.miao),
                      (e +=
                        '<div class="item flex_center_y flex__justify__b" data-id="' +
                        t.id +
                        '"><div class="left flex_center_y"><span>' +
                        t.title +
                        '</span><span class="time" time="' +
                        s +
                        '">' +
                        _langObj.dayue +
                        " " +
                        s +
                        '</span></div><em class="tguideBtn flex_center_y ihover" data-index="' +
                        a +
                        '"><i class="iconfont icon_play"></i><span class="start">' +
                        _langObj.kaishiyoul +
                        "</span></em></div>");
                  }
                }
                if (!(_waseeVRObj.autoGuidesObj.zhangjieLen > 1))
                  return (
                    _waseeVRObj.autoGuidesObj.startguide(),
                    void _waseeVRObj.autoGuidesObj.goguideBtn(0)
                  );
                $(".speguidetail").append(
                  '<div class="guidecatelist"><div class="top flex_center_y flex__justify__b"><span class="title">' +
                    _langObj.daolanlux +
                    '</span><span class="close ihover" onclick="$(\'.guidecatelist\').removeClass(\'on\').removeAttr(\'style\');"><i class="iconfont icon_close"></i></span></div><div class="lists scrollbarw">' +
                    e +
                    "</div></div>"
                ),
                  (_waseeVRObj.autoGuidesObj.listTop =
                    0 - $(".guidecatelist").height() - 40);
              }
              $(".guidecatelist").hasClass("on")
                ? $(".guidecatelist").removeClass("on").removeAttr("style")
                : $(".guidecatelist")
                    .addClass("on")
                    .css("top", _waseeVRObj.autoGuidesObj.listTop + "px");
            } else
              _waseeVRObj.autoGuidesObj.startguide(),
                _waseeVRObj.autoGuidesObj.goguideBtn(0);
          }
        )
        .on(
          "click",
          ".speguidetail .guidecatelist .item .tguideBtn",
          function () {
            _waseeVRObj.autoGuidesObj.startguide(),
              _waseeVRObj.autoGuidesObj.goguideBtn($(this).attr("data-index"));
          }
        )
        .on(a, ".panotips", function () {
          pano_otherModule.dom_panoInfo({});
        })
        .on("click", ".pano_bottom_item .item_bottom .defi", function () {
          let e = $(this).attr("data-id"),
            a = __WASEE_DATA__.product.switch.definimenu.menus["_" + e];
          if (1 == a.tier) {
            if ("object" == typeof a.child_list && a.child_list.length > 0)
              if (0 == $(this).find(".MenuMOTS_LIST_BODY").length) {
                let e = "",
                  t = $(this);
                for (let t = 0; t < a.child_list.length; t++) {
                  const o = a.child_list[t];
                  e +=
                    '<span class="MenuMOTS_LIST_title" data-id="' +
                    o.substr(1) +
                    '">' +
                    __WASEE_DATA__.product.switch.definimenu.menus[o].title +
                    "</span>";
                }
                $(this).append(
                  '<div class="MenuMOTS_LIST_BODY"><div class="MenuMOTS_LIST">' +
                    e +
                    "</div></div>"
                ),
                  setTimeout(function () {
                    $(t).toggleClass("on").siblings().removeClass("on");
                  }, 50);
              } else $(this).toggleClass("on").siblings().removeClass("on");
          } else _waseeVRObj.hotspotClick(e, "menu"), $(this).toggleClass("on").siblings().removeClass("on");
        })
        .on(
          "click",
          ".pano_bottom_item .item_bottom .defi .MenuMOTS_LIST_BODY .MenuMOTS_LIST_title",
          function () {
            _waseeVRObj.hotspotClick($(this).attr("data-id"), "menu");
          }
        )
        .on(o, ".muousetips", function (e) {
          if (_waseeVRObj.isDesktop && $(this).attr("data-tips")) {
            let a = $(this).attr("data-tips"),
              t = e.pageX - ($(".mouseGS").width() + 15);
            0 == $(".mouseGS").length
              ? $("#subinformain").append(
                  '<div class="mouseGS">' + a + "</div>"
                )
              : $(".mouseGS").html(a),
              $(".mouseGS").css({ top: e.pageY - 8, left: t });
          }
        })
        .on("mouseleave", ".muousetips", function (e) {
          _waseeVRObj.isDesktop &&
            $(".mouseGS").length > 0 &&
            $(".mouseGS").remove();
        })
        .on("click", ".HOTCSTESGORY span", function () {
          if (
            ($(this).hasClass("on")
              ? $(this).removeClass("on")
              : $(this).addClass("on").siblings().removeClass("on"),
            null == _waseeVRObj.hotactelist &&
              (_waseeVRObj.hotactelist = _krpano.get("hotactelist").split("|")),
            _waseeVRObj.hotactelist.length > 0)
          ) {
            let e = $(this).hasClass("on") ? $(this).attr("value") : "all";
            for (let a = 0; a < _waseeVRObj.hotactelist.length; a++) {
              const t = _waseeVRObj.hotactelist[a].split(".");
              "all" == e || e == t[1]
                ? _krpano.call(
                    "set(hotspot[" +
                      t[0] +
                      "].visible,true);set(hotspot[" +
                      t[0] +
                      "_title].visible,true);set(hotspot[" +
                      t[0] +
                      "_tip].visible,true);"
                  )
                : _krpano.call(
                    "set(hotspot[" +
                      t[0] +
                      "].visible,false);set(hotspot[" +
                      t[0] +
                      "_title].visible,false);set(hotspot[" +
                      t[0] +
                      "_tip].visible,false);"
                  );
            }
            _waseeVRObj.hotcatedata &&
              _waseeVRObj.hotcatedata[e] &&
              1 == _waseeVRObj.hotcatedata[e].isview &&
              (1 == _waseeVRObj.hotcatedata[e].isfov
                ? _waseeVRObj.hotcatedata[e].ath &&
                  _waseeVRObj.hotcatedata[e].ath.length > 0 &&
                  _krpano.call(
                    "lookto(" +
                      _waseeVRObj.hotcatedata[e].ath +
                      "," +
                      _waseeVRObj.hotcatedata[e].atv +
                      "," +
                      _waseeVRObj.hotcatedata[e].fov +
                      ",linear(120),true,false)"
                  )
                : _waseeVRObj.hotcatedata[e].ath &&
                  _waseeVRObj.hotcatedata[e].ath.length > 0 &&
                  _krpano.call(
                    "moveto(" +
                      _waseeVRObj.hotcatedata[e].ath +
                      "," +
                      _waseeVRObj.hotcatedata[e].atv +
                      ",linear(120))"
                  ));
          }
          return !1;
        })
        .on("mouseover", ".videocontrol .right .sourcelist", function () {
          $.support.touch || $(this).find(".list").addClass("on");
        })
        .on(t, ".videocontrol .right .sourcelist", function () {
          $.support.touch && $(this).find(".list").toggleClass("on");
        })
        .on("mouseleave", ".videocontrol .right .sourcelist", function () {
          $.support.touch || $(this).find(".list").removeClass("on");
        })
        .on(a, ".videocontrol .right .sourcelist .list span", function () {
          return (
            $(".videocontrol .right .sourcelist .list").removeClass("on"),
            $(this).hasClass("on") ||
              ($(this).addClass("on").siblings().removeClass("on"),
              $(".videocontrol .right .sourename").html($(this).html()),
              _waseeVRObj.panovideoObj.videointerface_play(
                $(this).attr("data-type")
              )),
            !1
          );
        })
        .on(o, "#waseeVrPano", function () {
          paramObj._isForAPP
            ? _waseeVRObj.sceneId > 0 &&
              "object" ==
                typeof _panoGroupObj.panoOFFgroup[_waseeVRObj.sceneId] &&
              2 == _panoGroupObj.panoOFFgroup[_waseeVRObj.sceneId].media_type &&
              _waseeVRObj__isApp.API_Wasee_Front_CallBack(16, {})
            : _waseeVRObj.sceneId > 0 &&
              "object" ==
                typeof _panoGroupObj.panoOFFgroup[_waseeVRObj.sceneId] &&
              2 == _panoGroupObj.panoOFFgroup[_waseeVRObj.sceneId].media_type &&
              _waseeVRObj.panovideoObj.showhidevideocontro(1);
        })
        .on(s, ".goyoulan", function () {
          document.getElementById("audio_bgvoice") &&
            document.getElementById("audio_bgvoice").play(),
            setTimeout(function () {
              document.getElementById("audio_bgvoice") &&
                document.getElementById("audio_bgvoice").paused &&
                (document.getElementById("audio_bgvoice").play(),
                setTimeout(function () {
                  document.getElementById("audio_bgvoice") &&
                    document.getElementById("audio_bgvoice").paused &&
                    document.getElementById("audio_bgvoice").play();
                }, 1e3));
            }, 1e3);
        }),
      $(".navrighttop,.navrightbottom,#subinformain")
        .on(a, ".fullscreen", function () {
          _waseeVRObj.isfullScreen
            ? ($.exitScreen(), (_waseeVRObj.isfullScreen = !1))
            : ($.fullScreen(), (_waseeVRObj.isfullScreen = !0));
        })
        .on("click", ".vrr", function () {
          return _waseeVRObj__isApp.setVR(1), !1;
        })
        .on(a, ".autorotate", function () {
          $(this).toggleClass("close click"),
            !$(this).hasClass("close") &&
              krp.get("plugin[gyro].enabled") &&
              ($("body").append(
                '<div class="mask_transparent"></div><div class="mask_toast"><p class="mask_toast_content">请关闭陀螺仪后体验</p></div>'
              ),
              setTimeout(function () {
                $(".mask_transparent,.mask_toast").remove();
              }, 1500));
          let e = "",
            a = "";
          1 == __WASEE_DATA__.product.switch.overallNav.enableLookto &&
            ((e =
              'stopdelayedcall(bomb);delete(bt);jscall("if(_waseeVRObj.is_preantostare){clearTimeout(_waseeVRObj.is_preantostare);delete _waseeVRObj.is_preantostare;};")'),
            (a = "bombtimer(0)")),
            krp.call(
              "if(autorotate.enabled,autorotate.stop();" +
                e +
                ",jscall(\"$('.navrighttop .autorotate').removeClass('close');\");autorotate.start();" +
                a +
                ");"
            );
        })
        .on(a, ".gyro", function () {
          $(this).toggleClass("close"),
            krp.call("switch(plugin[gyro].enabled)");
        })
        .on(a, ".music", function () {
          if (0 != _waseeVRObj.sceneId && 0 != _waseeVRObj.sceneMapId) {
            if ($(this).hasClass("close")) {
              _soundObj.isbgmClose = !1;
              let e = _panoGroupObj.panoOFFgroup[_waseeVRObj.sceneId].music;
              e.musicvolume >= 0 && (e.volume = e.musicvolume),
                _soundObj.playsound(
                  "bgmusic",
                  _panoGroupObj.panoOFFgroup[_waseeVRObj.sceneId].music
                    .bgmscurl,
                  _panoGroupObj.panoOFFgroup[_waseeVRObj.sceneId].music
                    .musicLoop,
                  e
                );
            } else (_soundObj.isbgmClose = !0), _soundObj.stopsound("bgmusic");
            return !1;
          }
        })
        .on(a, ".voice", function () {
          if ($(this).hasClass("close"))
            if (
              ((_soundObj.isbgvClose = !1),
              _waseeVRObj.is_scenic > 0 &&
                (0 == _waseeVRObj.sceneId || _waseeVRObj.sceneMapId > 0) &&
                "object" == typeof _scenicObj)
            )
              _scenicObj.setoveralVoice();
            else {
              let e = _panoGroupObj.panoOFFgroup[_waseeVRObj.sceneId].voice;
              ("0" != e.closeVoice &&
                "" != e.closeVoice &&
                "false" != e.closeVoice) ||
              "" == e.voiceurl
                ? _waseeVRObj.is_scenic > 0 && _scenicObj.setoveralVoice()
                : (e.voicevolume >= 0 && (e.volume = e.voicevolume),
                  _soundObj.playsound(
                    "bgvoice",
                    _panoGroupObj.panoOFFgroup[_waseeVRObj.sceneId].voice
                      .voiceurl,
                    1 ==
                      _panoGroupObj.panoOFFgroup[_waseeVRObj.sceneId].voice
                        .voiceLoop,
                    e
                  ));
            }
          else (_soundObj.isbgvClose = !0), _soundObj.stopsound("bgvoice");
        })
        .on("click", ".winecellar_p", function () {
          $(this).toggleClass("click"),
            $(this).hasClass("click")
              ? ($(this).find(".title").html(_langObj.shouqi),
                $(".radarimgbody .radarimg .hot.on").length > 0 &&
                $(".radarimgbody .radarimg .hot.on").attr("sceneid") ==
                  _waseeVRObj.sceneId
                  ? ($(".radarimgbody").addClass("on"),
                    _waseeVRObj.radarObj.sethotonratate(),
                    _waseeVRObj.radarObj.sethotonangle())
                  : _waseeVRObj.radarObj.change_radar_img(
                      _waseeVRObj.radarObj.sceneradar
                    ),
                _waseeVRObj.panoSkinreqruet({ type: "radar" }))
              : ($(this).find(".title").html(_langObj.shapan),
                $(".radarimgbody").removeClass("on"));
        })
        .on(a, ".langue", function () {
          (_languageObj.lang = "CN" == _languageObj.lang ? "EN" : "CN"),
            (_langObj = _languageObj[_languageObj.lang]),
            0 == __WASEE_DATA__.product.panoinfo.menustyle ||
            3 == __WASEE_DATA__.product.panoinfo.skinItem
              ? $(this).html(_languageObj.lang)
              : $(this)
                  .find("img")
                  .attr(
                    "src",
                    paramObj.resourceWasee +
                      "/home/vrpano/img/menusicon/menus_" +
                      __WASEE_DATA__.product.panoinfo.menustyle +
                      "_48_" +
                      _languageObj.lang +
                      ".png"
                  );
          3 == __WASEE_DATA__.product.panoinfo.skinItem &&
            ($(".moresystem .title span").html(_langObj.more2),
            $(".hyroul-body .cbottom.citymap").attr("tips", _langObj.more2),
            $(".hyroul-body .cbottom.mycenter").attr(
              "tips",
              _langObj.zuopingjianj
            )),
            $("#pano_body").removeClass("CN EN").addClass(_languageObj.lang),
            $(".navrighttop .openmap").attr("data-tips", _langObj.kaichangdit),
            $(".navrighttop .openmap-switch").attr(
              "title",
              _langObj.kaichangdit
            ),
            $(".navrighttop .mMenu,.moresystem .mMenu").attr(
              "data-tips",
              _langObj.caidan
            ),
            $(".navrighttop .fullscreen,.moresystem .fullscreen").attr(
              "data-tips",
              _langObj.quanqingqieh
            ),
            $(".navrighttop .autorotate,.moresystem .autorotate").attr(
              "data-tips",
              _langObj.zidongxuny
            ),
            $(".navrighttop .vrr,.moresystem .vrr").attr(
              "data-tips",
              _langObj.vr
            ),
            $(".navrighttop .music,.moresystem .music").attr(
              "data-tips",
              _langObj.beijingmusic
            ),
            $(".navrighttop .voice,.moresystem .voice").attr(
              "data-tips",
              _langObj.beijingvoice
            ),
            $(".navrighttop .fullflag,.moresystem .fullflag").attr(
              "data-tips",
              _langObj.hideflag
            ),
            $(".navrighttop .winecellar_p,.moresystem .winecellar_p").attr(
              "data-tips",
              _langObj.shapan
            ),
            $(".radarimgbody .scalebsg .title").attr("tips", _langObj.fangda),
            $(".radarimgbody .shouqi .title").attr("tips", _langObj.close),
            $(".navrighttop .langue,.moresystem .langue").attr(
              "data-tips",
              _langObj.qiehuanyuyan
            ),
            $(".navrighttop .winecellar_p").length > 0 &&
              $(
                ".navrighttop .winecellar_p .title,.moresystem .winecellar_p .title"
              ).html(
                $(".navrighttop .winecellar_p").hasClass("click")
                  ? _langObj.shouqi
                  : _langObj.shapan
              ),
            $(".radarimgbody .scalebsg .title").length > 0 &&
              $(".radarimgbody .scalebsg .title").attr("tips", _langObj.fangda);
          let e = __WASEE_DATA__.product.switch.overallNav;
          if ($(".fwligna").length > 0 && $(".fwligna").html().length > 2) {
            let s = "";
            if (
              ((1 != e.showAname && 0 != __INFO__.product_status) ||
                1 == this.is_ememap ||
                ((s += _langObj.zuozhe + "：" + __INFO__.anchor.nickname),
                paramObj._isWaseehost &&
                  (s =
                    '<a class="anchorr" ' +
                    (this.is_ememap >= 1 ||
                    (12 == __INFO__.anchor.from &&
                      __INFO__.anchor.anchor_id != paramObj.official_id)
                      ? ""
                      : ' href="' +
                        (0 == __INFO__.product_status
                          ? "https://www.wasee.com"
                          : "/Wasee/VRHome/anchor?anchor_id=" +
                            __INFO__.anchor.id) +
                        '" target="_blank"') +
                    ">" +
                    s +
                    "</a>")),
              1 == e.showvisit)
            )
              if ("CN" == _languageObj.lang)
                s +=
                  _langObj.fangwenl +
                  "：" +
                  $.transWan(__INFO__.product.visit_count, "万");
              else {
                var a = Number(__INFO__.product.visit_count);
                if (a > 1e4) {
                  var t = a / 1e3;
                  t = t.toFixed(1);
                  var o = t.split(".");
                  a = 0 == o[1] ? o[0] + "K" : t + "K";
                }
                s += _langObj.fangwenl + "：" + a;
              }
            $(".fwligna").html(s);
          }
          if (
            (0 != __WASEE_DATA__.product.switch.overallNav.hotcls &&
              $(".navlefttop .HOTCSTESGORY").length > 0 &&
              $('.navlefttop .HOTCSTESGORY span[value="all"]').html(
                _langObj.all
              ),
            1 == e.showpraise &&
              (__INFO__.product.praise_count > 0 ||
                (_waseeVRObj.isDesktop
                  ? $(".pano_bottom_item .item_bottom em.praise .title").html(
                      _langObj.dianzan
                    )
                  : $(".navrightbottom .praise_p .title").html(
                      _langObj.dianzan
                    ))),
            1 == e.showmessage &&
              self == top &&
              (_waseeVRObj.isDesktop
                ? $(".pano_bottom_item .item_bottom em.command .title").html(
                    _langObj.shuoyishuo
                  )
                : $(".navrightbottom .command .title").html(
                    _langObj.shuoyishuo
                  )),
            1 == e.showmsg &&
              self == top &&
              (_waseeVRObj.isDesktop
                ? $(".pano_bottom_item .item_bottom em.msgs .title").html(
                    _langObj.liuyan
                  )
                : $(".navrightbottom .msgs .title").html(_langObj.liuyan)),
            1 == e.showshare)
          )
            if (_waseeVRObj.isDesktop)
              $(".pano_bottom_item .item_bottom em.share .title").html(
                _langObj.fengxiang
              ),
                $("#subinformain .sharediv").length > 0 &&
                  ($(".sharediv .title font").html(_langObj.fengxiang),
                  $(".sharediv .tab .item[tabindex=1] font").html(
                    _langObj.fengxing2
                  ),
                  $(".sharediv .tab .item[tabindex=2] font").html(
                    _langObj.fengxing3
                  ),
                  $(".sharediv .dmline.weburl .titlee").html(
                    _langObj.zuopingweb
                  ),
                  $(".sharediv .dmline.encode .titlee").html(
                    _langObj.qianrudaima
                  ),
                  $(".sharediv .copysharebtn a").html(_langObj.copy),
                  $(".sharediv .errortips font").html(_langObj.sharerrortips),
                  $(".sharediv .errortips a").html(_langObj.jiaochen + ">"));
            else if (
              ($(".navrightbottom .share .title").html(_langObj.fengxiang),
              $("#subinformain .sharediv").length > 0)
            ) {
              $(".sharediv.m2 .tab .item[tabindex=1] font").html(
                _langObj.dangqianchangj
              ),
                $(".sharediv.m2 .tab .item[tabindex=2] font").html(
                  _langObj.quanjinxiangm
                ),
                $(".sharediv.m2 .shareBtn").html(_langObj.fengxing4);
              let e = "";
              (e = paramObj._isForAPP
                ? "点击APP右上角"
                : $.isWeiXinClient()
                ? "点击微信右上角"
                : "用微信打开"),
                $(".sharediv.m2 .tips").html(
                  "CN" == _languageObj.lang
                    ? "长按保存二维码或 <br><span>" + e + "</span>分享给好友"
                    : _langObj.fengxing5
                );
            }
          if (
            1 == __WASEE_DATA__.product.switch.definimenu.showpanoinfo &&
            0 == __WASEE_DATA__.product.panoinfo.skinItem
          ) {
            let e = $(".pano_bottom_item .item_bottom em.panotips .title").attr(
              "ytitle"
            );
            $(".pano_bottom_item .item_bottom em.panotips .title").html(
              "CN" == _languageObj.lang ? e : _langObj.zuopingjianj
            );
          }
          if ($(".pano_group_list_btn").length > 0) {
            let e = $(".pano_group_list_btn .title").attr("ytitle");
            $(".pano_group_list_btn .title").html(
              "CN" == _languageObj.lang ? e : _langObj.changjinlist
            );
          }
          $(".speguidetail .guideBtn").length > 0 &&
            ($(".speguidetail .guideBtn span").html(_langObj.daolan),
            $(".guidecatelist").length > 0 &&
              ($(".guidecatelist .top .title").html(_langObj.daolanlux),
              $(".guidecatelist .lists .item .tguideBtn .start").html(
                _langObj.kaishiyoul
              ),
              $(".guidecatelist .lists .item").each(function () {
                let e = parseInt($(this).find(".left span.time").attr("time")),
                  a = e + " " + _langObj.miao;
                e > 60 &&
                  "CN" == _languageObj.lang &&
                  (a = Math.floor(e / 60) + "分" + (e % 60) + "秒"),
                  $(this)
                    .find(".left span.time")
                    .html(_langObj.dayue + " " + a);
              }))),
            $(".speguidetail .speciBtn").length > 0 &&
              $(".speguidetail .speciBtn span").html(_langObj.xijie),
            $(".setspecir").length > 0 &&
              ($(".setspecir .dl_start").attr({
                tips: _langObj.xunyou,
                tipss: _langObj.pause,
              }),
              $(".setspecir .dl_stop").attr("tips", _langObj.close)),
            $(".ser_scene .ser-inp .inp-d .inp").length > 0 &&
              $(".ser_scene .ser-inp .inp-d .inp").attr(
                "placeholder",
                _langObj.searchtip
              ),
            $(".ser_scene .ser-inp .ser-close").length > 0 &&
              $(".ser_scene .ser-inp .ser-close").html(_langObj.close),
            $(".trpm-alert.mMenu-alert .trpm-mc .trpm-tl .h .txt").length > 0 &&
              $(".trpm-alert.mMenu-alert .trpm-mc .trpm-tl .h .txt").html(
                _langObj.caidan
              ),
            _krpano.call(
              "set(contextmenu.item[qp].caption," +
                _langObj.quanqingqieh +
                ");set(contextmenu.item[cc].caption," +
                _langObj.tuozhuaitype +
                ");set(contextmenu.item[nv].caption," +
                _langObj.shijiao +
                ");set(contextmenu.item[fv].caption," +
                _langObj.yuyan +
                ");set(contextmenu.item[lp].caption," +
                _langObj.xiaoxinxin +
                ");set(contextmenu.item[ba].caption," +
                _langObj.shuijinqiu +
                ");"
            ),
            _krpano.set(
              "layer[compass_plate].url",
              paramObj.resourceWasee +
                "/home/vrpano/img/compass_plate" +
                ("CN" == _languageObj.lang ? "" : "_" + _languageObj.lang) +
                ".png"
            ),
            __WASEE_DATA__.product.panoinfo.skinItem > 0 &&
              $(".clangugee").each(function () {
                if (
                  $(this).attr("data-lname") &&
                  _langObj[$(this).attr("data-lname")]
                ) {
                  if (
                    0 == $(this)[0].childElementCount ||
                    $(this)[0].innerText == $(this)[0].innerHTML
                  )
                    if ("fangwenl" == $(this).attr("data-lname"))
                      if ("CN" == _languageObj.lang)
                        $(this).html(
                          _langObj.fangwenl +
                            "：" +
                            $.transWan(__INFO__.product.visit_count, "万")
                        );
                      else {
                        var e = Number(__INFO__.product.visit_count);
                        if (e > 1e4) {
                          var a = e / 1e3;
                          a = a.toFixed(1);
                          var t = a.split(".");
                          e = 0 == t[1] ? t[0] + "K" : a + "K";
                        }
                        $(this).html(_langObj.fangwenl + "：" + e);
                      }
                    else
                      ("changjinlist" != $(this).attr("data-lname") &&
                        "zuopingjianj" != $(this).attr("data-lname")) ||
                      "CN" != _languageObj.lang
                        ? "dianzan" == $(this).attr("data-lname")
                          ? !(__INFO__.product.praise_count > 0) &&
                            $(this).html(_langObj.dianzan)
                          : $(this).html(_langObj[$(this).attr("data-lname")])
                        : $(this).html($(this).attr("ytitle"));
                  $(this).attr("data-tips") &&
                    (("changjinlist" != $(this).attr("data-lname") &&
                      "zuopingjianj" != $(this).attr("data-lname")) ||
                    "CN" != _languageObj.lang
                      ? $(this).attr(
                          "data-tips",
                          _langObj[$(this).attr("data-lname")]
                        )
                      : $(this).attr("data-tips", $(this).attr("ytitle")));
                }
              }),
            _waseeVRObj.go_langObj_callBack();
        }),
      $(".navrightbottom,#subinformain")
        .on(a, ".praise", function () {
          let e = $(this);
          e.hasClass("on") ||
            e.attr("issubmit") ||
            (e.attr("issubmit", "1"),
            $.getAjaxData({
              url:
                location.protocol +
                "//" +
                location.host +
                "/Wasee/VRHome/doPraise",
              data: { obj_type: 121, obj_id: paramObj.krpano.krpano_id, op: 1 },
              callBack: function (a) {
                setTimeout(function () {
                  e.removeAttr("issubmit");
                }, 2e3),
                  (__INFO__.product.praise_count =
                    Number(__INFO__.product.praise_count) + 1),
                  e.addClass("on"),
                  $(".navrightbottom .praise_p span").html(
                    $.transWan(__INFO__.product.praise_count, "万")
                  );
              },
              errorBack: function (a) {
                setTimeout(function () {
                  e.removeAttr("issubmit");
                }, 2e3);
              },
            }));
        })
        .on(a, ".command", function () {
          _waseeVRObj__isApp.addComment();
        })
        .on(a, ".share", function () {
          _waseeVRObj.trSharecontaint();
        }),
      $(".pano_bottom_item .item_bottom .menu_right,#subinformain")
        .on(a, ".praise", function () {
          let e = $(this);
          e.hasClass("on") ||
            e.attr("issubmit") ||
            (e.attr("issubmit", "1"),
            $.getAjaxData({
              url:
                location.protocol +
                "//" +
                location.host +
                "/Wasee/VRHome/doPraise",
              data: { obj_type: 121, obj_id: paramObj.krpano.krpano_id, op: 1 },
              callBack: function (a) {
                setTimeout(function () {
                  e.removeAttr("issubmit");
                }, 2e3),
                  (__INFO__.product.praise_count =
                    Number(__INFO__.product.praise_count) + 1),
                  e.addClass("on"),
                  e
                    .find(".title")
                    .html($.transWan(__INFO__.product.praise_count, "万"));
              },
              errorBack: function (a) {
                setTimeout(function () {
                  e.removeAttr("issubmit");
                }, 2e3);
              },
            }));
        })
        .on(a, ".command", function () {
          _waseeVRObj__isApp.addComment();
        })
        .on(a, ".share", function () {
          _waseeVRObj.trSharecontaint();
        }),
      $("#subinformain")
        .on(
          "focus",
          ".presentation.jinqucontent #searchInput_panotip",
          function () {
            $(
              ".presentation.jinqucontent .pnaoimg,.presentation.jinqucontent .pbody"
            ).addClass("none"),
              $(".presentation.jinqucontent .panolistsearch").removeClass(
                "none"
              ),
              _waseeVRObj.getSceneListData[1] ||
                $.ajax({
                  type: "GET",
                  url:
                    location.protocol +
                    "//" +
                    location.host +
                    "/p/" +
                    paramObj._pool_ +
                    "/Wasee/Scenichome/getSceneList",
                  data: { pano_id: paramObj.krpano.krpano_id },
                  success: function (e) {
                    if (1 == e.status) {
                      e = e.data;
                      var a = [];
                      for (var t in e) {
                        var o = e[t];
                        a.push(o);
                      }
                      _waseeVRObj.getSceneListData[1] = a;
                    }
                  },
                });
          }
        )
        .on(a, ".moveimgbody.bg_full", function () {
          if (!moveimg.isMoveing)
            return (
              $(".moveimgbody").remove(),
              _waseeVRObj.setAutorotateObj.goautogyro(),
              _waseeVRObj.setAutorotateObj.govideoautoplay(),
              $("#toast").length > 0 && $("#toast").remove(),
              _waseeVRObj__isApp.API_Wasee_Front_CallBack(1, {}),
              delete window.moveimg,
              !1
            );
          delete moveimg.isMoveing;
        })
        .on(a, ".moveimgbody.bg_full .moveimg", function () {
          return (
            "musicimgbody" != moveimg.from &&
              moveimg.isMoveing &&
              delete moveimg.isMoveing,
            !1
          );
        })
        .on("mousewheel", ".moveimgbody", function () {
          if ("object" == typeof moveimg) {
            "musicimgbody" == moveimg.from &&
              (_soundObj.imgbodyData.mySwiper_imgbodyimg.params.noSwipingClass =
                "imglist"),
              (moveimg.init = !0),
              (moveimg.is_bigORsmall = !0);
            var e = 0;
            if (
              (event || (event = window.event),
              event.wheelDelta
                ? ((e = event.wheelDelta / 120), window.opera && (e = -e))
                : event.detail && (e = -event.detail / 3),
              e)
            ) {
              let a = Math.floor(1.1 * moveimg.scalev);
              e < 0 && (a = Math.floor(moveimg.scalev / 1.1));
              let t = moveimg.width,
                o = (a * t) / 100;
              if (o > t);
              else if (o < 10) return;
              (window.moveimg.scale = (a / 100).toFixed(2)),
                (moveimg.scalev = a),
                $(this)
                  .find(".moveimg")
                  .css(
                    "transform",
                    "translate3d(" +
                      moveimg.slateX +
                      "px," +
                      moveimg.slateY +
                      "px,0px) scale(" +
                      moveimg.scale +
                      ")"
                  );
            }
          }
        })
        .on(t, ".moveimgbody", function (e) {
          window.moveimg || (window.moveimg = { scalev: 1 }),
            (moveimg.isMousedown = !0),
            (moveimg.init = !0);
          let a = e;
          if (
            ($.support.touch && (a = e.touches[0]),
            (moveimg.xx = a.pageX),
            (moveimg.yy = a.pageY),
            (store = { scale: moveimg.scale }),
            $.support.touch)
          ) {
            "musicimgbody" == moveimg.from &&
              _soundObj.imgbodyData.mySwiper_imgbodyitem &&
              (_soundObj.imgbodyData.mySwiper_imgbodyitem.params.noSwipingClass =
                "list");
            let a = e;
            var t = a.touches,
              o = t[0],
              s = t[1];
            s &&
              (a.preventDefault(),
              (store.pageX = o.pageX),
              (store.pageY = o.pageY),
              (store.moveable = !0),
              (store.pageX2 = s.pageX),
              (store.pageY2 = s.pageY)),
              (store.originScale = store.scale || 1);
          }
        })
        .on(o, ".moveimgbody", function (e) {
          let a = e;
          if (window.moveimg && window.moveimg.init && moveimg.isMousedown) {
            if (
              ((moveimg.isMoveing = !0),
              ("musicimgbody" != moveimg.from || moveimg.is_bigORsmall) &&
                (_waseeVRObj.isDesktop
                  ? (e.pageX < moveimg.xx
                      ? (moveimg.slateX =
                          moveimg.slateX - Math.abs(e.pageX - moveimg.xx))
                      : (moveimg.slateX =
                          moveimg.slateX + Math.abs(e.pageX - moveimg.xx)),
                    e.pageY < moveimg.yy
                      ? (moveimg.slateY =
                          moveimg.slateY - Math.abs(e.pageY - moveimg.yy))
                      : (moveimg.slateY =
                          moveimg.slateY + Math.abs(e.pageY - moveimg.yy)),
                    $(this)
                      .find(".moveimg")
                      .css(
                        "transform",
                        "translate3d(" +
                          moveimg.slateX +
                          "px," +
                          moveimg.slateY +
                          "px,0px) scale(" +
                          moveimg.scale +
                          ")"
                      ),
                    (moveimg.xx = e.pageX),
                    (moveimg.yy = e.pageY))
                  : ("musicimgbody" == moveimg.from &&
                      _soundObj.imgbodyData.mySwiper_imgbodyitem &&
                      (_soundObj.imgbodyData.mySwiper_imgbodyitem.params.noSwipingClass =
                        "list"),
                    $.support.touch && (e = e.touches[0]),
                    e.pageX < moveimg.xx
                      ? (moveimg.slateX =
                          moveimg.slateX - Math.abs(e.pageX - moveimg.xx))
                      : (moveimg.slateX =
                          moveimg.slateX + Math.abs(e.pageX - moveimg.xx)),
                    e.pageY < moveimg.yy
                      ? (moveimg.slateY =
                          moveimg.slateY - Math.abs(e.pageY - moveimg.yy))
                      : (moveimg.slateY =
                          moveimg.slateY + Math.abs(e.pageY - moveimg.yy)),
                    _waseeVRObj.isIOS
                      ? $(this)
                          .find(".moveimg")
                          .css(
                            "transform",
                            "translate3d(" +
                              moveimg.slateX +
                              "px," +
                              moveimg.slateY +
                              "px,0px)"
                          )
                      : $(this)
                          .find(".moveimg")
                          .css(
                            "transform",
                            "translate3d(" +
                              moveimg.slateX +
                              "px," +
                              moveimg.slateY +
                              "px,0px) scale(" +
                              moveimg.scale +
                              ")"
                          ),
                    (moveimg.xx = e.pageX),
                    (moveimg.yy = e.pageY))),
              $.support.touch)
            ) {
              let e = a;
              if (!store.moveable) return;
              e.preventDefault();
              var t = e.touches,
                o = t[0],
                s = t[1];
              if (s) {
                (moveimg.is_bigORsmall = !0),
                  "musicimgbody" == moveimg.from &&
                    (_soundObj.imgbodyData.mySwiper_imgbodyitem &&
                      (_soundObj.imgbodyData.mySwiper_imgbodyitem.params.noSwipingClass =
                        "list"),
                    _soundObj.imgbodyData.mySwiper_imgbodyimg &&
                      (_soundObj.imgbodyData.mySwiper_imgbodyimg.params.noSwipingClass =
                        "imglist")),
                  store.pageX2 || (store.pageX2 = s.pageX),
                  store.pageY2 || (store.pageY2 = s.pageY);
                var i = function (e, a) {
                    return Math.hypot(a.x - e.x, a.y - e.y);
                  },
                  n =
                    i({ x: o.pageX, y: o.pageY }, { x: s.pageX, y: s.pageY }) /
                    i(
                      { x: store.pageX, y: store.pageY },
                      { x: store.pageX2, y: store.pageY2 }
                    ),
                  r = store.originScale * n;
                (store.scale = r),
                  (moveimg.scale = store.scale),
                  _waseeVRObj.isIOS
                    ? $(this)
                        .find(".moveimg")
                        .css({
                          transform:
                            "translate3d(" +
                            moveimg.slateX +
                            "px," +
                            moveimg.slateY +
                            "px,0px)",
                          width: 100 * moveimg.scale + "%",
                          height: "auto",
                        })
                    : $(this)
                        .find(".moveimg")
                        .css(
                          "transform",
                          "translate3d(" +
                            moveimg.slateX +
                            "px," +
                            moveimg.slateY +
                            "px,0px) scale(" +
                            moveimg.scale +
                            ")"
                        );
              }
            }
            return !1;
          }
        })
        .on(s, ".moveimgbody", function (e) {
          delete moveimg.isMousedown,
            delete moveimg.isMoveing,
            "undefined" != typeof store &&
              (store.moveable,
              (store.moveable = !1),
              delete store.pageX2,
              delete store.pageY2);
        })
        .on(a, ".sharediv .tab .item", function () {
          let e = $(this).attr("tabindex");
          $(this).addClass("on").siblings().removeClass("on");
          let a = location.protocol + "//" + location.host + location.pathname;
          1 == e
            ? paramObj._id && paramObj._id > 0
              ? (a += "?id=" + paramObj._id + "&def_sid=" + _waseeVRObj.sceneId)
              : (a += "?def_sid=" + _waseeVRObj.sceneId)
            : paramObj._id && paramObj._id > 0 && (a += "?id=" + paramObj._id),
            0 == $(".sharediv .qrcode .s" + e).length
              ? 2 == e
                ? $(".sharediv .qrcode").append(
                    '<img class="s' +
                      e +
                      '" src="' +
                      __WASEE_DATA__.product.panoinfo.qrcode_url +
                      '">'
                  )
                : $(".sharediv .qrcode").append(
                    '<img class="s' +
                      e +
                      '" src="' +
                      location.protocol +
                      "//" +
                      location.host +
                      "/Home/Service/genQRCode?business=VRHome&code=" +
                      __INFO__.qrCode +
                      "&url=" +
                      encodeURIComponent(a) +
                      '">'
                  )
              : 1 == e &&
                $(".sharediv .qrcode .s1").attr("sceneid") !=
                  _waseeVRObj.sceneId &&
                $(".sharediv .qrcode .s1").attr({
                  sceneid: _waseeVRObj.sceneId,
                  src:
                    location.protocol +
                    "//" +
                    location.host +
                    "/Home/Service/genQRCode?business=VRHome&code=" +
                    __INFO__.qrCode +
                    "&url=" +
                    encodeURIComponent(a),
                }),
            $(".sharediv .qrcode .s" + e)
              .removeClass("none")
              .siblings()
              .addClass("none"),
            $(".sharediv").hasClass("m2") ||
              ($(".sharediv #sceneHtml").val(
                '<iframe width="100%" height="440" frameborder="0" name="waseePanorama" scrolling="no" src="' +
                  a +
                  '"></iframe>'
              ),
              $(".sharediv #sceneHtml2").val(a));
        })
        .on(a, ".sharediv .shareBtn", function () {
          return (
            $("#subinformain").append(
              '<div class="mBoxbg on remove"><img src="' +
                paramObj.resourceWasee +
                "/home/vrpano/img/share_" +
                _languageObj.lang +
                '.png" style="width: 50%;max-width: 200px; float: right; margin-right: 12px;"></div><div class="windowBody on none"></div>'
            ),
            1 == $(".sharediv .tab .item.on").attr("tabindex")
              ? _waseeVRObj.setShareUrl(98)
              : _waseeVRObj.setShareUrl(99),
            !1
          );
        })
        .on(a, ".sharediv .closeshare", function () {
          $(".sharediv").prev().click();
        })
        .on(a, ".sharediv .copysharebtn", function () {
          var e = $(this).hasClass("copysharebtn2")
            ? document.getElementById("sceneHtml2")
            : document.getElementById("sceneHtml");
          e.select(),
            document.execCommand("Copy"),
            _waseeVRObj.toast("已复制好，可贴粘。");
        })
        .on(t, ".panotipsContent", function () {
          $(this).attr("data-focus", 1);
        })
        .on(s, ".panotipsContent", function () {
          $(this).attr("data-focus", 0);
        })
        .on(a, ".panotipsContent .close_panotipsContent", function () {
          $(".panotipsContent").removeClass("on");
        })
        .on(
          a,
          ".panotipsContent .top span,.panotipsContent .tabinfo span",
          function () {
            if ($(this).hasClass("ptipsbtn"))
              return (
                $(".panotipsContent .tbody")
                  .addClass("on")
                  .siblings()
                  .removeClass("on"),
                $(".panotipsContent .top .morepbtn")
                  .removeClass("none")
                  .siblings()
                  .addClass("none"),
                _waseeVRObj.isDesktop ||
                  $(this).addClass("on").siblings().removeClass("on"),
                !1
              );
            if ($(this).hasClass("morepbtn")) {
              function e() {
                if (0 == $(".panotipsContent .jectlist").length) {
                  let e = "";
                  for (let a = 0; a < _waseeVRObj.more_project.length; a++) {
                    const t = _waseeVRObj.more_project[a];
                    e +=
                      '<div class="swiper-slide"><a target="_blank" href="' +
                      t.click_url +
                      '"><img src="' +
                      t.thumburl +
                      '"><span class="titles">' +
                      t.name +
                      "</span></a></div>";
                  }
                  "" != e &&
                    ($(".panotipsContent .content").append(
                      '<div class="jectlist swiper-container tstion"><div class="swiper-wrapper">' +
                        e +
                        "</div></div>"
                    ),
                    setTimeout(
                      "$('.panotipsContent .jectlist').addClass('on').siblings().removeClass('on');$('.panotipsContent .top .morepbtn').addClass('none').siblings().removeClass('none');",
                      100
                    ),
                    (_waseeVRObj.mySwiper3 = new Swiper(
                      ".panotipsContent .swiper-container",
                      {
                        freeMode: !0,
                        freeModeMomentum: !0,
                        slidesPerView: "auto",
                        preventClicksPropagation: !1,
                        preventClicks: !1,
                      }
                    )));
                } else
                  $(".panotipsContent .jectlist")
                    .addClass("on")
                    .siblings()
                    .removeClass("on"),
                    $(".panotipsContent .top .morepbtn")
                      .addClass("none")
                      .siblings()
                      .removeClass("none");
              }
              return (
                !_waseeVRObj.more_project && paramObj._isWaseehost
                  ? $.ajax({
                      type: "GET",
                      url:
                        location.protocol +
                        "//" +
                        location.host +
                        "/p/" +
                        paramObj._pool_ +
                        "/Wasee/VRHome/getProjectInfo",
                      data: { id: paramObj.krpano.krpano_id },
                      success: function (a) {
                        1 == a.status &&
                          ((_waseeVRObj.more_project = a.data.more_project),
                          e());
                      },
                    })
                  : e(),
                _waseeVRObj.isDesktop ||
                  $(this).addClass("on").siblings().removeClass("on"),
                !1
              );
            }
          }
        )
        .on(t, ".imgbody", function (e) {
          window.moveimg && (moveimg.isMousedown = !0);
        })
        .on(s, ".imgbody", function (e) {
          window.moveimg && delete moveimg.isMousedown,
            $.support.touch
              ? setTimeout(function () {
                  _soundObj.imgbodyData.audio &&
                    _soundObj.imgbodyData.audio.isMousedown &&
                    (delete _soundObj.imgbodyData.audio.isMousedown,
                    _soundObj.imgbodyData.mySwiper_imgbodyitem &&
                      _soundObj.imgbodyData.mySwiper_imgbodyitem.params
                        .noSwipingClass &&
                      null == moveimg.is_bigORsmall &&
                      delete _soundObj.imgbodyData.mySwiper_imgbodyitem.params
                        .noSwipingClass);
                }, 200)
              : _soundObj.imgbodyData.audio &&
                _soundObj.imgbodyData.audio.isMousedown &&
                (delete _soundObj.imgbodyData.audio.isMousedown,
                _soundObj.imgbodyData.mySwiper_imgbodyitem &&
                  _soundObj.imgbodyData.mySwiper_imgbodyitem.params
                    .noSwipingClass &&
                  null == moveimg.is_bigORsmall &&
                  delete _soundObj.imgbodyData.mySwiper_imgbodyitem.params
                    .noSwipingClass);
        })
        .on(o, ".imgbody .bodylist", function (e) {
          window.moveimg && moveimg.isMousedown && (moveimg.isMoveing = !0);
        })
        .on("click", ".imgbody", function () {
          $(".imgbody").remove(),
            $("#toast").length > 0 && $("#toast").remove(),
            "object" == typeof moveimg && moveimg.isMoveing
              ? delete moveimg.isMoveing
              : (_waseeVRObj.setAutorotateObj.goautogyro(),
                _waseeVRObj.setAutorotateObj.govideoautoplay(),
                _waseeVRObj__isApp.API_Wasee_Front_CallBack(1, {}),
                delete window.moveimg,
                _soundObj.imgbodyData.stopsound());
        })
        .on(
          "click",
          ".imgbody .moveimg,.imgbody .tbody,.imgbody .musicbody,.imgbody .imgcontrol,.imgbody .previcon,.imgbody .nexticon,.swiper-pagination-img",
          function () {
            return (
              "object" == typeof moveimg &&
                moveimg.isMoveing &&
                delete moveimg.isMoveing,
              !1
            );
          }
        )
        .on(
          s,
          ".imgbody .moveimg,.imgbody .tbody,.imgbody .musicbody,.imgbody .imgcontrol,.imgbody .previcon,.imgbody .nexticon,.swiper-pagination-img",
          function () {
            $.support.touch &&
              "object" == typeof moveimg &&
              moveimg.isMoveing &&
              delete moveimg.isMoveing;
          }
        )
        .on(t, ".imgbody .bodycontainer .right .righttbody", function () {
          delete _soundObj
            .imgbodyData.mySwiper_imgbodyitem.params.noSwipingClass;
        })
        .on(a, ".imgbody .bodycontainer .musicbody .emmusic", function () {
          _soundObj.imgbodyData.switchsound();
        })
        .on(t, ".imgbody .bodycontainer .musicbody .zjdu_body", function (e) {
          (_soundObj.imgbodyData.audio.isMousedown = !0),
            _soundObj.imgbodyData.mySwiper_imgbodyitem &&
              (_soundObj.imgbodyData.mySwiper_imgbodyitem.params.noSwipingClass =
                "list");
          let a =
            ($.support.touch ? e.touches[0].pageX : e.clientX) -
            $(this).offset().left;
          a > $(this).width() && (a = $(this).width()),
            (_soundObj.imgbodyData.audio.currentTime =
              (a * _soundObj.imgbodyData.alltime) / $(this).width());
        })
        .on(o, ".imgbody .bodycontainer .musicbody .zjdu_body", function (e) {
          if (_soundObj.imgbodyData.audio.isMousedown || $.support.touch) {
            _soundObj.imgbodyData.mySwiper_imgbodyitem &&
              (_soundObj.imgbodyData.mySwiper_imgbodyitem.params.noSwipingClass =
                "list");
            let a =
              ($.support.touch ? e.touches[0].pageX : e.clientX) -
              $(this).offset().left;
            a > $(this).width() && (a = $(this).width()),
              (_soundObj.imgbodyData.audio.currentTime =
                (a * _soundObj.imgbodyData.alltime) / $(this).width());
          }
          return !1;
        })
        .on(
          a,
          ".imgbody .bodycontainer .imgcontrol .scaleimg .ibtn",
          function () {
            if ("object" != typeof moveimg) return;
            "musicimgbody" == moveimg.from &&
              (_soundObj.imgbodyData.mySwiper_imgbodyimg.params.noSwipingClass =
                "imglist"),
              (moveimg.init = !0),
              (moveimg.is_bigORsmall = !0);
            let e = moveimg.scalev;
            if (
              ($(this).hasClass("add")
                ? (e = Math.floor(1.1 * e))
                : $(this).hasClass("sub") && (e = Math.floor(e / 1.1)),
              e == moveimg.scalev)
            )
              return;
            let a = moveimg.width,
              t = (e * a) / 100;
            if (t > a);
            else if (t < 10) return;
            (window.moveimg.scale = (e / 100).toFixed(2)),
              (moveimg.scalev = e),
              $(".imgbody .bodycontainer .moveimg").css(
                "transform",
                "translate3d(" +
                  moveimg.slateX +
                  "px," +
                  moveimg.slateY +
                  "px,0px) scale(" +
                  moveimg.scale +
                  ")"
              );
          }
        )
        .on(a, ".imgbody .bodycontainer .imgcontrol .chongzhi", function () {
          _soundObj.imgbodyData.mySwiper_imgbodyitem &&
            delete _soundObj.imgbodyData.mySwiper_imgbodyitem.params
              .noSwipingClass,
            _soundObj.imgbodyData.mySwiper_imgbodyimg &&
              delete _soundObj.imgbodyData.mySwiper_imgbodyimg.params
                .noSwipingClass;
          let e = $(".imgbody .bodycontainer img.moveimg+div:eq(0)");
          _waseeVRObj.change_move_img({
            url: e.attr("data-url"),
            width: e.attr("data-width"),
            height: e.attr("data-height"),
            from: "musicimgbody",
          }),
            moveimg.isMoveing && delete moveimg.isMoveing,
            moveimg.is_bigORsmall && delete moveimg.is_bigORsmall;
        })
        .on(a, ".lock .gosee", function () {
          let e = $(".lock.windowBody input[name=password]").val();
          e.length > 0
            ? ($(".lock .tinput .tips").addClass("none"),
              paramObj._isexport
                ? __WASEE_DATA__.product.panoinfo.openin.openin_type2 &&
                  e == __WASEE_DATA__.product.panoinfo.openin.openin_type2
                  ? ($.setCookie(
                      "openinpassword" + __WASEE_DATA__.product.panoinfo.id,
                      1,
                      864e5
                    ),
                    _waseeVRObj.loginsucc())
                  : 4 == __WASEE_DATA__.product.panoinfo.skinItem
                  ? _waseeVRObj.toast(_languageObj.EN.mimacuowu)
                  : _waseeVRObj.toast(_langObj.mimacuowu)
                : $.getAjaxData({
                    url:
                      location.protocol +
                      "//" +
                      location.host +
                      "/Think720/Home/doVerifyPassword",
                    data: { password: e, id: paramObj.krpano.krpano_id },
                    callBack: function (e) {
                      _waseeVRObj.loginsucc();
                    },
                    errorBack: function (e) {
                      4 == __WASEE_DATA__.product.panoinfo.skinItem
                        ? _waseeVRObj.toast(
                            e.info + " " + _languageObj.EN.mimacuowu
                          )
                        : _waseeVRObj.toast(
                            "CN" == _languageObj.lang
                              ? e.info
                              : _langObj.mimacuowu
                          );
                    },
                  }))
            : $(".lock .tinput .tips").removeClass("none");
        })
        .on("keyup", ".lock.windowBody .tinput input", function (e) {
          let a = $(this).val();
          "13" == e.keyCode &&
            (a.length > 0
              ? ($(".lock .tinput .tips").addClass("none"),
                paramObj._isexport
                  ? __WASEE_DATA__.product.panoinfo.openin.openin_type2 &&
                    a == __WASEE_DATA__.product.panoinfo.openin.openin_type2
                    ? ($.setCookie(
                        "openinpassword" + __WASEE_DATA__.product.panoinfo.id,
                        1,
                        864e5
                      ),
                      _waseeVRObj.loginsucc())
                    : 4 == __WASEE_DATA__.product.panoinfo.skinItem
                    ? _waseeVRObj.toast(_languageObj.EN.mimacuowu)
                    : _waseeVRObj.toast(_langObj.mimacuowu)
                  : $.getAjaxData({
                      url:
                        location.protocol +
                        "//" +
                        location.host +
                        "/Think720/Home/doVerifyPassword",
                      data: { password: a, id: paramObj.krpano.krpano_id },
                      callBack: function (e) {
                        if (
                          ((__INFO__.password_status = 0),
                          _krpano.call("set(lkmult,0);toggleasethe();"),
                          $(".lock").removeClass("on"),
                          setTimeout("$('.lock,.lockbg').remove();", 300),
                          1 == _openobj.isopenin)
                        )
                          if (1 == _openobj.openin_dktype) {
                            $(".openinobj").removeClass("visib_h"),
                              1 == _openobj.cover_type &&
                                "" != __INFO__.format_pano_expire &&
                                _openobj._vVideo &&
                                _openobj._vVideo.play(),
                              0 != __WASEE_DATA__.product.panoinfo.scenic_map ||
                                (1 !=
                                  __WASEE_DATA__.product.switch.overallNav
                                    .openmap_inshow &&
                                  null !=
                                    __WASEE_DATA__.product.switch.overallNav
                                      .openmap_inshow) ||
                                "object" != typeof openmapModule ||
                                openmapModule.init();
                            let e = _openobj.openin_waitime;
                            setTimeout(function () {
                              $(".openinobj").remove(),
                                (_openobj.isopenin = 0),
                                1 != _krpano.get("oncomplete") ||
                                _krpano.get("is_action_endopenanimate")
                                  ? (window.endopenanimateInter = setInterval(
                                      function () {
                                        1 != _krpano.get("oncomplete") ||
                                        _krpano.get("is_action_endopenanimate")
                                          ? _krpano.get(
                                              "is_action_endopenanimate"
                                            ) &&
                                            (clearInterval(
                                              window.endopenanimateInter
                                            ),
                                            delete window.endopenanimateInter)
                                          : (clearInterval(
                                              window.endopenanimateInter
                                            ),
                                            delete window.endopenanimateInter,
                                            _krpano.call("endopenanimate()"));
                                      },
                                      1e3
                                    ))
                                  : _krpano.call("endopenanimate()");
                            }, 1e3 * Number(e)),
                              $(".openinobj").append(
                                '<span class="djs">' +
                                  e +
                                  " " +
                                  _langObj.tiaoguo +
                                  "</span>"
                              ),
                              (window._openobj.djs = setInterval(function () {
                                e--,
                                  e > 0
                                    ? $(".openinobj .djs").html(
                                        e + " " + _langObj.tiaoguo
                                      )
                                    : (clearInterval(window._openobj.djs),
                                      delete window._openobj.djs);
                              }, 1e3)),
                              4 == __WASEE_DATA__.product.panoinfo.skinItem &&
                                $(".openinobj .djs").length > 0 &&
                                $(".openinobj .djs").attr(
                                  "data-lname",
                                  "tiaoguo"
                                );
                          } else
                            2 == _openobj.openin_dktype ||
                            3 == _openobj.openin_dktype
                              ? ($(".openinobj").removeClass("visib_h"),
                                1 == _openobj.cover_type &&
                                  "" != __INFO__.format_pano_expire &&
                                  _openobj._vVideo &&
                                  _openobj._vVideo.play(),
                                0 !=
                                  __WASEE_DATA__.product.panoinfo.scenic_map ||
                                  (1 !=
                                    __WASEE_DATA__.product.switch.overallNav
                                      .openmap_inshow &&
                                    null !=
                                      __WASEE_DATA__.product.switch.overallNav
                                        .openmap_inshow) ||
                                  "object" != typeof openmapModule ||
                                  openmapModule.init())
                              : _krpano.get("in_startanima") ||
                                (_waseeVRObj.panoOver(_krpano.get("xml.scene")),
                                _waseeVRObj.panoOverFirst());
                        else
                          _krpano.get("in_startanima") ||
                            (_waseeVRObj.panoOver(_krpano.get("xml.scene")),
                            _waseeVRObj.panoOverFirst());
                      },
                      errorBack: function (e) {
                        4 == __WASEE_DATA__.product.panoinfo.skinItem
                          ? _waseeVRObj.toast(
                              e.info + " " + _languageObj.EN.mimacuowu
                            )
                          : _waseeVRObj.toast(
                              "CN" == _languageObj.lang
                                ? e.info
                                : _langObj.mimacuowu
                            );
                      },
                    }))
              : $(".lock .tinput .tips").removeClass("none"));
        })
        .on(a, ".lock .iconfont", function () {
          "password" == $(".lock.windowBody .tinput input").attr("type")
            ? ($(".lock.windowBody .tinput input").attr("type", "text"),
              $(this)
                .removeClass("icon_preview")
                .addClass("icon_guanbiyanjing_x"))
            : ($(".lock.windowBody .tinput input").attr("type", "password"),
              $(this)
                .removeClass("icon_guanbiyanjing_x")
                .addClass("icon_preview"));
        })
        .on(a, ".videocontrol .btnPlay,.panovideoplay", function () {
          _waseeVRObj.isIOS
            ? $(".videocontrol .btnPlay").hasClass("on")
              ? _waseeVRObj.panovideoObj.pause()
              : _waseeVRObj.panovideoObj.play()
            : _waseeVRObj.panovideoObj.togglepause();
        })
        .on(t, ".videocontrol .center .zjdu_body", function (e) {
          _waseeVRObj.panovideoObj.isMousedown = !0;
          let a =
            ($.support.touch ? e.touches[0].pageX : e.clientX) -
            $(this).offset().left;
          a > $(this).width() && (a = $(this).width()),
            _waseeVRObj.panovideoObj.seek(
              (a * _waseeVRObj.panovideoObj.totaltime) / $(this).width()
            );
        })
        .on(s, ".videocontrol .center .zjdu_body", function (e) {
          delete _waseeVRObj.panovideoObj.isMousedown;
        })
        .on(o, ".videocontrol .center .zjdu_body", function (e) {
          if (_waseeVRObj.panovideoObj.isMousedown || $.support.touch) {
            let a =
              ($.support.touch ? e.touches[0].pageX : e.clientX) -
              $(this).offset().left;
            a > $(this).width() && (a = $(this).width()),
              _waseeVRObj.panovideoObj.seek(
                (a * _waseeVRObj.panovideoObj.totaltime) / $(this).width()
              );
          }
          return !1;
        })
        .on(
          a,
          ".chargeBody .closecharge,.chargeBody .content_two .buybutton .cancle",
          function () {
            return $(".chargeBody").removeClass("on"), !1;
          }
        )
        .on(a, ".chargeBody .buy", function () {
          _waseeVRObj.chargeObj.getorderConfirm();
        });
  }),
  $("#pano_body").append(
    '<video id="audio_bgvoice2" autoplay class="xnVideo one" crossOrigin="anonymous" playsinline="true" webkit-playsinline="true" crossorigin="anonymous" x5-video-player-type="h5" x5-video-player-fullscreen="true" x5-video-orientation="portrait" width=0></video>'
  ),
  document.getElementById("audio_xianlu_guide") ||
    $("#pano_body").append(
      '<audio id="audio_xianlu_guide" src="' +
        paramObj.resourceWasee +
        '/js/wasee.mp3"></audio>'
    );
var _panoGroupObj = {
  panogroupHeight: 0,
  panogroupIdlist: {},
  panoOFFgroup: {},
  panoData: {},
  preScenename: "",
  isClickPanoGroup: !1,
  isClickPano_toscene: !0,
  panogroupData: [],
  panogroupData_Len: 0,
  panoData_Len: 0,
  one_grounpId: -1,
  is_show_count: 0,
  isSwiper: !1,
  setPanoGroupData: function () {
    var e =
        __INFO__.group_data && "object" == typeof __INFO__.group_data
          ? __INFO__.group_data
          : __WASEE_DATA__.product.groups,
      a = {};
    for (let t = 0; t < e.length; t++) {
      const o = e[t];
      (0 == o.pid || null == o.pid || (o.pid > 0 && o.scenes.length > 0)) &&
        ((a[o.id + "_g"] = o),
        o.scenes.length > 0 && (a[o.id + "_g"].isshow = 1));
    }
    for (var t in a)
      if (a.hasOwnProperty(t)) {
        const e = a[t];
        e.pid > 0 && a[e.pid + "_g"] && (a[e.pid + "_g"].isshow = 1);
      }
    for (var t in a)
      if (a.hasOwnProperty(t)) {
        const e = a[t];
        1 == e.isshow &&
          (this.panogroupData.push(e),
          (this.panogroupIdlist[e.id + "_g"] = e),
          (this.panogroupIdlist[e.id + "_g"].index = this.panogroupData_Len),
          this.panogroupData_Len++);
      }
    var o = this.panogroupData,
      s = {},
      i = [],
      n = [];
    if (0 != o.length) {
      for (var r in o) {
        var p = o[r].scenes;
        for (var l in p)
          _waseeVRObj.is_scenic > 0 && (p[l].music.closeMusic = 1),
            (_panoGroupObj.panoOFFgroup[p[l].id] = $.extend(
              { index: r, groupid: o[r].id },
              p[l]
            )),
            _waseeVRObj.is_ememap >= 1 &&
              2 == p[l].media_type &&
              (p[l].isshow = 0),
            0 == p[l].isshow
              ? _krpano.set("scene[scene" + p[l].id + "].isshow", 0)
              : this.panoData_Len++,
            0 == p[l].pid
              ? i.push(p[l].id)
              : (s[p[l].pid] || (s[p[l].pid] = []), s[p[l].pid].push(p[l].id)),
            1 == p[l].is_show && this.is_show_count++;
      }
      if (0 == __INFO__.password_status && 1 == _openobj.in_startanima) {
        let e = _waseeVRObj.getsceneMeta(paramObj.startscene.substr(5));
        e.pwd &&
          e.pwd.cate_valid.length > 1 &&
          (_waseeVRObj.chargescenepwd(e),
          _krpano.call(
            "loadmulasethemnia();set(lockscene,true);toggleasethe();"
          ));
      }
      if (
        (1 == __WASEE_DATA__.product.switch.overallNav.switch_hdmap &&
          1 == __WASEE_DATA__.product.panoinfo.scenic_map &&
          (_panoGroupObj.panoOFFgroup[0] = {}),
        JSON.stringify(s).length > 3)
      ) {
        for (let e = 0; e < i.length; e++) {
          const a = i[e];
          n.push(a), s[a] && s[a].length > 0 && n.push.apply(n, s[a]);
        }
        i = n;
      }
      (this._guidescenelist = i),
        _panoGroupObj.isSwiper ||
          (_waseeVRObj.addJavascript({
            src: paramObj.resourceWasee + "/home/vrpano/js/swiper.min.js",
            callBack: function () {
              _panoGroupObj.isSwiper = !0;
            },
          }),
          $("head").prepend(
            '<link rel="stylesheet" type="text/css" href="' +
              paramObj.resourceWasee +
              '/home/vrpano/css/swiper.min.css">'
          )),
        _waseeVRObj.addJavascript({
          src: paramObj.resourceWasee + "/home/vrpano/js/interact.js",
          callBack: function () {
            interact(".radarimg .hot.on img").draggable({
              onstart: function (e) {
                const a = e.target,
                  t = a.getBoundingClientRect();
                (a.dataset.centerX = t.left + t.width / 2),
                  (a.dataset.centerY = t.top + t.height / 2),
                  (a.dataset.angle = getDragAngle(e));
              },
              onmove: function (e) {
                var a = e.target,
                  t =
                    (parseFloat(a.dataset.centerX),
                    parseFloat(a.dataset.centerY),
                    getDragAngle(e));
                let o = (90 * t) / 1.570796326794897;
                a.style.transform = "rotate(" + o + "deg) scale(1)";
                let s = (90 * (t - radarhotview.angle)) / 1.570796326794897;
                _krpano.set("view.hlookat", radarhotview.hlookat + s);
              },
              onend: function (e) {
                const a = e.target;
                a.dataset.angle = getDragAngle(e);
              },
            });
          },
        });
    } else
      $("#subinformain").html(
        '<div class="windowBody wasee_dialog flex_center_y on" style=" background: #fff; color: #000; width: 80%; max-width: 500px; border-radius: 6px; height: 150px; line-height: 130px; font-size: 14px; "><div class="tbody">该作品内已无场景，无法浏览体验!</div></div>'
      );
  },
  setPanoGroupHtml: function (e, a) {
    function t(t) {
      function o() {
        _panoGroupObj.group_timeout &&
          (clearInterval(_panoGroupObj.group_timeout),
          delete _panoGroupObj.group_timeout);
        new Swiper(".panogrouplist .swiper-container", {
          freeMode: !0,
          freeModeMomentum: !0,
          slidesPerView: "auto",
          prevButton: ".swiper-button-prev",
          nextButton: ".swiper-button-next",
        });
      }
      function s() {
        _panoGroupObj.group_timeout2 &&
          (clearInterval(_panoGroupObj.group_timeout2),
          delete _panoGroupObj.group_timeout2);
        new Swiper(".childgrouplist .swiper-container", {
          freeMode: !0,
          freeModeMomentum: !0,
          slidesPerView: "auto",
          prevButton: ".swiper-button-prev.g_child",
          nextButton: ".swiper-button-next.g_child",
        });
      }
      function p() {
        _panoGroupObj.panolist_timeout &&
          (clearInterval(_panoGroupObj.panolist_timeout),
          delete _panoGroupObj.panolist_timeout),
          (_waseeVRObj.mySwiper2 = new Swiper(
            ".panolist .panotb>.swiper-container",
            {
              freeMode: !0,
              freeModeMomentum: !0,
              slidesPerView: "auto",
              preventLinksPropagation: !1,
              prevButton: ".swiper-button-prev.pl",
              nextButton: ".swiper-button-next.pl",
            }
          ));
      }
      function l() {
        _panoGroupObj.relatpanolist_timeout &&
          (clearInterval(_panoGroupObj.relatpanolist_timeout),
          delete _panoGroupObj.relatpanolist_timeout),
          (_waseeVRObj.mySwiper3 = new Swiper(
            ".relatedbody .swiper-container",
            {
              freeMode: !0,
              freeModeMomentum: !0,
              slidesPerView: "auto",
              nested: !0,
              prevButton: ".swiper-button-prev.repl",
              nextButton: ".swiper-button-next.repl",
            }
          ));
      }
      let d = t.panogroupData,
        _ = "",
        c = "";
      if (null != e && e >= 0) {
        let o = d[e].pid,
          i = "",
          n = 0,
          r = -1;
        if ((0 == o || null == o) && t.panogroupData_Len > 1) {
          $(".childgrouplist").removeClass("on2");
          let o = !1;
          for (let s = 0; s < d.length; s++) {
            const p = d[s];
            let l = "";
            a &&
              "oneload" == a.type &&
              a.groupid == p.id &&
              ((o = !0), (l = " on")),
              p.pid == d[e].id &&
                (n++,
                -1 == r && (r = t.panogroupIdlist[p.id + "_g"].index),
                (i +=
                  '<span class="swiper-slide' +
                  l +
                  '" data-gid="' +
                  s +
                  '" data-groupid="' +
                  p.id +
                  '" title="' +
                  p.title +
                  '"><i class="ctab"><a>' +
                  p.title +
                  "</a></i></span>"));
          }
          if ("" != i)
            return (
              $(".childgrouplist .swiper-wrapper").html(i),
              $(".childgrouplist").addClass("on on2"),
              o ||
                $(
                  ".childgrouplist .swiper-wrapper .swiper-slide:first"
                ).addClass("on"),
              setTimeout(function () {
                if (
                  $(
                    ".panogroupBody .childgrouplist .swiper-slide.on a"
                  ).width() >
                  $(".panogroupBody .childgrouplist .swiper-slide.on i").width()
                ) {
                  let e =
                    2.5 *
                    Math.floor(
                      $(
                        ".panogroupBody .childgrouplist .swiper-slide.on a"
                      ).width() / 120
                    );
                  $(
                    ".panogroupBody .childgrouplist .swiper-slide.on a"
                  ).addClass("_animatitle"),
                    e > 2.5 &&
                      $(
                        ".panogroupBody .childgrouplist .swiper-slide.on a"
                      ).css("animation-duration", e + "s");
                }
                var e =
                    $(
                      ".panogroupBody .childgrouplist .swiper-wrapper span"
                    ).width() + 8,
                  a = 0,
                  o = $(".panogroupBody").width();
                paramObj._width < 500 &&
                  ((e =
                    $(
                      ".panogroupBody .childgrouplist .swiper-wrapper span"
                    ).width() + 4),
                  (a = 0)),
                  (e += a),
                  e * n < o
                    ? $(
                        ".panogroupBody .childgrouplist .swiper-wrapper"
                      ).addClass("c")
                    : $(
                        ".panogroupBody .childgrouplist .swiper-wrapper"
                      ).removeClass("c"),
                  t.isSwiper
                    ? s()
                    : (t.group_timeout2 = setInterval(function () {
                        _panoGroupObj.isSwiper && s();
                      }, 1e3));
              }, 200),
              void t.setPanoGroupHtml(r, a)
            );
          $(".childgrouplist").removeClass("on");
        }
        a && "oneload" == a.type && a.group_index && (e = a.group_index);
        var u = d[e].scenes,
          m = 0,
          b = 0,
          h = "";
        if (u)
          for (var g = d[e].cate_valid, v = 0, w = u.length; v < w; v++) {
            var j = u[v];
            if (0 != j.isshow)
              if (j.pid > 0) 2 == j.child_type && b++;
              else {
                m++;
                var O = j.thumburl;
                0 != O.indexOf("http") &&
                  (O = paramObj.myserver + O.split("%$myserver%")[1]),
                  (O = _waseeVRObj.setOSSimg(O, 70));
                var f = _krpano.get("scene[" + j.scenename + "].is_big_pixel"),
                  y = "";
                "1" == f && (y = '<span class="bigthtip">大像素</span>');
                var A =
                    1 == _panoGroupObj.panoOFFgroup[j.id].isHistory
                      ? " on_hist"
                      : "",
                  k = "";
                if (
                  (0 == _waseeVRObj.sceneId ||
                    (j.id != _waseeVRObj.sceneId &&
                      j.id !=
                        _panoGroupObj.panoOFFgroup[_waseeVRObj.sceneId].pid) ||
                    (A += " on on_hist"),
                  j.related && j.related.length > 0)
                ) {
                  A += " isrelated";
                  for (let a = 0; a < j.related.length; a++) {
                    let t = _panoGroupObj.panoOFFgroup[j.related[a]],
                      o = t.thumburl,
                      s = "",
                      i = "";
                    t.id == _waseeVRObj.sceneId &&
                      ((i += " on"), (A += " showrelate"), (h = "overini")),
                      (o = paramObj.myserver + o.split("%$myserver%")[1]),
                      (o = _waseeVRObj.setOSSimg(o, 70)),
                      (k +=
                        '<div class="swiper-slide relatpanowrap' +
                        i +
                        '" data-title="' +
                        t.name +
                        '" data-scenename="scene' +
                        t.id +
                        '" data-group-index="' +
                        e +
                        '" data-this-index="' +
                        a +
                        '"><div class="panoimg" title="' +
                        t.name +
                        '" style="background-image:url(' +
                        o +
                        ')"><div class="panoname"><span>' +
                        t.name +
                        '</span></div><em class="ycee"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" t="1576043996861" class="icon22" viewBox="0 0 1024 1024" version="1.1" p-id="10827" width="200" height="200"><defs><style type="text/css"/></defs><path d="M0.20928 497.391904A511.891223 511.891223 0 1 0 526.817376 0.217554 511.891223 511.891223 0 0 0 0.20928 497.391904z m809.427997-109.416749l-340.407664 319.932015a46.07021 46.07021 0 0 1-63.986403 0L218.402914 512.108777a46.07021 46.07021 0 1 1 67.185723-63.986403l153.567367 162.525463L745.650874 320.149568a46.07021 46.07021 0 1 1 63.986403 67.185723" p-id="10828" fill="#ffffff"/></svg></em>' +
                        s +
                        "</div></div>");
                  }
                  "" != k &&
                    ((y +=
                      '<em class="relat_icon flex__center"><i class="iconfont ihover icon_jilian_x"></i></em>'),
                    (k =
                      '<div class="relatedbody"><div class="swiper-container"><div class="swiper-wrapper">' +
                      k +
                      '</div><div class="swiper-button-prev swiper-button-white repl"></div><div class="swiper-button-next swiper-button-white repl"></div></div></div>'));
                }
                j.polymorphism &&
                  j.polymorphism.length > 0 &&
                  (A += " ispolymorphism");
                var x = "",
                  E = "";
                null != g &&
                  0 == g &&
                  ((x = "disabled3"),
                  (E += '<i class="iconfont icon_suo"></i>')),
                  2 == j.media_type &&
                    ((E +=
                      '<span class="vidtip"><i class="iconfont icon_openin"></i></span>'),
                    (A += " videoo")),
                  (c +=
                    '<div class="swiper-slide panowrap' +
                    A +
                    " " +
                    x +
                    '" data-title="' +
                    j.name +
                    '" data-scenename="scene' +
                    j.id +
                    '" data-group-index="' +
                    e +
                    '" data-this-index="' +
                    v +
                    '">' +
                    k +
                    '<div class="panoimg" title="' +
                    j.name +
                    '" style="background-image:url(' +
                    O +
                    ')"><div class="panoname"><span>' +
                    j.name +
                    "</span></div>" +
                    y +
                    '<em class="ycee"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" t="1576043996861" class="icon22" viewBox="0 0 1024 1024" version="1.1" p-id="10827" width="200" height="200"><defs><style type="text/css"/></defs><path d="M0.20928 497.391904A511.891223 511.891223 0 1 0 526.817376 0.217554 511.891223 511.891223 0 0 0 0.20928 497.391904z m809.427997-109.416749l-340.407664 319.932015a46.07021 46.07021 0 0 1-63.986403 0L218.402914 512.108777a46.07021 46.07021 0 1 1 67.185723-63.986403l153.567367 162.525463L745.650874 320.149568a46.07021 46.07021 0 1 1 63.986403 67.185723" p-id="10828" fill="#ffffff"/></svg></em>' +
                    E +
                    "</div></div>");
              }
          }
        if ($(".panogroupBody .panolist").length > 0) {
          if (
            ($(".panogroupBody .panolist").removeClass("on"),
            $(
              ".panogroupBody .panolist .swiper-wrapper .showrelate"
            ).removeClass("showrelate"),
            "overini" == h
              ? $(".panogroupBody .panolist .panotb").addClass("overini")
              : $(".panogroupBody .panolist .panotb").removeClass("overini"),
            $(".panogroupBody .panolist .swiper-wrapper")
              .html(c)
              .removeAttr("style"),
            $(".panogroupBody .panolist").addClass("on"),
            $(".panogroupBody .panolist .panowrap.on .panoname span").width() >
              $(".panogroupBody .panolist .panowrap.on .panoname").width())
          ) {
            let e =
              2.5 *
              Math.floor(
                $(
                  ".panogroupBody .panolist .panowrap.on .panoname span"
                ).width() / 120
              );
            $(".panogroupBody .panolist .panowrap.on .panoname span").addClass(
              "_animatitle"
            ),
              e > 2.5 &&
                $(".panogroupBody .panolist .panowrap.on .panoname span").css(
                  "animation-duration",
                  e + "s"
                );
          }
          1 == __WASEE_DATA__.product.switch.overallNav.autoclsscene &&
            _panoGroupObj.panogroupKeydown &&
            $(".panogroupBody .panolist .panowrap:eq(0)").click(),
            _waseeVRObj.mySwiper2.update();
        } else if (
          (1 == t.panogroupData_Len ||
            (2 == t.panogroupData_Len &&
              (t.panogroupData[0].pid > 0 || t.panogroupData[1].pid > 0))) &&
          1 == m &&
          0 == b
        )
          $(".pano_bottom_item").prepend(
            '<div class="item_top p-re transhide"><div class="panogroupBody"></div></div>'
          ),
            $(".pano_group_list_btn").remove();
        else {
          if (
            ((1 == t.panogroupData_Len ||
              (2 == t.panogroupData_Len &&
                (t.panogroupData[0].pid > 0 || t.panogroupData[1].pid > 0))) &&
              ($(".pano_bottom_item").prepend(
                '<div class="item_top p-re transhide"><div class="panogroupBody"></div></div>'
              ),
              $(".pano_group_list_btn").removeClass("none")),
            $(".panogroupBody").append(
              '<div class="panolist on"><div class="panolistjirong"><div class="panotb ' +
                h +
                '"><div class="swiper-container"><div class="swiper-wrapper">' +
                c +
                '</div><div class="swiper-button-prev swiper-button-white pl"></div><div class="swiper-button-next swiper-button-white pl"></div></div></div></div>'
            ),
            $(".panogroupBody .panolist .panowrap.on .panoname span").width() >
              $(".panogroupBody .panolist .panowrap.on .panoname").width())
          ) {
            let e =
              2.5 *
              Math.floor(
                $(
                  ".panogroupBody .panolist .panowrap.on .panoname span"
                ).width() / 120
              );
            $(".panogroupBody .panolist .panowrap.on .panoname span").addClass(
              "_animatitle"
            ),
              e > 2.5 &&
                $(".panogroupBody .panolist .panowrap.on .panoname span").css(
                  "animation-duration",
                  e + "s"
                );
          }
          1 == __WASEE_DATA__.product.switch.overallNav.autoclsscene &&
            a &&
            "group" == a.from &&
            $(".panogroupBody .panolist .panowrap:eq(0)").click();
          var R = $(".pano_bottom_item").height(),
            V = R;
          paramObj._width < 500 && (V += 50),
            $("head").append(
              "<style>.pano_bottom_item{bottom:-" + V + "px}</style>"
            ),
            $(".pano_bottom_item").css("height", R + "px"),
            setTimeout(function () {
              _waseeVRObj.panovideoObj.setvideocontrolwzhi(4),
                0 == _panoGroupObj.panogroupHeight &&
                  ((_panoGroupObj.panogroupHeight =
                    $(".panogroupBody").height()),
                  $(".pano_bottom_item .item_top").css(
                    "height",
                    _panoGroupObj.panogroupHeight + "px"
                  )),
                $(".panogroupBody").css("position", "absolute");
            }, 1e3),
            0 != __WASEE_DATA__.product.switch.overallNav.scene_list &&
              ($(".pano_bottom_item").removeClass("onhide"),
              $(".pano_bottom_item .item_top").removeClass("transhide"),
              $(".pano_bottom_item .pano_group_list_btn").removeClass("list")),
            t.isSwiper
              ? (p(), l())
              : ((t.panolist_timeout = setInterval(function () {
                  _panoGroupObj.isSwiper && p();
                }, 1e3)),
                (t.relatpanolist_timeout = setInterval(function () {
                  _panoGroupObj.isSwiper && l();
                }, 1e3)));
        }
        var C = 70,
          D = 10,
          I = $(".panogroupBody .panolist .panotb").width();
        paramObj._width < 500 && (C = 56), (C += D);
        C * m < I
          ? $(
              ".panogroupBody .panolist .panotb>.swiper-container>.swiper-wrapper"
            ).addClass("c")
          : setTimeout(function () {
              $(".panogroupBody .panolist .swiper-wrapper").removeClass("c");
            }, 200);
      } else {
        if (
          (_waseeVRObj.setCss(
            ".panogroupBody .panolist .panowrap .relatedbody{max-width:" +
              (paramObj._width - 160) +
              "px;}"
          ),
          t.panogroupData_Len > 2 ||
            (2 == t.panogroupData_Len &&
              0 == t.panogroupData[0].pid &&
              0 == t.panogroupData[1].pid))
        ) {
          for (var S in d)
            if (!(d[S].pid > 0)) {
              r++;
              (g = d[S].cate_valid), (A = "");
              t.panogroupIdlist[n + "_g"] && t.panogroupIdlist[n + "_g"].pid > 0
                ? d[S].id == t.panogroupIdlist[n + "_g"].pid &&
                  ((i = S), (A = " on"))
                : 0 != _waseeVRObj.sceneId &&
                  t.panoOFFgroup[_waseeVRObj.sceneId] &&
                  S == t.panoOFFgroup[_waseeVRObj.sceneId].index &&
                  ((i = S), (A = " on")),
                (_ +=
                  null != g && 0 == g
                    ? '<span class="swiper-slide disabled3 ' +
                      A +
                      '" data-gid="' +
                      S +
                      '" data-groupid="' +
                      d[S].id +
                      '" title="' +
                      d[S].title +
                      '"><i class="ctab"><a class="flex_center_y"><i class="iconfont icon_suo"></i>' +
                      d[S].title +
                      "</a></i></span>"
                    : '<span class="swiper-slide' +
                      A +
                      '" data-gid="' +
                      S +
                      '" data-groupid="' +
                      d[S].id +
                      '" title="' +
                      d[S].title +
                      '"><i class="ctab"><a>' +
                      d[S].title +
                      "</a></i></span>");
            }
          (_ =
            '<div class="panogrouplist"><div class="swiper-container"><div class="swiper-wrapper c">' +
            _ +
            '</div><div class="swiper-button-prev swiper-button-white swiper-button-disabled"></div><div class="swiper-button-next swiper-button-white swiper-button-disabled"></div></div></div>'),
            (_ +=
              '<div class="childgrouplist"><div class="childgrtab"><div class="swiper-container"><div class="swiper-wrapper c"></div><div class="swiper-button-prev g_child swiper-button-white swiper-button-disabled"></div><div class="swiper-button-next g_child swiper-button-white swiper-button-disabled"></div></div></div></div>'),
            $(".pano_bottom_item").prepend(
              '<div class="item_top p-re transhide"><div class="panogroupBody">' +
                _ +
                "</div></div>"
            ),
            $(".pano_group_list_btn").removeClass("none"),
            setTimeout(function () {
              if (
                $(".panogroupBody .panogrouplist .swiper-slide.on a").width() >
                $(".panogroupBody .panogrouplist .swiper-slide.on i").width()
              ) {
                let e =
                  2.5 *
                  Math.floor(
                    $(
                      ".panogroupBody .panogrouplist .swiper-slide.on a"
                    ).width() / 120
                  );
                $(".panogroupBody .panogrouplist .swiper-slide.on a").addClass(
                  "_animatitle"
                ),
                  e > 2.5 &&
                    $(".panogroupBody .panogrouplist .swiper-slide.on a").css(
                      "animation-duration",
                      e + "s"
                    );
              }
              var e =
                  $(
                    ".panogroupBody .panogrouplist .swiper-wrapper span"
                  ).width() + 10,
                a = 20,
                s = $(".panogroupBody").width();
              paramObj._width < 500 && (a = 10),
                (e += a),
                e * r - a < s
                  ? $(".panogroupBody .panogrouplist .swiper-wrapper").addClass(
                      "c"
                    )
                  : $(
                      ".panogroupBody .panogrouplist .swiper-wrapper"
                    ).removeClass("c"),
                t.isSwiper
                  ? o()
                  : (t.group_timeout = setInterval(function () {
                      _panoGroupObj.isSwiper && o();
                    }, 1e3));
            }, 200);
        }
        let e = {
          type: "oneload",
          groupid: n,
          group_index:
            0 == _waseeVRObj.sceneId
              ? 0
              : t.panoOFFgroup[_waseeVRObj.sceneId].index,
        };
        t.setPanoGroupHtml(i, e);
      }
    }
    var o = this,
      s = o.panogroupData,
      i = 0,
      n =
        0 == _waseeVRObj.sceneId
          ? 0
          : o.panoOFFgroup[_waseeVRObj.sceneId].groupid,
      r = 0;
    if (1 == _waseeVRObj.is_switch_nav) return !1;
    switch (__WASEE_DATA__.product.panoinfo.skinItem) {
      case 0:
      case 1:
      case 4:
        if (1990 == paramObj.krpano.krpano_id) t(o);
        else {
          let e = !0,
            a = 0,
            t = 0;
          if (1 == this.panoData_Len) e = !1;
          else if (1 == this.panogroupData_Len && this.panoData_Len > 1)
            for (
              let e = 0;
              e < _panoGroupObj.panogroupData[0].scenes.length;
              e++
            ) {
              const o = _panoGroupObj.panogroupData[0].scenes[e];
              0 == o.child_type && o.pid > 0 && a++, 0 == o.isshow && t++;
            }
          a >= this.panoData_Len - 1 && (e = !1),
            e
              ? ($(".pano_bottom_item").prepend(
                  '<div class="item_top p-re transhide"></div>'
                ),
                $(".pano_group_list_btn").removeClass("none"),
                0 != __WASEE_DATA__.product.switch.overallNav.scene_list &&
                  ($(".pano_bottom_item").removeClass("onhide"),
                  $(".pano_bottom_item .item_top").removeClass("transhide"),
                  $(".pano_bottom_item .pano_group_list_btn").removeClass(
                    "list"
                  )),
                (function e() {
                  "object" == typeof groupModule &&
                  "function" == typeof groupModule.init
                    ? (groupModule.init(),
                      setTimeout(function () {
                        let e = _waseeVRObj.isDesktop ? 20 : 5;
                        3 != __WASEE_DATA__.product.panoinfo.skinItem &&
                          $(".navleftbottom,.navrightbottom").css(
                            "bottom",
                            $(".pano_bottom_item").height() + e + "px"
                          ),
                          _waseeVRObj.is_scenic > 0 &&
                            $("#ser_scene").length > 0 &&
                            _waseeVRObj.isDesktop &&
                            setTimeout(function () {
                              $("#ser_scene").css(
                                "bottom",
                                paramObj._height -
                                  $(".scenicmode .navrightbottom").offset()
                                    .top +
                                  12 +
                                  "px"
                              );
                            }, 300);
                      }, 1e3))
                    : setTimeout(function () {
                        e();
                      }, 100);
                })())
              : ($(".pano_bottom_item").prepend(
                  '<div class="item_top p-re transhide"></div>'
                ),
                $(".pano_group_list_btn").remove());
        }
        break;
      case 3:
        if (null != e && e >= 0) {
          let t = s[e].pid,
            n = 0,
            r = -1,
            h = [];
          if ((0 == t || null == t) && o.panogroupData_Len > 1) {
            for (let t = 0; t < s.length; t++) {
              const i = s[t];
              (i.ys_key = t),
                a && "oneload" == a.type && a.groupid == i.id && (n = t),
                i.pid == s[e].id &&
                  (h.push(i),
                  -1 == r &&
                    o.panogroupIdlist[i.id + "_g"].scenes.length > 0 &&
                    (r = o.panogroupIdlist[i.id + "_g"].index));
            }
            if (($._Rouslette.initArea(".hymenu_industry", "two", h), -1 != r))
              return "oneload" == a.type
                ? ($(".hymenu_industry a[data-gid=" + n + "]")
                    .parent()
                    .addClass("on"),
                  o.setDefaultrotate("hymenu_industry"),
                  void setTimeout(function () {
                    o.setPanoGroupHtml(r, a),
                      o.setDefaultrotate("hymenu_industry");
                  }, 200))
                : void (
                    _panoGroupObj.panogroupKeydown &&
                    setTimeout(function () {
                      o.setPanoGroupHtml(r, a),
                        $(".hymenu_industry a[data-gid=" + r + "]")
                          .parent()
                          .addClass("on"),
                        o.setDefaultrotate("hymenu_industry");
                    }, 200)
                  );
            $(".menuWrap .hyrlbg_ind,.menuWrap .hyrlbg_sub").addClass(
              "height0"
            );
          } else $(".menuWrap .hyrlbg_sub").addClass("height0");
          a && "oneload" == a.type && a.group_index && (e = a.group_index);
          var p = s[e].scenes,
            l = 0,
            d = 0,
            _ = [];
          if (p) {
            s[e].cate_valid;
            for (
              var c = $(".hymenu_industry span").length,
                u = ((i = -1), 0),
                m = p.length;
              u < m;
              u++
            ) {
              var b = p[u];
              0 != b.isshow &&
                (b.pid > 0
                  ? 2 == b.child_type && d++
                  : (l++,
                    (b.ys_key = e),
                    _waseeVRObj.sceneId > 0 &&
                      (b.id == _waseeVRObj.sceneId ||
                        b.id ==
                          _panoGroupObj.panoOFFgroup[_waseeVRObj.sceneId]
                            .pid) &&
                      (i = u),
                    _.push(b)));
            }
            (1 == l &&
              0 == d &&
              (1 == o.panogroupData_Len ||
                (2 == o.panogroupData_Len && c > 0))) ||
              (o.panogroupData_Len > 2 ||
              (2 == o.panogroupData_Len &&
                0 == o.panogroupData[0].pid &&
                0 == o.panogroupData[1].pid)
                ? 0 == c
                  ? ($._Rouslette.initArea(".hymenu_industry", "scene", _),
                    i > -1 && o.setDefaultrotate("hymenu_industry"))
                  : ($._Rouslette.initArea(".hymenu_sub", "scene", _),
                    i > -1 && o.setDefaultrotate("hymenu_sub"))
                : ($._Rouslette.initArea(".hymenu", "scene", _),
                  i > -1 && o.setDefaultrotate("hymenu")),
              $(
                ".menuWrap a[data-typee=scene][data-scenename=scene" +
                  _waseeVRObj.sceneId +
                  "]"
              )
                .parent()
                .addClass("on"),
              1 == __WASEE_DATA__.product.switch.overallNav.autoclsscene &&
                _panoGroupObj.panogroupKeydown &&
                $(".menuWrap a[data-typee=scene]:eq(0)").click());
          }
        } else {
          var h = "pc" == $.browserRedirect() ? 54 : 52,
            g = 14,
            v = "vh",
            w = 10,
            j =
              "#hycontrolBtn{transform: translateY(" +
              g +
              v +
              ");}#hycontrolBtn.hideed.sf{transform: translateY(" +
              ("ios" == paramObj.isPhone ? 18 : 20) +
              "vh);}",
            O = h,
            f = O + w,
            y = f + w,
            A = y + w;
          j +=
            ".hyrlbg2{width:" +
            O +
            v +
            ";height:" +
            O +
            v +
            ";}.hyrlbg{width:" +
            f +
            v +
            ";height:" +
            f +
            v +
            ";}.hyrlbg_ind{width:" +
            y +
            v +
            ";height:" +
            y +
            v +
            ";}.hyrlbg_sub{width:" +
            A +
            v +
            ";height:" +
            A +
            v +
            ";}";
          let e = f / 2,
            a = y / 2,
            t = A / 2;
          (j +=
            ".hymenu{height:" +
            e +
            v +
            ";}.hymenu_industry{height:" +
            a +
            v +
            ";}.hymenu_sub{height:" +
            t +
            v +
            ";}.hyroul-body .cbottom{width:" +
            (4.3 * h) / 54 +
            v +
            ";height:" +
            (4.3 * h) / 54 +
            v +
            ";}.hyroul-body .cbottom.citymap.show{transform: translateX(-" +
            (8 * h) / 54 +
            v +
            ");}.hyroul-body .cbottom.mycenter.show{transform: translateX(" +
            (8 * h) / 54 +
            v +
            ");}.hyroul-body .cbottom.hylogo{width: " +
            (6.4 * h) / 54 +
            v +
            ";height: " +
            (8.4 * h) / 54 +
            v +
            ";transform: translateY(" +
            (1.8 * h) / 54 +
            v +
            ");}.pano_bottom_item .hideed.sf.hyroul-body .cbottom.hylogo.show{bottom: " +
            (19 * h) / 54 +
            v +
            ";}.pano_bottom_item.mobile .hideed.sf.hyroul-body .cbottom.hylogo.show{bottom: " +
            (19.8 * h) / 54 +
            v +
            ";}.skinItem3 .navrightbottom{bottom:calc(100% - " +
            (A - g + 3 + ("phone" == $.browserRedirect() ? 3 : 0)) +
            v +
            ")}.skinItem3 .setspecir.on, .skinItem3 .pano_bottom_item.on.onhide + .speguidetail{bottom: " +
            ("ios" == paramObj.isPhone ? (9.2 * h) / 54 : (8 * h) / 54) +
            v +
            ";}"),
            "ios" == paramObj.isPhone &&
              (j +=
                "#hycontrolBtn{transition: transform 1s cubic-bezier(0.00025,0.0001,0.0000125,1);-webkit-transition: -webkit-transform 1s cubic-bezier(0.00025,0.0001,0.0000125,1);}#hycontrolBtn .menuWrap>div{transition: all 1s cubic-bezier(0.00025,0.0001,0.0000125,1);-webkit-transition: all 1s cubic-bezier(0.00025,0.0001,0.0000125,1);}.skinItem3.ios .hyroul-body .cbottom{transition: all 1s cubic-bezier(0.00025,0.0001,0.0000125,1);-webkit-transition: all 1s cubic-bezier(0.00025,0.0001,0.0000125,1);}"),
            _waseeVRObj.setCss(j);
          let p =
            __WASEE_DATA__.product.switch.definimenu.anchor_btn &&
            $.isJSONstr(__WASEE_DATA__.product.switch.definimenu.anchor_btn)
              ? JSON.parse(__WASEE_DATA__.product.switch.definimenu.anchor_btn)
              : {};
          $(".pano_bottom_item").prepend(
            '<div class="hyroul-body tstion hideed sf" id="hycontrolBtn"><div class="menuWrap"><div class="hyrlbg_sub hymenu_sub_bg height0"></div><div class="hyrlbg_ind hymenu_industry_bg height0"></div><div class="hyrlbg hymenu_bg height0"></div><div class="hyrlbg2 height0"></div><div class="hymenu_sub height0" id="hymenu_sub"></div><div class="hymenu_industry height0" id="hymenu_industry" style="transform: rotate(0deg);"></div><div class="hymenu height0" id="hymenu_area" style="transform: rotate(0deg);"></div></div><div class="smallicon smallcompass"></div><div class="cbottom citymap" tips="' +
              _langObj.more2 +
              '"></div><div class="cbottom hylogo"></div><div class="cbottom mycenter" tips="' +
              (p.name && "" != p.name && "作品简介" != p.name
                ? p.name
                : _langObj.zuopingjianj) +
              '"></div><div class="smallicon gosearchplist weui-search-bar__box"><i class="weui-icon-search"></i></div></div>'
          ),
            $(".hyroul-body")
              .on("click", ".menuWrap a", function () {
                if ($(this).hasClass("on")) return;
                let e = $(this).attr("data-typee");
                switch (e) {
                  case "one":
                    $(
                      ".menuWrap .hymenu_industry,.menuWrap .hymenu_sub"
                    ).empty(),
                      o.setPanoGroupHtml($(this).attr("data-gid"), {
                        from: "group",
                      });
                    break;
                  case "two":
                    $(".menuWrap .hymenu_sub").empty(),
                      o.setPanoGroupHtml($(this).attr("data-gid"), {
                        from: "group",
                      });
                    break;
                  case "scene":
                    var a = $(this).attr("data-scenename").substring(5);
                    if (_waseeVRObj.sceneId == a) return;
                    var t = $(this).attr("data-group-index"),
                      s = $(this).attr("data-this-index");
                    (_panoGroupObj.panogroupData[t].scenes[s].is_history = 1),
                      (_panoGroupObj.panoOFFgroup[a].isHistory = 1),
                      _waseeVRObj.toLoadscene({ id: a });
                }
              })
              .on(
                "mousedown touchstart",
                ".menuWrap a[data-typee=one],.menuWrap a[data-typee=two],.menuWrap a[data-typee=scene]",
                function () {
                  _panoGroupObj.panogroupKeydown = !0;
                }
              )
              .on("click", ".cbottom.mycenter", function () {
                pano_otherModule.dom_panoInfo({});
              })
              .on("click", ".cbottom.citymap", function () {
                0 == $(".moresystem.skinItem3").length
                  ? ($("#subinformain").append(
                      '<div class="moresystem skinItem3 backdrop ' +
                        paramObj.isPhone +
                        ' mask_Box on"> <span class="title flex_center_y"><span>' +
                        _langObj.more2 +
                        '</span><em class="close" onclick="$(\'.moresystem.skinItem3\').removeClass(\'on\')"><i class="iconfont icon_cha"></i></em></span> <div class="mslist flex__wrap__b">' +
                        $(".navrighttop .EM_MENU_LIST").html() +
                        "</div> </div>"
                    ),
                    $(".moresystem .mslist").prepend(
                      $(".navrighttop>em.menu_icon_btn")
                    ),
                    "CN" != _languageObj.lang &&
                      $(".moresystem .mslist .mMenu").length > 0 &&
                      $(".navrighttop .mMenu,.moresystem .mMenu").attr(
                        "data-tips",
                        _langObj.caidan
                      ))
                  : $(".moresystem.skinItem3").addClass("on"),
                  $(".moresystem.skinItem3 .mslist").width() < 216
                    ? $(".moresystem.skinItem3 .mslist").addClass(
                        "flex_center_x"
                      )
                    : $(".moresystem.skinItem3 .mslist").removeClass(
                        "flex_center_x"
                      );
              })
              .on("click", ".cbottom.hylogo", function () {
                $("#hycontrolBtn").toggleClass("hideed sf"),
                  $(".pano_bottom_item").toggleClass("onhide"),
                  null != window.show_guide_speci &&
                    (clearTimeout(window.show_guide_speci),
                    delete window.show_guide_speci),
                  window.showspecificlist_timeout &&
                    (clearTimeout(window.showspecificlist_timeout),
                    delete window.showspecificlist_timeout),
                  window.isshowspeci && $(".setspecir .dl_stop").click();
              }),
            (o.setDefaultrotate = function (e) {
              let a = $("." + e + ">span:last a").attr("datarotate"),
                t = "";
              switch (e) {
                case "hymenu":
                  t = "one";
                  break;
                case "hymenu_industry":
                  t = "two";
                  break;
                case "hymenu_sub":
                  if (((t = "three"), _panoGroupObj.panogroupKeydown)) return;
              }
              if (a < $._Rouslette.hymenuObj[t + "Q_ratote_max"])
                $._Rouslette.rotateReset(
                  e,
                  0 - $._Rouslette.hymenuObj[e + "_rotate_center"]
                );
              else {
                var s = $("." + e + " span.on a").attr("datarotate");
                null != s
                  ? (s > $._Rouslette.hymenuObj[e + "_rotate_center"]
                      ? 0 - s <
                          0 -
                            $._Rouslette.hymenuObj[e + "_rotate_center_next"] &&
                        (s =
                          0 - $._Rouslette.hymenuObj[e + "_rotate_center_next"])
                      : (s =
                          0 - s >
                          0 - $._Rouslette.hymenuObj[e + "_rotate_center"]
                            ? $._Rouslette.hymenuObj[e + "_rotate_center"]
                            : 0 - s),
                    $._Rouslette.rotateReset(e, s))
                  : setTimeout(function () {
                      o.setDefaultrotate(e);
                    }, 500);
              }
            }),
            void 0 === $._Rouslette &&
              $.addJavascript({
                src:
                  paramObj.resourceWasee +
                  "/home/vrpano/js/wsruletts.min.js?20210402",
                callBack: function () {
                  if (
                    (0 != __WASEE_DATA__.product.switch.overallNav.scene_list &&
                      ($(".pano_bottom_item").removeClass("onhide"),
                      $(".hyroul-body").removeClass("hideed sf")),
                    "ios" == paramObj.isPhone &&
                      setTimeout(function () {
                        _waseeVRObj.setCss(
                          "#hycontrolBtn.hideed.sf .menuWrap>div{transition: all 10s cubic-bezier(0.00025,0.0001,0.0000125,1);-webkit-transition: all 10s cubic-bezier(0.00025,0.0001,0.0000125,1);}"
                        );
                      }, 300),
                    $(".navrighttop .EM_MENU_LIST .none").length +
                      $(".navrighttop .EM_MENU_LIST .nonee").length >=
                      $(".navrighttop .EM_MENU_LIST>*").length &&
                      $(".hyroul-body .cbottom.citymap").remove(),
                    1 !=
                      __WASEE_DATA__.product.switch.definimenu.showpanoinfo &&
                      $(".hyroul-body .cbottom.mycenter").remove(),
                    $(".hyroul-body .hyrlbg2").removeClass("height0"),
                    setTimeout(
                      "$('.hyroul-body .cbottom.hylogo').addClass('show');",
                      300
                    ),
                    setTimeout(
                      "$('.hyroul-body .cbottom').addClass('show');",
                      500
                    ),
                    o.panogroupData_Len > 2 ||
                      (2 == o.panogroupData_Len &&
                        0 == o.panogroupData[0].pid &&
                        0 == o.panogroupData[1].pid))
                  ) {
                    let a = [];
                    for (var e in s)
                      s[e].pid > 0 ||
                        (r++,
                        o.panogroupIdlist[n + "_g"] &&
                        o.panogroupIdlist[n + "_g"].pid > 0
                          ? s[e].id == o.panogroupIdlist[n + "_g"].pid &&
                            (i = e)
                          : _waseeVRObj.sceneId > 0 &&
                            e == o.panoOFFgroup[_waseeVRObj.sceneId].index &&
                            (i = e),
                        (s[e].ys_key = e),
                        a.push(s[e]));
                    $._Rouslette.initArea(".hymenu", "one", a);
                  }
                  setTimeout(function () {
                    $(".hymenu a[data-gid=" + i + "]")
                      .parent()
                      .addClass("on"),
                      o.setDefaultrotate("hymenu"),
                      o.setPanoGroupHtml(i, {
                        type: "oneload",
                        group_index:
                          0 == _waseeVRObj.sceneId
                            ? 0
                            : o.panoOFFgroup[_waseeVRObj.sceneId].index,
                        groupid: n,
                      });
                  }, 200);
                },
              });
        }
    }
    _waseeVRObj.isDesktop
      ? _waseeVRObj.panovideoObj.setvideocontrolwzhi(2)
      : setTimeout(function () {
          _waseeVRObj.panovideoObj.setvideocontrolwzhi(2);
        }, 1e3);
  },
  isShowpanogroup: function (e) {
    "object" == typeof e && 1 == e.show
      ? $(".pano_bottom_item .pano_group_list_btn").hasClass("list") &&
        (((e && e.from && this.closefrom == e.from) || !e || !e.from) &&
          $(".pano_bottom_item .pano_group_list_btn").click(),
        delete this.closefrom)
      : $(".pano_bottom_item .pano_group_list_btn").hasClass("list") ||
        (e && e.from && (this.closefrom = e.from),
        $(".pano_bottom_item .pano_group_list_btn").click());
  },
  singroupscene: function (e) {
    if (0 != e)
      switch (__WASEE_DATA__.product.panoinfo.skinItem) {
        case 3:
          if (_panoGroupObj.panogroupKeydown)
            _panoGroupObj.panogroupKeydown = !1;
          else {
            var a = this.panoOFFgroup[e].groupid,
              t = this.panogroupIdlist[a + "_g"].pid,
              o = "hymenu";
            if (1 == this.panogroupData.length) o = "hymenu";
            else if (t > 0) {
              o = "hymenu_sub";
              let e = $(
                ".hyroul-body .hymenu a[data-typee=one][data-groupid=" + t + "]"
              );
              e.length > 0 &&
                (e.parent().hasClass("on") ||
                  (e.click(), this.setDefaultrotate("hymenu")));
              let s = $(
                ".hyroul-body .hymenu_industry a[data-typee=two][data-groupid=" +
                  a +
                  "]"
              );
              s.length > 0 &&
                (s.parent().hasClass("on") ||
                  (s.click(), this.setDefaultrotate("hymenu_industry")));
            } else {
              o = "hymenu_industry";
              let e = $(
                ".hyroul-body .hymenu a[data-typee=one][data-groupid=" + a + "]"
              );
              e.length > 0 &&
                (e.parent().hasClass("on") ||
                  (e.click(), this.setDefaultrotate("hymenu")));
            }
            let r = e,
              p = $(
                ".hyroul-body ." +
                  o +
                  " a[data-typee=scene][data-scenename=scene" +
                  r +
                  "]"
              );
            $(
              ".hyroul-body ." +
                o +
                " a[data-typee=scene][data-scenename=scene" +
                r +
                "]"
            )
              .parent()
              .addClass("on")
              .siblings()
              .removeClass("on"),
              this.setDefaultrotate(o);
            var s = p.attr("datarotate"),
              i = p.attr("class"),
              n = p.parent();
            "char1char2char3char4char5char6".indexOf(i) > -1 &&
              ((s = p.parent().attr("datarotate")), (n = p.parent().parent())),
              $._Rouslette.rotateReset(n.parent().attr("class"), 0 - s),
              (_waseeVRObj.showAreaRotate = s);
          }
          break;
        case 20:
          if (_panoGroupObj.panogroupKeydown)
            _panoGroupObj.panogroupKeydown = !1;
          else {
            (a = this.panoOFFgroup[e].groupid),
              (t = this.panogroupIdlist[a + "_g"].pid);
            var r = !1;
            t > 0
              ? ($(
                  ".panogroupBody .panogrouplist .swiper-slide[data-groupid=" +
                    t +
                    "]"
                ).hasClass("on") ||
                  ((r = !0),
                  $(
                    ".panogroupBody .panogrouplist .swiper-slide[data-groupid=" +
                      t +
                      "]"
                  ).click()),
                $(
                  ".panogroupBody .childgrouplist .childgrtab .swiper-slide[data-groupid=" +
                    a +
                    "]"
                ).hasClass("on") ||
                  ((r = !0),
                  $(
                    ".panogroupBody .childgrouplist .childgrtab .swiper-slide[data-groupid=" +
                      a +
                      "]"
                  ).click()))
              : $(
                  ".panogroupBody .panogrouplist .swiper-slide[data-groupid=" +
                    a +
                    "]"
                ).hasClass("on") ||
                ((r = !0),
                $(
                  ".panogroupBody .panogrouplist .swiper-slide[data-groupid=" +
                    a +
                    "]"
                ).click()),
              (_panoGroupObj.panoOFFgroup[e].isHistory = 1),
              r
                ? setTimeout(function () {
                    p();
                  }, 300)
                : p();
          }
          function p() {
            var e = $(".panogroupBody .panolist .panowrap.on").index(),
              a = $(
                ".panogroupBody .panolist .panotb > .swiper-container > .swiper-wrapper > .swiper-slide"
              ).length,
              t = $(".panogroupBody .panolist").width(),
              o =
                $(
                  ".panogroupBody .panolist .swiper-wrapper .swiper-slide:first"
                ).width() + 10;
            a * o > t &&
              setTimeout(function () {
                let s = -e * o;
                (s += t / 2 - 10),
                  s > 0 ? (s = 0) : s < t - a * o && (s = t - a * o),
                  $(".panogroupBody .panolist .swiper-wrapper").css(
                    "transform",
                    "translate3d(" + s + "px, 0px, 0px)"
                  );
              }, 200);
            var s = $(
                ".panogroupBody .panogrouplist .swiper-wrapper .swiper-slide"
              ).length,
              i = $(".panogroupBody .panogrouplist").width(),
              n =
                $(
                  ".panogroupBody .panogrouplist .swiper-wrapper .swiper-slide:first"
                ).width() + 10;
            _waseeVRObj.isDesktop ||
              ((pldiv_width = $(".panogroupBody .panolist").width() - 12),
              (pano_width = 56));
            var r = s * (n + 20) - 20;
            if (r > i) {
              var p = r - i,
                l = $(
                  ".panogroupBody .panogrouplist .swiper-wrapper .swiper-slide.on"
                ).index(),
                d = l * (n + 20) - (i / 2 - n / 2);
              p < d && (d = p),
                $(".panogroupBody .panogrouplist .swiper-wrapper").css(
                  "transform",
                  "translate3d(-" + d + "px, 0px, 0px)"
                );
            }
          }
          _panoGroupObj.panogroupKeydown &&
            setTimeout("_panoGroupObj.panogroupKeydown=false;", 300);
          let l = e;
          if (
            (_panoGroupObj.panoOFFgroup[e].pid &&
            _panoGroupObj.panoOFFgroup[e].pid > 0
              ? ((l = _panoGroupObj.panoOFFgroup[e].pid),
                $(".panogroupBody .panolist .panotb").addClass("overini"),
                $(
                  ".panogroupBody .panolist .panowrap[data-scenename=scene" +
                    l +
                    "]"
                )
                  .addClass("on on_hist showrelate")
                  .siblings()
                  .removeClass("on"),
                $(
                  ".panogroupBody .panolist .panowrap[data-scenename=scene" +
                    l +
                    "] .relatedbody .relatpanowrap[data-scenename=scene" +
                    e +
                    "]"
                )
                  .addClass("on on_hist")
                  .siblings()
                  .removeClass("on"),
                new Swiper(
                  ".pano_bottom_item.on .panogroupBody .panolist .panowrap.showrelate .relatedbody .swiper-container",
                  {
                    freeMode: !0,
                    freeModeMomentum: !0,
                    slidesPerView: "auto",
                    nested: !0,
                    prevButton: ".swiper-button-prev.repl",
                    nextButton: ".swiper-button-next.repl",
                  }
                ))
              : ($(
                  ".panogroupBody .panolist .panowrap[data-scenename=scene" +
                    l +
                    "]"
                )
                  .addClass("on on_hist")
                  .siblings()
                  .removeClass("on"),
                p()),
            $(".panogroupBody .panolist .panowrap.on .panoname span").width() >
              $(".panogroupBody .panolist .panowrap.on .panoname").width())
          ) {
            let e =
              2.5 *
              Math.floor(
                $(
                  ".panogroupBody .panolist .panowrap.on .panoname span"
                ).width() / 120
              );
            $(".panogroupBody .panolist .panowrap.on .panoname span").addClass(
              "_animatitle"
            ),
              e > 2.5 &&
                $(".panogroupBody .panolist .panowrap.on .panoname span").css(
                  "animation-duration",
                  e + "s"
                );
          }
      }
    else
      switch (__WASEE_DATA__.product.panoinfo.skinItem) {
        case 0:
          $(".pano_bottom_item .panolist .panotb .swiper-slide.on").removeClass(
            "on"
          );
          break;
        case 3:
          $('.menuWrap a[data-typee="scene"]').parent().removeClass("on");
      }
  },
  setnavrightbottom: function () {
    switch (__WASEE_DATA__.product.panoinfo.skinItem) {
      case 0:
      case 1:
      case 4:
        setTimeout(function () {
          let e = _waseeVRObj.isDesktop ? 20 : 5;
          3 != __WASEE_DATA__.product.panoinfo.skinItem &&
            $(".navleftbottom,.navrightbottom").css(
              "bottom",
              $(".pano_bottom_item").height() + e + "px"
            ),
            _waseeVRObj.is_scenic > 0 &&
              $("#ser_scene").length > 0 &&
              _waseeVRObj.isDesktop &&
              setTimeout(function () {
                $("#ser_scene").css(
                  "bottom",
                  paramObj._height -
                    $(".scenicmode .navrightbottom").offset().top +
                    12 +
                    "px"
                );
              }, 300);
        }, 500);
    }
  },
};
(window._waseeVRObj__isApp = {
  _type: 1,
  autorotatecount: 0,
  isLoading: !1,
  toggle_view: function (e) {
    e = Number(e);
    if (e != this._type)
      switch (((this._type = e), e)) {
        case 1:
          _krpano.call("cm_normal_view()");
          break;
        case 2:
          _krpano.call("cm_fisheye_view()");
          break;
        case 3:
          _krpano.call("cm_stereographic_view()");
          break;
        case 4:
          _krpano.call("cm_pannini_view()");
          break;
        case 5:
          _krpano.call("cm_ball_view()");
          break;
        case 6:
          _krpano.call("cm_littleplanet_view()");
      }
  },
  loadScene: function (e) {
    e = JSON.parse(e);
    _waseeVRObj.isLoadScene ||
      (null == e.vars && (e.vars = null),
      e.name || (e.name = "scene" + e.id),
      e.id || (e.id = e.name.substring(5)),
      !_krpano.get("scene[" + e.name + "]") && _waseeVRObj.loadpanoCount > 0
        ? _waseeVRObj.toast("无相关场景")
        : _waseeVRObj.sceneName != e.name &&
          ((_waseeVRObj.isLoadScene = !0),
          _krpano.call(
            "loadscene(" +
              e.name +
              "," +
              e.vars +
              ", " +
              (_panoGroupObj.panoOFFgroup[e.id] &&
              _panoGroupObj.panoOFFgroup[_waseeVRObj.sceneId].media_type ==
                _panoGroupObj.panoOFFgroup[e.id].media_type
                ? "MERGE"
                : "KEEPSCENES") +
              ", BLEND(1.0, easeInCubic))"
          )));
  },
  autorotate: function (e) {
    let a = "",
      t = "";
    1 == __WASEE_DATA__.product.switch.overallNav.enableLookto &&
      ((a =
        'stopdelayedcall(bomb);delete(bt);jscall("if(_waseeVRObj.is_preantostare){clearTimeout(_waseeVRObj.is_preantostare);delete _waseeVRObj.is_preantostare;};")'),
      (t = "bombtimer(0)")),
      (e = Number(e)),
      1 == e
        ? (1 == __WASEE_DATA__.product.switch.overallNav.autorotate &&
          0 == this.autorotatecount
            ? setTimeout(function () {
                krp.call("autorotate.start();" + t);
              }, 4200)
            : krp.call("autorotate.start();" + t),
          this.autorotatecount++)
        : krp.call("autorotate.stop();" + a);
  },
  setgyro: function (e) {
    (e = Number(e)),
      1 == e
        ? krp.set("plugin[gyro].enabled", "true")
        : krp.set("plugin[gyro].enabled", "false");
  },
  setVR: function (e) {
    (e = Number(e)),
      1 == e ? krp.call("webvr.enterVR()") : krp.call("webvr.exitvr()");
  },
  addComment: function (e) {
    if (!($("#subinformain .addmessage").length > 0)) {
      var a =
        '<div class="sidelayerSS addmessage' +
        (_waseeVRObj.isDesktop ? " pc" : "") +
        '"><div class="close"></div><div class="bottom"><span class="ycang">' +
        _langObj.yincang +
        '</span><span class="changey disabled2">' +
        _langObj.huanyipi +
        '</span><span class="close flex__center none">' +
        _langObj.cancel +
        '</span></div><div class="body"><input type="text" class="scontent" disabled="disabled" maxlength="30" placeholder="' +
        _langObj.shuoshuotishi +
        '"><span class="submit">' +
        _langObj.send +
        "</span></div></div>";
      $("#subinformain").append(a),
        4 == __WASEE_DATA__.product.panoinfo.skinItem &&
          ($(".addmessage .ycang")
            .addClass("clangugee")
            .attr("data-lname", "yincang"),
          $(".addmessage .changey")
            .addClass("clangugee")
            .attr("data-lname", "huanyipi"),
          $(".addmessage .scontent").addClass("clangugee").attr({
            "data-lname": "shuoshuotishi",
            "data-lname2": "shuoshuotishi2",
          }),
          $(".addmessage .submit")
            .addClass("clangugee")
            .attr("data-lname", "send")),
        krp.get("autorotate.isrotating") &&
          ((window.isrotating = krp.get("autorotate.isrotating")),
          1 == __WASEE_DATA__.product.switch.overallNav.enableLookto
            ? krp.call("autorotate.stop();stopdelayedcall(bomb);")
            : krp.call("autorotate.stop();")),
        _waseeVRObj.setPageParrama(0, "comment"),
        setTimeout(function () {
          $("#subinformain .addmessage").addClass("on");
        }, 10);
      var t = _langObj.shuoshuotishi2;
      __INFO__.user.id > 0 || __INFO__.user.anchor_auth_id > 0
        ? ($(".addmessage .scontent").attr("ylogin", 1).removeAttr("disabled"),
          _krpano.call("addNewCommentHotspot(" + __INFO__.user.headimg + ")"))
        : ((t = _langObj.shuoshuotishi),
          $(".addmessage .body .scontent").css("pointer-events", "none"),
          $(".addmessage .body").click(function () {
            _waseeVRObj.wxAuthLogin({ objType: "21009" });
          })),
        $(".addmessage .scontent").attr("placeholder", t),
        (_waseeVRObj.isSaying = !0);
      var o = _waseeVRObj.isDesktop ? "click" : "touchend";
      $(".addmessage")
        .on(o, ".ycang", function () {
          $(this).hasClass("open")
            ? (_krpano.call("showAllHotspot(21009)"), $(this).html("隐藏"))
            : (_krpano.call("hideAlltHotspot(21009)"), $(this).html("显示")),
            $(this).toggleClass("open");
        })
        .on(o, ".close", function () {
          (_waseeVRObj.isSaying = !1),
            _waseeVRObj.setPageParrama(1),
            $("#subinformain .addmessage").remove(),
            paramObj._isForAPP &&
              _waseeVRObj__isApp.API_Wasee_Front_CallBack(1, {});
          var e =
            "removehotspot(comment_newspot);removeplugin(comment_newspot_img_bg);removeplugin(comment_newspot_img_bg2);removeplugin(comment_newspot_img_body);removeplugin(comment_newspot_img);removehotspot(comment_newspot_txt);showAllHotspot();";
          window.isrotating &&
            ((e += "autorotate.start();"),
            1 == __WASEE_DATA__.product.switch.overallNav.enableLookto &&
              (e += "bombtimer(0);"),
            delete window.isrotating),
            _krpano.call(e);
        })
        .on("keyup input", ".scontent", function (e) {
          _krpano.set("hotspot[comment_newspot_txt].html", $(this).val()),
            "13" == e.keyCode && $(".addmessage .submit").click();
        })
        .on(o, ".submit", function () {
          var e = $(this);
          if (!_waseeVRObj.isSubmit)
            if (
              ((_waseeVRObj.subHotspotData.pool_id = 0),
              (_waseeVRObj.subHotspotData.sceneid = _waseeVRObj.sceneId),
              (_waseeVRObj.subHotspotData.location_obj_type = 121),
              (_waseeVRObj.subHotspotData.obj_type = 21009),
              (_waseeVRObj.subHotspotData.content = $(
                ".addmessage .scontent"
              ).val()),
              _waseeVRObj.subHotspotData.content &&
                "" != _waseeVRObj.subHotspotData.content)
            ) {
              (_waseeVRObj.subHotspotData.ath = encodeURI(
                _krpano.get("hotspot[comment_newspot].ath")
              )),
                (_waseeVRObj.subHotspotData.atv = encodeURI(
                  _krpano.get("hotspot[comment_newspot].atv")
                ));
              var a =
                location.protocol +
                "//" +
                location.host +
                "/Wasee/Cityhome/doAddHotspot";
              (_waseeVRObj.isSubmit = !0),
                e.addClass("disabled2"),
                _waseeVRObj.toast("提交中..."),
                $.ajax({
                  type: "GET",
                  url: a,
                  data: _waseeVRObj.subHotspotData,
                  success: function (a) {
                    if (
                      ((_waseeVRObj.isSubmit = !1),
                      e.removeClass("disabled2"),
                      1 == a.status)
                    ) {
                      (_waseeVRObj.isSaying = !1),
                        _waseeVRObj.setPageParrama(1),
                        $("#subinformain .addmessage").remove(),
                        paramObj._isForAPP &&
                          _waseeVRObj__isApp.API_Wasee_Front_CallBack(1, {}),
                        (_waseeVRObj.getAddhotspotId = a.id);
                      var t =
                        "removehotspot(comment_newspot);removeplugin(comment_newspot_img_bg);removeplugin(comment_newspot_img_bg2);removeplugin(comment_newspot_img_body);removeplugin(comment_newspot_img);removehotspot(comment_newspot_txt);showAllHotspot();commentHotspot(" +
                        _waseeVRObj.getAddhotspotId +
                        "," +
                        __INFO__.user.headimg +
                        "," +
                        _waseeVRObj.subHotspotData.content +
                        "," +
                        _waseeVRObj.subHotspotData.ath +
                        "," +
                        _waseeVRObj.subHotspotData.atv +
                        ");";
                      window.isrotating &&
                        ((t += "autorotate.start();"),
                        1 ==
                          __WASEE_DATA__.product.switch.overallNav
                            .enableLookto && (t += "bombtimer(0);"),
                        delete window.isrotating),
                        _krpano.call(t);
                    } else _waseeVRObj.toast(a.info);
                  },
                });
            } else _waseeVRObj.toast("请说点什么");
        })
        .on(o, ".changey", function () {
          $("#subinformain .addmessage .changey").addClass("disabled2");
          var e = "",
            a = _waseeVRObj.pageHotlistData.objData;
          21009 == a.obj_type && (e = "comment_spot");
          var t = _waseeVRObj.inforCommentHotIdlist.length;
          if (t > 0) {
            for (var o = "", s = "", i = 0; i < t; i++) {
              var n = e + _waseeVRObj.inforCommentHotIdlist[i];
              (o += n + "|"),
                (s +=
                  n +
                  "_txt|" +
                  n +
                  "_bg|" +
                  n +
                  "_bg2|" +
                  n +
                  "_body|" +
                  n +
                  "_img|");
            }
            "" != o &&
              (_waseeVRObj.deletePanoelem("hotspot", "", o),
              _waseeVRObj.deletePanoelem("plugin", "", s));
          }
          _waseeVRObj.pageHotlistData.pageIndex >
            _waseeVRObj.pageHotlistData.totalPage &&
            (_waseeVRObj.pageHotlistData.pageIndex = 1);
          var r = {};
          (r.data = a),
            (r.data.pageIndex = _waseeVRObj.pageHotlistData.pageIndex),
            (r.callBack = a.callBack),
            _waseeVRObj.getHotspotDataForScene(r);
        });
    }
  },
  toggle_compass: function (e) {
    (_waseeVRObj.compassHeight || _waseeVRObj.compassY) &&
      (0 == e
        ? _krpano.call(
            "tween(layer[compass].y," + _waseeVRObj.compassHeight + ",0.3)"
          )
        : _krpano.call(
            "tween(layer[compass].y," + _waseeVRObj.compassY + ",0.3)"
          ));
  },
  API_Auth_cbOnLoginResult: function (e) {
    if (!this.isLoading) {
      this.isLoading = !0;
      $.ajax({
        type: "GET",
        url:
          location.protocol +
          "//" +
          location.host +
          "/Wasee/Cityhome/doQuickSetSession",
        data: { wasee_token: e },
        success: function (e) {
          (_waseeVRObj__isApp.isLoading = !1),
            1 == e.status &&
              (__INFO__.user = {
                id: e.data.anchor_id,
                headimg: e.data.headimgurl,
                nickname: e.data.nickname,
              });
        },
      });
    }
  },
  API_Wasee_Front_CallBack: function (e, a) {
    paramObj._isForAPP &&
      (_waseeVRObj.isIOS
        ? window.webkit.messageHandlers.API_Wasee_Front_CallBack.postMessage({
            type: e,
            obj: a,
          })
        : _waseeVRObj.isAndroid &&
          window.JsBridge.API_Wasee_Front_CallBack(
            e.toString(),
            JSON.stringify(a)
          ));
  },
  getAppplacardUrl: function () {
    return paramObj._isWaseehost
      ? JSON.stringify({
          status: 1,
          info: "获取成功",
          url:
            "https://www.wasee.com/wasee/VRHome/appplacard?sid=" +
            paramObj.krpano.sceneId +
            "&pid=" +
            paramObj.krpano.krpano_id,
        })
      : [];
  },
  getAppvideoxyUrl: function () {
    if (paramObj._isWaseehost) {
      let e = _panoGroupObj.panoOFFgroup[paramObj.krpano.sceneId].gid,
        a = 0;
      for (let t = 0; t < _panoGroupObj.panogroupData.length; t++) {
        const o = _panoGroupObj.panogroupData[t];
        if (o.id == e) {
          let e = o.scenes;
          for (let o = 0; o < e.length; o++) {
            const s = e[o];
            if (paramObj.krpano.sceneId == s.id) {
              if (o >= e.length - 1) {
                let e = t + 1;
                e >= _panoGroupObj.panogroupData_Len && (e = 0),
                  (a = _panoGroupObj.panogroupData[e].scenes[0].id);
              } else a = e[o + 1].id;
              break;
            }
          }
          break;
        }
      }
      return JSON.stringify({
        status: 1,
        info: "获取成功",
        url:
          "https://www.wasee.com/wasee/VRHome/videoxy?sid=" +
          paramObj.krpano.sceneId +
          "&pid=" +
          paramObj.krpano.krpano_id +
          "&tosid=" +
          a,
      });
    }
    return [];
  },
}),
  (window.playbgsound = function () {
    if (
      (document.getElementById("audio_bgvoice2") &&
        document.getElementById("audio_bgvoice2").play(),
      document.getElementById("audio_xianlu_guide") &&
        document.getElementById("audio_xianlu_guide").play(),
      _waseeVRObj.is_ememap >= 1 &&
        2 != _waseeVRObj.is_ememap &&
        3 != _waseeVRObj.is_ememap)
    )
      delete window.playbgsound;
    else {
      for (var e = ["bgmusic", "bgvoice"], a = 0; a <= 1; a++)
        if (_soundObj.soundList[e[a]]) {
          if (
            0 == _soundObj.soundList[e[a]].autoplay ||
            0 == _soundObj.soundList[e[a]].autoplay
          )
            continue;
          "bgvoice" == e[a] &&
            _waseeVRObj.sceneId > 0 &&
            _panoGroupObj.panoOFFgroup[_waseeVRObj.sceneId].voice &&
            2 ==
              _panoGroupObj.panoOFFgroup[_waseeVRObj.sceneId].voice.voicetype &&
            (document.getElementById("audio_" + e[a]) &&
              document.getElementById("audio_" + e[a]).play(),
            setTimeout(function () {
              document.getElementById("audio_bgvoice") &&
                document.getElementById("audio_bgvoice").paused &&
                (document.getElementById("audio_bgvoice").play(),
                setTimeout(function () {
                  document.getElementById("audio_bgvoice") &&
                    document.getElementById("audio_bgvoice").paused &&
                    document.getElementById("audio_bgvoice").play();
                }, 1e3));
            }, 1e3)),
            document.getElementById("audio_" + e[a]) &&
              document.getElementById("audio_" + e[a]).play(),
            (_soundObj.soundList[e[a]].isplay = !0);
        } else
          "bgvoice" == e[a] &&
          _waseeVRObj.sceneId > 0 &&
          _panoGroupObj.panoOFFgroup[_waseeVRObj.sceneId].voice &&
          2 == _panoGroupObj.panoOFFgroup[_waseeVRObj.sceneId].voice.voicetype
            ? "" !=
                _panoGroupObj.panoOFFgroup[_waseeVRObj.sceneId].voice
                  .voiceurl &&
              (document.getElementById("audio_" + e[a]).play(),
              setTimeout(function () {
                $("#audio_bgvoice").length > 0 &&
                  document.getElementById("audio_bgvoice").paused &&
                  (document.getElementById("audio_bgvoice").play(),
                  setTimeout(function () {
                    $("#audio_bgvoice").length > 0 &&
                      document.getElementById("audio_bgvoice").paused &&
                      document.getElementById("audio_bgvoice").play();
                  }, 1e3));
              }, 1e3))
            : (0 == $("#audio_" + e[a]).length &&
                $("#pano_body").append(
                  '<audio id="audio_' +
                    e[a] +
                    '" autoplay src="' +
                    paramObj.resourceWasee +
                    '/js/wasee.mp3"></audio>'
                ),
              document.getElementById("audio_" + e[a]).play());
      "object" == typeof _waseeVRObj &&
        _waseeVRObj.loadpanoCount > 1 &&
        delete window.playbgsound;
    }
  }),
  document.addEventListener($.touchEvents.start, function () {
    "function" == typeof window.playbgsound && window.playbgsound();
  }),
  (window._soundObj = {
    isbgmClose: !1,
    isbgvClose: !1,
    soundList: {},
    playsound: function (e, a, t, o) {
      if (
        1 == paramObj.isbuyed &&
        paramObj.charge_price > 0 &&
        "bgvoice" == e &&
        (0 == _waseeVRObj.is_scenic ||
          (_waseeVRObj.is_scenic > 0 && 1 != _scenicObj.data.playtype)) &&
        !_waseeVRObj.chargeObj.isBuySoundcharge({
          id: _waseeVRObj.sceneId,
          voiceurl: a,
          showpay: !0,
        })
      )
        return;
      if (
        _waseeVRObj.is_ememap >= 1 &&
        2 != _waseeVRObj.is_ememap &&
        3 != _waseeVRObj.is_ememap &&
        _waseeVRObj.isfememap()
      )
        return;
      let s = this,
        i = null,
        n = " autoplay";
      if (
        ((this._sceneid =
          o && o.sceneid > 0
            ? o.sceneid
            : _waseeVRObj.sceneId > 0
            ? _waseeVRObj.sceneId
            : 0),
        (this._sceneMeta = {}),
        o && "scenic" == o.from && o.sceneid > 0
          ? (this._sceneMeta =
              _waseeVRObj.sceneMetaList &&
              _waseeVRObj.sceneMetaList[this._sceneid]
                ? _waseeVRObj.sceneMetaList[this._sceneid]
                : _waseeVRObj.sceneMeta)
          : (!o || ("object" == typeof o && "overal" != o.from)) &&
            (this._sceneMeta = _waseeVRObj.sceneMeta),
        "object" == typeof o &&
          ((0 != o.autoplay && 0 != o.autoplay) ||
            ((n = ""), $("#audio_" + e).removeAttr("autoplay"))),
        this.soundList[e])
      ) {
        if (
          "bgvoice" == e &&
          _panoGroupObj.panoOFFgroup[this._sceneid] &&
          _panoGroupObj.panoOFFgroup[this._sceneid].voice &&
          2 == _panoGroupObj.panoOFFgroup[this._sceneid].voice.voicetype
        ) {
          let o = this._sceneMeta.voicescale;
          _projectiveImg.setAttr({
            url: a,
            changeurl: !1,
            id: "audio_" + e,
            attrRibreid: (t ? " loop" : "") + n,
            videoclearbg:
              _panoGroupObj.panoOFFgroup[this._sceneid].voice.videoclearbg,
            videoposit:
              _panoGroupObj.panoOFFgroup[this._sceneid].voice.videoposit,
            isend_hide: !0,
            rewidth: (_waseeVRObj.isDesktop ? 320 : 180) * o,
          });
        }
        (i = document.getElementById("audio_" + e)),
          "object" != typeof o || (0 != o.autoplay && 0 != o.autoplay)
            ? $("#audio_" + e).attr(n)
            : $("#audio_" + e).removeAttr("autoplay"),
          t
            ? $("#audio_" + e).attr("loop", "true")
            : $("#audio_" + e).removeAttr("loop"),
          this.soundList[e].url != a &&
            (s.removesubtitle(), $("#audio_" + e).attr("src", a), i.pause()),
          (this.soundList[e] = {
            name: e,
            url: a,
            loop: t,
            isplay: this.soundList[e].isplay,
            temporary_pause: this.soundList[e].temporary_pause,
          }),
          "object" == typeof o && $.extend(this.soundList[e], o),
          "played" == _waseeVRObj.autoGuidesObj.status &&
            this.soundList.guide &&
            this.soundList.guide.isplay &&
            ("bgmusic" == e || "bgvoice" == e) &&
            ($("#audio_" + e).attr("src", a), i.pause());
      } else {
        this.soundList[e] = {
          name: e,
          url: a,
          loop: t,
          isplay: !1,
          temporary_pause: !1,
        };
        var r = "";
        if (
          (t && (r = " loop"),
          "object" == typeof o && $.extend(this.soundList[e], o),
          "bgvoice" == e &&
            _panoGroupObj.panoOFFgroup[this._sceneid] &&
            _panoGroupObj.panoOFFgroup[this._sceneid].voice &&
            2 == _panoGroupObj.panoOFFgroup[this._sceneid].voice.voicetype &&
            (!o || ("object" == typeof o && "overal" != o.from)))
        ) {
          let t = this._sceneMeta.voicescale,
            o = {
              url: a,
              id: "audio_" + e,
              attrRibreid: r + n,
              videoclearbg:
                _panoGroupObj.panoOFFgroup[this._sceneid].voice.videoclearbg,
              videoposit:
                _panoGroupObj.panoOFFgroup[this._sceneid].voice.videoposit,
              isend_hide: !0,
              rewidth: 320 * t,
            };
          _waseeVRObj.isDesktop || (o.rewidth = 180 * t),
            _projectiveImg.onLoad(o),
            $("#audio_bgvoice2").length > 0 && $("#audio_bgvoice2").remove();
        } else
          0 == $("#audio_" + e).length &&
            $("#pano_body").append(
              '<audio id="audio_' +
                e +
                '" src="' +
                a +
                '"' +
                r +
                n +
                "></audio>"
            );
        if (
          (_waseeVRObj.is_scenic > 0 &&
            (_scenicObj.data.iseventlistenervoice ||
              _scenicObj.eventlistenervoice()),
          (document.getElementById("audio_" + e).src = a),
          t && (document.getElementById("audio_" + e).loop = !0),
          document.getElementById("audio_" + e).load(),
          "bgmusic" == e || "bgvoice" == e)
        ) {
          var p = document.getElementById("audio_" + e),
            l = "bgmusic" == e ? "music" : "voice";
          !_waseeVRObj.isDesktop &&
            ("object" != typeof o || null == o || (o && 0 != o.autoplay)) &&
            p.play(),
            $("." + l).removeClass("none"),
            p.addEventListener("play", function () {
              window.playbgsound && delete window.playbgsound,
                (_soundObj.isbgvClose = !1),
                $("." + l).removeClass("none close"),
                _waseeVRObj.is_scenic > 0 &&
                  $(".navrightbottom .voice").addClass("on"),
                (s.soundList[e].isplay = !0),
                (s.soundList[e].temporary_pause = !1),
                s.soundList.othermusic &&
                  (_soundObj.stopsound("othermusic"),
                  _soundObj.soundList.othermusic.sceneId &&
                    _soundObj.soundList.othermusic.hostname &&
                    _panoGroupObj.panoOFFgroup[
                      _soundObj.soundList.othermusic.sceneId
                    ].hotspots[_soundObj.soundList.othermusic.hostname] &&
                    ((_panoGroupObj.panoOFFgroup[
                      _soundObj.soundList.othermusic.sceneId
                    ].hotspots[_soundObj.soundList.othermusic.hostname].isplay =
                      !1),
                    delete _soundObj.soundList.othermusic.sceneId,
                    delete _soundObj.soundList.othermusic.hostname)),
                "bgvoice" == e &&
                  s._sceneMeta &&
                  1 == s._sceneMeta.issubtitle &&
                  s._sceneMeta.subtitle.length > 10 &&
                  s.setsubtitle(s._sceneid),
                "bgvoice" == e &&
                  _panoGroupObj.panoOFFgroup[s._sceneid] &&
                  _panoGroupObj.panoOFFgroup[s._sceneid].voice &&
                  1 ==
                    _panoGroupObj.panoOFFgroup[s._sceneid].voice.isvoicevideo &&
                  $(".goyoulan").length > 0 &&
                  $(".goyoulan").remove();
            }),
            p.addEventListener("pause", function () {
              if (0 == document.getElementById("audio_" + e).paused) return !1;
              $("." + l).addClass("close"),
                _waseeVRObj.is_scenic > 0 &&
                  $(".navrightbottom .voice").removeClass("on"),
                s.soundList[e] && (s.soundList[e].isplay = !1),
                "bgvoice" == e &&
                  $(".subtitlebody").length > 0 &&
                  (s.bg_currentTime &&
                    (clearInterval(s.bg_currentTime), delete s.bg_currentTime),
                  _waseeVRObj.is_scenic > 0 &&
                    (0 == _waseeVRObj.sceneId || _waseeVRObj.sceneMapId > 0) &&
                    $(".subtitlebody").addClass("none"));
            }),
            "bgvoice" == e &&
              (s.removesubtitle(),
              p.addEventListener("ended", function () {
                $(".subtitlebody").length > 0 &&
                  (s.bg_currentTime &&
                    (clearInterval(s.bg_currentTime), delete s.bg_currentTime),
                  $(".subtitlebody").addClass("none")),
                  (!o || "scenic" != o.from) &&
                    _waseeVRObj.sceneId > 0 &&
                    3 ==
                      _panoGroupObj.panoOFFgroup[_waseeVRObj.sceneId].voice
                        .voiceLoop &&
                    "played" != _waseeVRObj.autoGuidesObj.status &&
                    "paused" != _waseeVRObj.autoGuidesObj.status &&
                    (_waseeVRObj.sceneMeta.voiceendtime > 0
                      ? (this.to_nextscene = setTimeout(function () {
                          _waseeVRObj.isLoadScene ||
                            _waseeVRObj.toLoadscene({
                              name: _waseeVRObj.autonextid,
                            });
                        }, _waseeVRObj.sceneMeta.voiceendtime))
                      : _waseeVRObj.toLoadscene({
                          name: _waseeVRObj.autonextid,
                        }));
              }));
        } else {
          let a = document.getElementById("audio_" + e),
            t = "xianlu_guide" != e && "guide" != e;
          a.addEventListener("play", function () {
            (s.soundList[e].isplay = !0),
              t &&
                0 == $(".closesound").length &&
                (!o || (o && 0 != o.closesound)) &&
                $("#subinformain").append(
                  '<div class="closesound flex__center" onclick="_soundObj.stopsound(\'' +
                    e +
                    "');_soundObj.stopsound('allsound','temporary_nopause');\"><i class=\"icimg\"><img src=\"" +
                    paramObj.resourceWasee +
                    '/home/vrpano/img/music.png"></i><span>' +
                    _langObj.guanbiyiny +
                    "</span></div>"
                );
          }),
            a.addEventListener("ended", function () {
              s.soundList[e] &&
                ((s.soundList[e].isplay = !1),
                ("xianlu_guide" != e && "guide" != e) || delete s.soundList[e]),
                $(".closesound").remove();
            }),
            a.addEventListener("pause", function () {
              s.soundList[e] && (s.soundList[e].isplay = !1),
                $(".closesound").remove();
            });
        }
        i = document.getElementById("audio_" + e);
      }
      (document.getElementById("audio_" + e).volume = 1),
        (document.getElementById("audio_" + e).muted = !1),
        "object" == typeof o &&
          o.volume >= 0 &&
          ((document.getElementById("audio_" + e).volume = o.volume),
          0 == o.volume && (document.getElementById("audio_" + e).muted = !0)),
        "bgmusic" != e && "bgvoice" != e
          ? (i.addEventListener(
              "ended",
              function () {
                "bgmusic" != e &&
                  "bgvoice" != e &&
                  ("xianlu_guide" == e ||
                    "guide" == e ||
                    s.soundList.xianlu_guide ||
                    s.soundList.guide ||
                    _soundObj.stopsound("allsound", "temporary_nopause")),
                  o &&
                    o.end_callBack &&
                    "function" == typeof o.end_callBack &&
                    o.end_callBack();
              },
              !1
            ),
            _soundObj.stopsound(
              "allsound",
              "temporary_pause",
              "object" == typeof o && o.tiaoguo ? o.tiaoguo : ""
            ),
            (s.soundList[e].temporary_pause = !1),
            i.play())
          : "bgmusic" != e || s.isbgmClose
          ? "bgvoice" != e ||
            s.isbgvClose ||
            ("object" != typeof o || null == o || (o && 0 != o.autoplay)
              ? i.play()
              : "" == n && $(".voice").addClass("close"))
          : "object" != typeof o || null == o || (o && 0 != o.autoplay)
          ? i.play()
          : "" == n && $(".music").addClass("close"),
        "othermusic" == e &&
          (o && o.sceneId && o.hostname
            ? ((_soundObj.soundList.othermusic.sceneId = o.sceneId),
              (_soundObj.soundList.othermusic.hostname = o.hostname))
            : (delete _soundObj.soundList.othermusic.sceneId,
              delete _soundObj.soundList.othermusic.hostname));
    },
    stopsound: function (e, a, t) {
      let o = this;
      if ("allsound" == e) {
        let e = o.soundList;
        for (let s in e) {
          const i = e[s];
          if ("string" == typeof t) {
            let e = t.split("|"),
              a = !1;
            for (let t = 0; t < e.length; t++) {
              const o = e[t];
              if (i.name == o) {
                a = !0;
                break;
              }
            }
            if (a) continue;
          }
          "temporary_pause" == a && i.isplay
            ? (document.getElementById("audio_" + i.name).pause(),
              (this.soundList[s].temporary_pause = !0))
            : "temporary_nopause" == a &&
              i.temporary_pause &&
              "string" == typeof o.soundList[s].url
            ? (o.soundList[s].url.length > 10 &&
                document.getElementById("audio_" + i.name).play(),
              (o.soundList[s].temporary_pause = !1))
            : "temporary_pause_gq" == a && i.isplay
            ? (document.getElementById("audio_" + i.name).pause(),
              (this.soundList[s].temporary_pause_gq = !0))
            : "temporary_nopause_gq" == a &&
              i.temporary_pause_gq &&
              "string" == typeof o.soundList[s].url &&
              (o.soundList[s].url.length > 10 &&
                document.getElementById("audio_" + i.name).play(),
              delete o.soundList[s].temporary_pause_gq);
        }
      } else
        o.soundList[e] &&
          (o.soundList[e].isplay ||
            (document.getElementById("audio_" + e) &&
              !document.getElementById("audio_" + e).paused)) &&
          (document.getElementById("audio_" + e).pause(),
          (o.soundList[e].isplay = !1),
          "temporary_pause" == a && (this.soundList[e].temporary_pause = !0));
    },
    setsubtitle: function (e) {
      let a =
          e > 0 && _waseeVRObj.sceneMetaList && _waseeVRObj.sceneMetaList[e]
            ? _waseeVRObj.sceneMetaList[e]
            : _waseeVRObj.sceneMeta,
        t = document.getElementById("audio_bgvoice"),
        o = JSON.parse(a.subtitle);
      this.bg_currentTime &&
        (clearInterval(this.bg_currentTime), delete this.bg_currentTime),
        t &&
          (this.bg_currentTime = setInterval(function () {
            let e = 1e3 * t.currentTime;
            for (let a = 0; a < o.length; a++) {
              const t = o[a];
              e >= t.begin_time &&
                e <= t.end_time &&
                (0 == $(".subtitlebody").length &&
                  $("#subinformain").append('<div class="subtitlebody"></div>'),
                a != $(".subtitlebody").attr("data-index") &&
                  $(".subtitlebody").attr("data-index", a).html(t.text),
                $(".subtitlebody").removeClass("none"));
            }
            let a = 48,
              s = 0;
            if (
              _waseeVRObj.is_scenic > 0 &&
              (0 == _waseeVRObj.sceneId || _waseeVRObj.sceneMapId > 0)
            )
              a =
                $(".scenicnavbottom .morelist.desktop.on").length > 0
                  ? paramObj._height -
                    ($(".scenicnavbottom .morelist.desktop.on").offset().top -
                      14)
                  : paramObj._height -
                    ($(".scenicnavbottom").offset().top - 14);
            else {
              switch (__WASEE_DATA__.product.panoinfo.skinItem) {
                case 3:
                  $(".pano_bottom_item .hyrlbg_sub").length > 0 &&
                    ((s = 1),
                    (a = $(".pano_bottom_item .hyrlbg_sub").offset().top),
                    a > paramObj._height &&
                      ((a = $(".pano_bottom_item .hyrlbg_ind").offset().top),
                      a > paramObj._height &&
                        ((a = $(".pano_bottom_item .hyrlbg").offset().top),
                        a > paramObj._height &&
                          (a = $(".pano_bottom_item .hyrlbg2").offset().top))),
                    (a = paramObj._height - (a - 14)),
                    !_waseeVRObj.isDesktop &&
                      $(".videocontrol").length > 0 &&
                      !$(".videocontrol").hasClass("onhide") &&
                      (a =
                        paramObj._height -
                        ($(".videocontrol").offset().top - 14)));
                  break;
                default:
                  $(".pano_bottom_item").hasClass("onhide")
                    ? 0 == __WASEE_DATA__.product.panoinfo.skinItem
                      ? !_waseeVRObj.isDesktop &&
                        $(".videocontrol").length > 0 &&
                        !$(".videocontrol").hasClass("onhide") &&
                        (a =
                          paramObj._height -
                          ($(".videocontrol").offset().top - 14))
                      : (1 == __WASEE_DATA__.product.panoinfo.skinItem &&
                          (a =
                            paramObj._height -
                            ($(".house-menus").offset().top - 14)),
                        $(".videocontrol").length > 0 &&
                          !$(".videocontrol").hasClass("onhide") &&
                          (a =
                            paramObj._height -
                            ($(".videocontrol").offset().top - 14)))
                    : ((s = 1),
                      (a =
                        paramObj._height -
                        ($(".pano_bottom_item .item_top").offset().top - 14)),
                      $(".videocontrol").length > 0 &&
                        !$(".videocontrol").hasClass("onhide") &&
                        $(".pano_bottom_item .item_top").length > 0 &&
                        $(".videocontrol").offset().top <
                          $(".pano_bottom_item .item_top").offset().top &&
                        (a =
                          paramObj._height -
                          ($(".videocontrol").offset().top - 14)));
              }
              0 == s &&
                $(".speguidetail").length > 0 &&
                ((a =
                  paramObj._height - ($(".speguidetail").offset().top - 14)),
                !_waseeVRObj.isDesktop &&
                  $(".videocontrol").length > 0 &&
                  !$(".videocontrol").hasClass("onhide") &&
                  (a =
                    paramObj._height - ($(".videocontrol").offset().top - 14)));
            }
            $(".subtitlebody").css("bottom", (a > 0 ? a : 48) + "px");
          }, 1e3));
    },
    removesubtitle: function () {
      $(".subtitlebody").length > 0 &&
        (this.bg_currentTime &&
          (clearInterval(this.bg_currentTime), delete this.bg_currentTime),
        $(".subtitlebody").remove());
    },
    imgbodyData: {
      isplay: !1,
      alltime: 0,
      playsound: function (e) {
        let a = this;
        if (e && e.length > 10)
          if (
            (_soundObj.stopsound("othermusic"),
            _soundObj.stopsound("allsound", "temporary_pause"),
            0 == $("#audio_playsound").length)
          ) {
            $("#pano_body").append(
              '<audio id="audio_playsound" autoplay src="' + e + '"></audio>'
            );
            let t = document.getElementById("audio_playsound");
            (a.audio = t),
              t.addEventListener("canplay", function () {
                (a.alltime = t.duration),
                  $(".imgbody .bodycontainer .musicbody .alltime").empty(),
                  $(".imgbody .bodycontainer .musicbody .alltime").html(
                    a.formatTime(a.alltime)
                  );
              }),
              t.addEventListener("play", function () {
                $(".imgbody .bodycontainer .musicbody .emmusic")
                  .removeClass("icon_play")
                  .addClass("icon_pause"),
                  (a.isplay = !0);
              }),
              t.addEventListener("pause", function () {
                $(".imgbody .bodycontainer .musicbody .emmusic")
                  .removeClass("icon_pause")
                  .addClass("icon_play"),
                  (a.isplay = !1);
              }),
              t.addEventListener("ended", function () {
                $(".imgbody .bodycontainer .musicbody .emmusic")
                  .removeClass("icon_pause")
                  .addClass("icon_play"),
                  $(".imgbody .bodycontainer .musicbody .timeing").html(
                    "00:00"
                  ),
                  $(".imgbody .bodycontainer .musicbody .jdu").css("width", 0),
                  (a.isplay = !1);
              }),
              t.addEventListener("timeupdate", function () {
                let e = a.audio.currentTime;
                $(".imgbody .bodycontainer .musicbody .timeing").html(
                  a.formatTime(e)
                ),
                  _waseeVRObj.isIOS &&
                    $(".imgbody .bodycontainer .musicbody .timeing").html(
                      a.formatTime(e)
                    );
                var t = e / a.alltime;
                $(".imgbody .bodycontainer .musicbody .jdu").css(
                  "width",
                  100 * t + "%"
                );
              });
          } else (a.audio.src = e), a.audio.load(), a.audio.play();
      },
      formatTime: function (e) {
        let a = e;
        if (e >= 0) {
          var t = e / 60,
            o = parseInt(t);
          o < 10 && (o = "0" + o);
          var s = e % 60,
            i = Math.round(s);
          i < 10 && (i = "0" + i), (a = o + ":" + i);
        }
        return a;
      },
      stopsound: function () {
        _soundObj.imgbodyData.audio &&
          (_soundObj.imgbodyData.audio.pause(),
          _soundObj.stopsound("allsound", "temporary_nopause"));
      },
      switchsound: function () {
        _soundObj.imgbodyData.audio &&
          (_soundObj.imgbodyData.audio.paused
            ? _soundObj.imgbodyData.audio.play()
            : _soundObj.imgbodyData.audio.pause());
      },
      _A1: function () {
        (this.mySwiper_imgbodyitem = new Swiper(".imgbody .bodycontainer", {
          slidesPerView: 1,
          resistanceRatio: 0,
          prevButton: ".swiper_prev",
          nextButton: ".swiper_next",
          pagination: ".swiper-pagination",
          paginationType: "custom",
          paginationCustomRender: function (e, a, t) {
            t > 1 &&
              $(".swiperpaginationbody span").html("（" + a + "/" + t + "）");
            let o = $(
              ".imgbody .bodycontainer>.swiper-wrapper>.list:eq(" +
                (a - 1) +
                ")"
            ).attr("data-title");
            "" == o && (o = $(".imgbody .bodylist").attr("data-title")),
              $(".swiperpaginationbody a").html(o);
          },
          onSlideChangeStart: function () {
            $(".imgbody .bodycontainer>.swiper-wrapper .swiper-slide-active")
              .siblings()
              .find(".moveimgbody")
              .removeClass("moveimgbody")
              .find(".moveimg")
              .removeClass("moveimg"),
              _soundObj.imgbodyData.showmoveimg();
          },
          onSlideChangeEnd: function (e) {
            if (
              ($(
                ".imgbody .bodycontainer .list:eq(" +
                  e.previousIndex +
                  ") .right .top .swiper-wrapper"
              ).length > 0 &&
                $(
                  ".imgbody .bodycontainer .list:eq(" +
                    e.previousIndex +
                    ") .right .top .swiper-wrapper"
                ).css("transform", "inherit"),
              $(
                ".imgbody .bodycontainer .list.swiper-slide-active .right .top .swiper-wrapper .swiper-slide"
              ).length > 0)
            ) {
              $(
                ".imgbody .bodycontainer .list.swiper-slide-active .right .top .swiper-wrapper"
              ).css("transform", "inherit"),
                $(
                  ".imgbody .bodycontainer .list.swiper-slide-active .right .top .swiper-wrapper .swiper-slide"
                ).length > 1
                  ? $(
                      ".imgbody .bodylist .bodycontainer>.swiper-wrapper .list.swiper-slide-active .swiper-container .imgcontrool"
                    ).removeClass("none")
                  : $(
                      ".imgbody .bodylist .bodycontainer>.swiper-wrapper .list.swiper-slide-active .swiper-container .imgcontrool"
                    ).remove(),
                _soundObj.imgbodyData._A2();
              let e = $(
                  ".imgbody .bodylist .bodycontainer>.swiper-wrapper .list.swiper-slide-active .swiper-container .swiper-wrapper .imglist:eq(0) div:eq(0)"
                ),
                a = e.attr("data-url"),
                t = e.attr("data-width"),
                o = e.attr("data-height");
              if (
                (e.parent().addClass("moveimgbody"),
                _waseeVRObj.toast({
                  text: _langObj.loading + "...",
                  time: 3e8,
                }),
                t > 0 && o > 0)
              )
                _waseeVRObj.change_move_img({
                  url: a,
                  width: t,
                  height: o,
                  from: "musicimgbody",
                });
              else {
                let t = new Image();
                (t.src = a),
                  (t.onload = function () {
                    e.attr({ "data-width": t.width, "data-height": t.height }),
                      _waseeVRObj.change_move_img({
                        url: a,
                        width: t.width,
                        height: t.height,
                        from: "musicimgbody",
                      });
                  });
              }
            } else
              $(
                ".imgbody .bodylist .bodycontainer>.swiper-wrapper .list.swiper-slide-active .swiper-container .imgcontrool"
              ).remove();
            _soundObj.imgbodyData.mySwiper_imgbodyitem.params.noSwipingClass &&
              delete _soundObj.imgbodyData.mySwiper_imgbodyitem.params
                .noSwipingClass,
              _soundObj.imgbodyData.mySwiper_imgbodyimg &&
                _soundObj.imgbodyData.mySwiper_imgbodyimg.params
                  .noSwipingClass &&
                delete _soundObj.imgbodyData.mySwiper_imgbodyimg.params
                  .noSwipingClass;
          },
        })),
          $(".bodycontainer>.swiper_next").hasClass("swiper-button-disabled") ||
            $(".imgbody .bodylist .tidai.swiper_next").removeClass(
              "swiper-button-disabled"
            );
      },
      _A2: function () {
        this.mySwiper_imgbodyimg && this.mySwiper_imgbodyimg.destroy(!1),
          (this.mySwiper_imgbodyimg = new Swiper(
            ".imgbody .bodycontainer .list.swiper-slide-active .right .top",
            {
              slidesPerView: 1,
              nested: !0,
              resistanceRatio: 0,
              pagination: ".swiper-pagination-img",
              paginationClickable: !0,
              prevButton: ".swiper_prev2",
              nextButton: ".swiper_next2",
              onSlideChangeStart: function (e) {
                _soundObj.imgbodyData.showmoveimg();
              },
              onSlideChangeEnd: function () {
                _soundObj.imgbodyData.mySwiper_imgbodyitem &&
                  _soundObj.imgbodyData.mySwiper_imgbodyitem.params
                    .noSwipingClass &&
                  delete _soundObj.imgbodyData.mySwiper_imgbodyitem.params
                    .noSwipingClass,
                  _soundObj.imgbodyData.mySwiper_imgbodyimg.params
                    .noSwipingClass &&
                    delete _soundObj.imgbodyData.mySwiper_imgbodyimg.params
                      .noSwipingClass;
              },
            }
          ));
      },
      showmoveimg: function () {
        let e = $(
          ".imgbody .bodycontainer>.swiper-wrapper .swiper-slide-active .swiper-wrapper"
        );
        0 == e.length &&
          (e = $(
            ".imgbody .bodycontainer>.swiper-wrapper .list:eq(0) .swiper-container .swiper-wrapper"
          ));
        let a = e.find(".swiper-slide-active div:eq(0)"),
          t = a.attr("data-url"),
          o = a.attr("data-width"),
          s = a.attr("data-height");
        if (
          (e
            .find(".swiper-slide-active")
            .siblings()
            .removeClass("moveimgbody")
            .find(".moveimg")
            .removeClass("moveimg"),
          a.parent().addClass("moveimgbody"),
          o > 0 && s > 0)
        )
          _waseeVRObj.toast({ text: _langObj.loading + "...", time: 3e8 }),
            _waseeVRObj.change_move_img({
              url: t,
              width: o,
              height: s,
              from: "musicimgbody",
            });
        else if ("string" == typeof t && t.length > 10) {
          _waseeVRObj.toast({ text: _langObj.loading + "...", time: 3e8 });
          let e = new Image();
          (e.src = t),
            (e.onload = function () {
              a.attr({ "data-width": e.width, "data-height": e.height }),
                _waseeVRObj.change_move_img({
                  url: t,
                  width: e.width,
                  height: e.height,
                  from: "musicimgbody",
                });
            });
        }
      },
    },
  }),
  (window._waseeVRObj = {
    toast: function (e) {
      var a =
        "object" == typeof e &&
        "[object object]" == Object.prototype.toString.call(e).toLowerCase() &&
        !e.length;
      if ((a || (e = { text: e, time: 1500 }), 1 == e.close))
        return (
          this.toastTimeout && delete _waseeVRObj.toastTimeout,
          void $("#toast").remove()
        );
      0 == $("#toast").length
        ? $("body").append(
            '<div id="toast"><div class="txt"' +
              (e.attr ? e.attr : "") +
              ">" +
              e.text +
              "</div></div>"
          )
        : $("#toast").append(
            '<br><div class="txt"' +
              (e.attr ? e.attr : "") +
              ">" +
              e.text +
              "</div>"
          ),
        "function" == typeof e.callBack && e.callBack(),
        (e.time && 0 != e.time) || (e.time = 1500),
        e.time > 0 &&
          (this.toastTimeout = setTimeout(function () {
            $("#toast").remove(), delete _waseeVRObj.toastTimeout;
          }, e.time));
    },
    isLoadScene: !1,
    isSubmit: !1,
    sceneId: -1,
    cls_small: !1,
    tongYi: !1,
    isAjaxLoad: !1,
    addType: "",
    scenelistHotlistDatacount: 0,
    scenelistHotlistData: [],
    getAddhotspotId: 0,
    getCiCategoryData: "",
    getPanoCategoryData: "",
    RouteCount: 0,
    navbottom_obj_type: 0,
    isDesktop:
      !(__WASEE_DATA__.product.panoinfo.switch_nav > 0) &&
      _krpano.get("device.desktop"),
    isMobile: _krpano.get("device.mobile"),
    isBrowser: $.browserRedirect(),
    isAndroid: _krpano.get("device.android"),
    isIOS: _krpano.get("device.ios"),
    prev_sceneName: "",
    sceneName: "",
    FirstSceneName: "",
    onescene: "",
    loadpanoCount: 0,
    istouchmove: !1,
    isClick: !1,
    routeId: "",
    subHotspotData: {},
    inforCommentHotIdlist: [],
    inforCommentHotlistData: [],
    pageHotlistData: {},
    isSaying: !1,
    isWeiXinClient: $.isWeiXinClient(),
    islkmult: !1,
    is_scenic: __WASEE_DATA__.product.panoinfo.wasee_scenic_id,
    is_switch_nav: __WASEE_DATA__.product.panoinfo.switch_nav,
    is_ememap: $.getParameter("embmap"),
    status_obj: {},
    isapk: $.getParameter("apk"),
    navigator: navigator.userAgent.toLowerCase(),
    roNumcode: $.getParameter("roNumcode"),
    domHeight: {
      logoFun: function () {
        let e = this;
        $(".cintyfwliBody").length > 0
          ? setTimeout(function () {
              (e.fwHeight =
                $(".cintyfwliBody").height() +
                $(".cintyfwliBody").offset().top),
                _waseeVRObj.panoSkinreqruet({ type: "compass" }),
                "function" == typeof window.leftTop_position &&
                  window.leftTop_position();
            }, 300)
          : ((e.fwHeight = 0),
            setTimeout(function () {
              _waseeVRObj.panoSkinreqruet({ type: "compass" });
            }, 100),
            "function" == typeof window.leftTop_position &&
              window.leftTop_position());
      },
    },
    wxAuthLogin: function (e) {
      e || (e = {}), e.objType || (e.objType = 0);
      var a = !0,
        t = shareObj.link,
        o = 0;
      return (
        21009 == e.objType
          ? __INFO__.user.id > 0 || __INFO__.user.anchor_auth_id > 0 || (o = 1)
          : 0 == __INFO__.user.id && (o = 1),
        1 == o
          ? ((a = !1),
            "" != _waseeVRObj.addType &&
              (t.indexOf("?") > -1
                ? (t += "&addType=" + _waseeVRObj.addType)
                : (t += "?addType=" + _waseeVRObj.addType)),
            paramObj._isForAPP
              ? _waseeVRObj.isIOS
                ? window.webkit.messageHandlers.API_Auth_login.postMessage({
                    objType: e.objType,
                    url: t,
                  })
                : _waseeVRObj.isAndroid &&
                  window.JsBridge.API_Auth_login(
                    JSON.stringify({ objType: e.objType, url: t })
                  )
              : this.isDesktop || "chargeObj" == e.from
              ? (window.location =
                  "/Wasee/Public/loginwasee?returnUrl=" + encodeURIComponent(t))
              : $.ajax({
                  type: "GET",
                  url: "/Wasee/Base/getAuthCode?code=" + paramObj._wxAuthCode_,
                  success: function (e) {
                    1 == e.status &&
                      (window.location =
                        "/Wasee/Auth/wxAuth?code=" +
                        e.data +
                        "&returnUrl=" +
                        encodeURIComponent(t));
                  },
                }))
          : 2 == o &&
            (window.location =
              "/Wasee/Public/cityLogin?returnUrl=" + encodeURIComponent(t)),
        a
      );
    },
    closeMask_Box: function (e) {
      setTimeout(function () {
        $(e).prev().remove(), $(e).remove();
      }, 500);
    },
    getCiCategory: function (e) {
      var a = e.url
        ? e.url
        : location.protocol +
          "//" +
          location.host +
          "/p/" +
          paramObj._pool_ +
          "/Wasee/Cityhome/getCiCategory";
      $.ajax({
        type: "GET",
        url: a,
        success: function (a) {
          "21001" == e.obj_type
            ? (_waseeVRObj.getCiCategoryData = a)
            : "21006" == e.obj_type && (_waseeVRObj.getPanoCategoryData = a),
            e.callBack(),
            1 != a.status && $.toast("无相关分类", "text");
        },
      });
    },
    toLoadscene: function (e) {
      if (this.isLoadScene || "object" != typeof e || (!e.id && !e.name))
        return;
      if (
        (null == e.vars && (e.vars = null),
        e.name || (e.name = "scene" + e.id),
        e.id || (e.id = e.name.substring(5)),
        !_krpano.get("scene[" + e.name + "]"))
      )
        return void _waseeVRObj.toast("无相关场景");
      _soundObj.to_nextscene && clearTimeout(_soundObj.to_nextscene),
        _waseeVRObj.autorotateObj.enableLooktoscene &&
          (clearTimeout(_waseeVRObj.autorotateObj.enableLooktoscene),
          delete _waseeVRObj.autorotateObj.enableLooktoscene),
        (this.isLoadScene = !0),
        delete window.radarhotview,
        $("#pano_body").hasClass("opa0") && $("#pano_body").removeClass("opa0"),
        _waseeVRObj.sceneId > 0 &&
          "scenemap" != _waseeVRObj.scenemap &&
          e.id >= 0 &&
          (_panoGroupObj.panoOFFgroup[_waseeVRObj.sceneId].pid == e.id
            ? $(
                ".panogroupBody .panolist .panowrap .relatedbody .relatpanowrap"
              ).hasClass("on") &&
              $(
                ".panogroupBody .panolist .panowrap .relatedbody .relatpanowrap"
              ).removeClass("on")
            : (_panoGroupObj.panoOFFgroup[e.id] &&
                _panoGroupObj.panoOFFgroup[e.id].pid &&
                _panoGroupObj.panoOFFgroup[e.id].pid > 0) ||
              ($(".panogroupBody .panolist .panowrap.on").removeClass(
                "on showrelate"
              ),
              $(
                ".panogroupBody .panolist .panowrap .relatedbody .relatpanowrap"
              ).hasClass("on") &&
                $(
                  ".panogroupBody .panolist .panowrap .relatedbody .relatpanowrap"
                ).removeClass("on")),
          _panoGroupObj.panoOFFgroup[e.id].child_type &&
            0 == _panoGroupObj.panoOFFgroup[e.id].child_type &&
            ((_panoGroupObj.panoOFFgroup[e.id].pid &&
              _panoGroupObj.panoOFFgroup[e.id].pid > 0 &&
              (_panoGroupObj.panoOFFgroup[e.id].pid == this.sceneId ||
                _panoGroupObj.panoOFFgroup[e.id].pid ==
                  _panoGroupObj.panoOFFgroup[this.sceneId].pid)) ||
              (_panoGroupObj.panoOFFgroup[this.sceneId].pid &&
                _panoGroupObj.panoOFFgroup[this.sceneId].pid == e.id)) &&
            _krpano.call(
              "set(layer[keepInfo],is_polymorphism=true,par_ath=" +
                _krpano.get("view.hlookat") +
                ",par_atv=" +
                _krpano.get("view.vlookat") +
                ",par_fov=" +
                _krpano.get("view.fov") +
                ")"
            )),
        null != this.is_preantostare &&
          (clearTimeout(this.is_preantostare), delete this.is_preantostare);
      let a = "BLEND(1.0, easeInCubic)";
      switch (__WASEE_DATA__.product.panoinfo.effect) {
        case "blend_a":
          a = "NOBLEND";
          break;
        case "blend_b":
          a = "BLEND(1.0, easeInCubic)";
          break;
        case "blend_c":
          a = "ZOOMBLEND(1.0, 2.0, easeInOutSine)";
          break;
        case "blend_d":
          a = "OPENBLEND(1.0, 0.0, 0.2, 0.0, linear)";
          break;
        case "blend_e":
          a = "COLORBLEND(1.0, 0x000000, easeOutSine)";
          break;
        case "blend_f":
          a = "COLORBLEND(1.0, 0xFFFFFF, easeOutSine)";
          break;
        case "blend_g":
          a = "LIGHTBLEND(1.0, 0xFFFFFF, 2.0, linear)";
          break;
        case "blend_h":
          a = "SLIDEBLEND(1.0, 180.0, 0.2, linear)";
          break;
        case "blend_i":
          a = "SLIDEBLEND(1.0, 90.0, 0.2, linear)";
          break;
        case "blend_j":
          a = "SLIDEBLEND(1.0, 0.0, 0.2, linear)";
          break;
        case "blend_k":
          a = "SLIDEBLEND(1.0, -90.0, 0.2, linear)";
          break;
        case "blend_l":
          a = "OPENBLEND(1.0, -1.0, 0.3, 0.0, linear)";
          break;
        case "blend_m":
          a = "OPENBLEND(1, 1.0, 0.3, 0.0, linear)";
          break;
        case "blend_n":
          a = "SLIDEBLEND(1.0, 135.0, 0.4, linear)";
          break;
        case "blend_o":
          a = "SLIDEBLEND(1.0, 35.0, 0.4, linear)";
          break;
        case "blend_p":
          a = "SLIDEBLEND(1.0, 215.0, 0.4, linear)";
          break;
        case "blend_q":
          a = "SLIDEBLEND(1.0, -35.0, 0.4, linear)";
          break;
        default:
          a = "BLEND(1.0, easeInCubic)";
      }
      this.sceneId > 0 &&
        2 == _panoGroupObj.panoOFFgroup[this.sceneId].media_type &&
        _waseeVRObj.panovideoObj.stop(),
        this.storyline && 1 != e.storyline && delete this.storyline,
        ("scenemap" == e.name ||
          (_panoGroupObj.panoOFFgroup[e.name.substr(5)] &&
            3 == _panoGroupObj.panoOFFgroup[e.name.substr(5)].media_type)) &&
          (krp.get("plugin[gyro].enabled") &&
            ((this.status_obj.enabled = !0),
            krp.set("plugin[gyro].enabled", !1)),
          $(".navrighttop .vrr").length > 0 &&
            $(".navrighttop .vrr").addClass("none"),
          $(".navrighttop .gyro").length > 0 &&
            $(".navrighttop .gyro").addClass("none"));
      let t =
        (this.is_scenic > 0 &&
        "scenemap" == e.name &&
        "scenemap" != _waseeVRObj.sceneName
          ? "moveto(get(view.hlookat),90);zoomto(150);"
          : "") +
        "loadscene(" +
        e.name +
        "," +
        e.vars +
        "," +
        (_panoGroupObj.panoOFFgroup[e.id] &&
        _panoGroupObj.panoOFFgroup[this.sceneId].media_type ==
          _panoGroupObj.panoOFFgroup[e.id].media_type
          ? "MERGE"
          : "KEEPSCENES") +
        ", " +
        a +
        ")";
      _krpano.call(t);
    },
    toLoadstoryscene: function (e) {
      (this.storyline = 1), (e.storyline = 1), this.toLoadscene(e);
    },
    toLoadscenetovr: function (e) {
      __WASEE_DATA__.product.xmlpath &&
        __WASEE_DATA__.product.xmlpath.length > 10 &&
        _krpano.call(
          'loadpanoscene("' +
            __WASEE_DATA__.product.xmlpath +
            "?" +
            Math.random() +
            '","' +
            e +
            '",null,MERGE,BLEND(1.0, easeInCubic))'
        );
    },
    setPrevpano: function () {
      _krpano.call(
        "set(layer[keepInfo],is_polymorphism=true,prev_ath=" +
          _krpano.get("view.hlookat") +
          ",prev_atv=" +
          _krpano.get("view.vlookat") +
          ",prev_fov=" +
          _krpano.get("view.fov") +
          ")"
      );
    },
    panoIn: function () {
      if (
        (krp.call(
          "stopdelayedcall(oneautorota);delete(bt);stopdelayedcall(bomb);"
        ),
        this.loadpanoCount > 0 && (this.prev_sceneName = this.sceneName),
        (this.is_go_panoOver_callBack = !1),
        (this.isLoadScene = !1),
        (this.sceneName = _krpano.get("xml.scene")),
        "" != this.prev_sceneName &&
          _krpano.get("scene[" + this.prev_sceneName + "]").isvideopano &&
          (this.panovideoObj.ds_loadDownby &&
            (clearInterval(this.panovideoObj.ds_loadDownby),
            delete this.panovideoObj.ds_loadDownby),
          this.panovideoObj.timeupdateInterv &&
            clearInterval(this.panovideoObj.timeupdateInterv)),
        "scenemap" != this.sceneName)
      ) {
        this.sceneId = Number(this.sceneName.substring(5));
        let e = this.sceneId;
        (this.sceneMeta = this.getsceneMeta()),
          1 == __WASEE_DATA__.product.openmap.switch_hdmap &&
            0 == __WASEE_DATA__.product.openmap.scenic_map &&
            this.loadpanoCount > 0 &&
            1 == $("#openmap-switch").attr("data-atr") &&
            setTimeout(function () {
              $("#openmap-switch").click();
            }, 500),
          (1 != __WASEE_DATA__.product.switch.overallNav.switch_compass &&
            3 != __WASEE_DATA__.product.switch.overallNav.switch_compass) ||
            (_panoGroupObj.panoOFFgroup[e] &&
            2 == _panoGroupObj.panoOFFgroup[e].media_type &&
            _panoGroupObj.panoOFFgroup[e].video
              ? (__WASEE_DATA__.product.switch.overallNav.switch_compass = 3)
              : (__WASEE_DATA__.product.switch.overallNav.switch_compass = 1)),
          this.loadpanoCount > 0 &&
            ((__WASEE_DATA__.product.switch.overallNav.autorotate =
              _openobj.autorotate),
            (__WASEE_DATA__.product.switch.overallNav.enableLookto =
              _openobj.enableLookto),
            (__WASEE_DATA__.product.switch.overallNav.autorotate_view =
              _openobj.autorotate_view),
            (__WASEE_DATA__.product.switch.overallNav.autorotate_time =
              _openobj.autorotate_time)),
          _panoGroupObj.panoOFFgroup[e] &&
            (2 != _panoGroupObj.panoOFFgroup[e].media_type &&
              $(".videocontrol").remove(),
            3 == _panoGroupObj.panoOFFgroup[e].media_type
              ? (krp.get("plugin[gyro].enabled") &&
                  ((this.status_obj.enabled = !0),
                  krp.set("plugin[gyro].enabled", !1)),
                $(".navrighttop .vrr").length > 0 &&
                  $(".navrighttop .vrr").addClass("none"),
                $(".navrighttop .gyro").length > 0 &&
                  $(".navrighttop .gyro").addClass("none"))
              : (this.status_obj.enabled &&
                  (krp.set("plugin[gyro].enabled", !0),
                  delete this.status_obj.enabled),
                $(".navrighttop .vrr").length > 0 &&
                  $(".navrighttop .vrr").removeClass("none"),
                $(".navrighttop .gyro").length > 0 &&
                  !this.isDesktop &&
                  $(".navrighttop .gyro").removeClass("none"))),
          this.autoratenext(),
          this.autorotateObj.setsceneauto();
      } else
        (this.sceneId = 0),
          _soundObj.stopsound("bgmusic"),
          _soundObj.stopsound("bgvoice"),
          _soundObj.removesubtitle(),
          _waseeVRObj.sceneMeta &&
            2 == _waseeVRObj.sceneMeta.voicetype &&
            _projectiveImg.pause(1),
          (_waseeVRObj.sceneMeta = {}),
          $(".music,.voice").addClass("none close"),
          $(".videocontrol").remove(),
          _waseeVRObj.mhotData ||
            1 != __WASEE_DATA__.product.switch.overallNav.switch_hdmap ||
            1 != __WASEE_DATA__.product.panoinfo.scenic_map ||
            this.getloadlmhotData(),
          this.setPageParrama(0),
          $(".openmap-switch").addClass("visib_h"),
          krp.get("plugin[gyro].enabled") &&
            ((this.status_obj.enabled = !0),
            krp.set("plugin[gyro].enabled", !1)),
          $(".navrighttop .vrr").length > 0 &&
            $(".navrighttop .vrr").addClass("none");
      _soundObj.soundList.othermusic &&
        (_soundObj.stopsound("othermusic"),
        _soundObj.soundList.othermusic.sceneId &&
          _soundObj.soundList.othermusic.hostname &&
          _panoGroupObj.panoOFFgroup[_soundObj.soundList.othermusic.sceneId]
            .hotspots[_soundObj.soundList.othermusic.hostname] &&
          ((_panoGroupObj.panoOFFgroup[
            _soundObj.soundList.othermusic.sceneId
          ].hotspots[_soundObj.soundList.othermusic.hostname].isplay = !1),
          delete _soundObj.soundList.othermusic.sceneId,
          delete _soundObj.soundList.othermusic.hostname));
      let e = !1;
      __INFO__.group_data &&
        "object" == typeof __INFO__.group_data &&
        0 ==
          _panoGroupObj.panogroupData[
            _panoGroupObj.panoOFFgroup[this.sceneId].index
          ].cate_valid &&
        (e = !0),
        (this.islkmult = e),
        (this.isscenepwd = !1),
        (this.hotcatedata = {}),
        delete _waseeVRObj.hotactelist,
        0 == __INFO__.password_status && this.chargescenepwd(this.sceneMeta),
        this.islkmult &&
          (((0 != __INFO__.password_status || 1 != _openobj.in_startanima) &&
            0 == this.loadpanoCount) ||
            this.loadpanoCount > 0) &&
          _krpano.call(
            "loadmulasethemnia();set(lockscene,true);toggleasethe();"
          ),
        $(".setspecir").length > 0 &&
          ($(".specigroupBody,.setspecir").remove(),
          null != window.show_guide_speci &&
            (clearTimeout(window.show_guide_speci),
            delete window.show_guide_speci)),
        window.showspecificlist_timeout &&
          (clearTimeout(window.showspecificlist_timeout),
          delete window.showspecificlist_timeout),
        window.radar && delete window.radar.init,
        window.radarhotview && delete window.radarhotview.init,
        window.moveimg && delete window.moveimg.init,
        this._hlookat_change && delete this._hlookat_change;
    },
    panoOver: function (e) {
      if (this.isscenepwd) return !1;
      if (((this.cv = 3), 1 != __INFO__.password_status)) {
        if (
          (!this.islkmult &&
            _krpano.get("lockscene") &&
            (_krpano.call("wait(1);toggleasethe(on);delete(lockscene);"),
            0 == this.loadpanoCount && _waseeVRObj.panoOverFirst()),
          1 == _waseeVRObj.scenepwdok &&
            (delete _waseeVRObj.scenepwdok,
            _waseeVRObj.sceneMeta &&
              _waseeVRObj.sceneMeta.pwd &&
              (_waseeVRObj.sceneMeta.pwd.cate_valid = "")),
          this.loadpanoCount++,
          (this._fov = _krpano.get("view.fov")),
          (this.clickfov = 0.2 * this._fov),
          this._fov > 10 &&
            setTimeout(function () {
              (_waseeVRObj._fov = _krpano.get("view.fov")),
                (_waseeVRObj.clickfov = 0.2 * _waseeVRObj._fov);
            }, 2e3),
          (this._hlookat = _krpano.get("view.hlookat")),
          (this._vlookat = _krpano.get("view.vlookat")),
          (this.sceneImgid = _krpano.get("scene[get(xml.scene)].media_id")),
          (this.voiceurl = _krpano.get("scene[get(xml.scene)].voiceurl")),
          (this.closeVoice = _krpano.get("scene[get(xml.scene)].closeVoice")),
          (this.scene = _krpano.get("scene[get(xml.scene)]")),
          "false" != this.closeVoice &&
            "0" != this.closeVoice &&
            (this.voiceurl = ""),
          this.is_switch_nav > 0 && "object" == typeof _panonavObj)
        )
          try {
            _panonavObj.panoOver();
          } catch (e) {
            goalert("error.nav=" + e.toString());
          }
        if ("scenemap" != this.sceneName) {
          if (
            (this.chargeObj.isBuyScenecharge(),
            this.prev_sceneName &&
              "played" == this.autoGuidesObj.status &&
              (this.setPageParrama("", "freehand on"),
              0 == $(".setautotour").length &&
                ($("body").append(
                  '<div class="setautotour flex__center"><div class="dl_zt flex_center_y" tips="' +
                    _langObj.pause +
                    '" tipss="' +
                    _langObj.play +
                    '"><i class="iconfont"></i></div><div class="dl_stop flex_center_y" tips="' +
                    _langObj.stop +
                    '"><i class="iconfont"></i></div></div>'
                ),
                "" != paramObj.langClass &&
                  ($("#subinformain .setautotour .dl_zt").attr({
                    "data-lname": "pause",
                    "data-lname2": "play",
                  }),
                  $("#subinformain .setautotour .dl_stop").attr(
                    "data-lname",
                    "stop"
                  ))),
              _waseeVRObj.autoGuidesObj.p_index++,
              _waseeVRObj.autoGuidesObj.autoGuides[
                _waseeVRObj.autoGuidesObj.xianlu_index
              ].point[_waseeVRObj.autoGuidesObj.p_index] &&
              _waseeVRObj.autoGuidesObj.autoGuides[
                _waseeVRObj.autoGuidesObj.xianlu_index
              ].point[_waseeVRObj.autoGuidesObj.p_index].sceneid == this.sceneId
                ? setTimeout(function () {
                    _waseeVRObj.autoGuidesObj.toGuide();
                  }, 2e3)
                : _waseeVRObj.autoGuidesObj.toGuide()),
            this.is_switch_nav > 0 &&
              "object" == typeof window._panonavObj &&
              _panonavObj.shownav(),
            "scenemap" == this.onescene &&
              2 == this.loadpanoCount &&
              "function" == typeof this.panoOverFirstBack &&
              this.panoOverFirstBack(),
            (this.sceneTitle = _krpano.get(
              "config.panos.pano[scene" + _waseeVRObj.sceneId + "].info.title"
            )),
            this.sceneId > 0 &&
              (_krpano.get("WebVR.isenabled")
                ? this.loadHotspot_vr()
                : ("played" != this.autoGuidesObj.status ||
                    ("played" == this.autoGuidesObj.status &&
                      1 !=
                        __WASEE_DATA__.product.panoinfo.guides.info.hidehot)) &&
                  this.loadHotspot()),
            this.webvrhotspot &&
              this.webvrhotspot.length > 0 &&
              delete this.webvrhotspot,
            "scenemap" == _waseeVRObj.prev_sceneName &&
              (this.setPageParrama(1),
              $(".navrighttop .menu_icon_btn.autorotate").hasClass("close") ||
              (0 == __WASEE_DATA__.product.switch.overallNav.showautorotate &&
                0 == __WASEE_DATA__.product.switch.overallNav.autorotate)
                ? (clearTimeout(this.is_preantostare),
                  delete this.is_preantostare,
                  krp.call(
                    "autorotate.stop();delete(bt);stopdelayedcall(bomb);"
                  ))
                : __WASEE_DATA__.product.switch.overallNav.autorotate_time >
                    0 &&
                  krp.set(
                    "autorotate.speed",
                    360 /
                      __WASEE_DATA__.product.switch.overallNav.autorotate_time
                  )),
            this.loadpanoCount > 1)
          ) {
            this.set_hotcatedata(),
              1 == __WASEE_DATA__.product.switch.overallNav.scene_name &&
                ($("#toast").remove(),
                _waseeVRObj.toastTimeout &&
                  (clearTimeout(_waseeVRObj.toastTimeout),
                  delete _waseeVRObj.toastTimeout),
                this.toast({
                  text: _waseeVRObj.sceneTitle,
                  time: 6e3,
                  callBack: function () {
                    $("#toast").addClass("scenenametips");
                  },
                }));
            try {
              _panoGroupObj.singroupscene(this.sceneId),
                _panoGroupObj.setnavrightbottom();
            } catch (e) {
              goalert("error.2="), goalert(e);
            }
          }
          this.sceneId > 0 &&
            1 == __WASEE_DATA__.product.switch.overallNav.enablemessage &&
            paramObj._isWaseehost &&
            ("played" != this.autoGuidesObj.status ||
              ("played" == this.autoGuidesObj.status &&
                1 != __WASEE_DATA__.product.panoinfo.guides.info.hidehot)) &&
            _waseeVRObj.getHotspotDataForScene({
              data: {
                location_obj_type: 22001,
                obj_type: 21009,
                pageSize: 50,
                pageIndex: 1,
              },
              callBack: function (e) {
                if (1 == e.status) {
                  e.totalPage > 1 &&
                    $("#subinformain .addmessage .changey").removeClass(
                      "disabled2"
                    ),
                    $(
                      ".item_bottom .menu_right .command .title,.navrightbottom .list .command span"
                    ).html(e.total > 0 ? e.total : _langObj.shuoyishuo),
                    "" != paramObj.langClass &&
                      $(
                        ".item_bottom .menu_right .command .title,.navrightbottom .list .command span"
                      ).attr("data-lname", "shuoyishuo"),
                    (e = e.list);
                  var a = "";
                  for (var t in e)
                    _waseeVRObj.inforCommentHotIdlist.push(e[t].id),
                      (_waseeVRObj.inforCommentHotlistData[e[t].id] = e[t]),
                      (a +=
                        "commentHotspot(" +
                        e[t].id +
                        "," +
                        _waseeVRObj.setChangeHttps(
                          _waseeVRObj.setOSSimg(e[t].icon, 300, 1)
                        ) +
                        "," +
                        e[t].content +
                        "," +
                        e[t].ath +
                        "," +
                        e[t].atv +
                        ");");
                  _krpano.call(a),
                    21009 == $.getParameter("obj_type") &&
                      $.getParameter("obj_id") > 0 &&
                      _krpano.call(
                        "looktohotspot(comment_spot" +
                          $.getParameter("obj_id") +
                          ",get(view.fov))"
                      );
                }
              },
            });
        } else
          this.set_hotcatedata(),
            1 == __WASEE_DATA__.product.switch.overallNav.openmap_menu
              ? this.isCls && this.clearScreen({ isforce: 1 })
              : (this.setPageParrama(0), (this.isCls = !0)),
            (this.isgetmapscenelist = !1),
            (_panoGroupObj.panogroupKeydown = !1);
        if (
          (0 == this.sceneId &&
            ($(".openmap-switch").hasClass("visib_h") &&
              1 == __WASEE_DATA__.product.switch.overallNav.openmap_menu &&
              this.setPageParrama(1),
            $(".openmap-switch").removeClass("visib_h"),
            1 == __WASEE_DATA__.product.switch.overallNav.switch_hdmap &&
              1 == __WASEE_DATA__.product.panoinfo.scenic_map &&
              (this.loadlmhot(),
              krp.get("autorotate.isrotating") &&
                (window.isrotating = krp.get("autorotate.isrotating")),
              krp.call("set(autorotate.speed,2);autorotate.start();"))),
          $("#subinformain .sharediv").length > 0 &&
            ($(".sharediv").removeClass("on"),
            $(".sharediv").prev().removeClass("on")),
          (paramObj.krpano.sceneId = this.sceneId),
          "scenemap" != this.sceneName ||
            ("scenemap" == _krpano.get("xml.scene") &&
              1 == __WASEE_DATA__.product.switch.overallNav.openmap_menu))
        ) {
          if (paramObj._isForAPP)
            _waseeVRObj__isApp.API_Wasee_Front_CallBack(3, {
              sceneId: _waseeVRObj.scene.scene_id,
            });
          else if (
            this.sceneId > 0 &&
            1 != this.is_ememap &&
            1 != _waseeVRObj.istphd &&
            !this.roNumcode
          ) {
            let e = {};
            ("0" != _panoGroupObj.panoOFFgroup[this.sceneId].music.closeMusic &&
              "" != _panoGroupObj.panoOFFgroup[this.sceneId].music.closeMusic &&
              "false" !=
                _panoGroupObj.panoOFFgroup[this.sceneId].music.closeMusic) ||
            "" == _panoGroupObj.panoOFFgroup[this.sceneId].music.bgmscurl
              ? (_soundObj.stopsound("bgmusic"),
                1 == this.sceneMapId &&
                  (delete _soundObj.soundList.bgmusic,
                  document.getElementById("audio_bgmusic") &&
                    (document.getElementById("audio_bgmusic").src = "")),
                $(".music").addClass("none close"),
                "played" == this.autoGuidesObj.status &&
                  (_soundObj.soundList.bgmusic &&
                    (_soundObj.soundList.bgmusic.url = ""),
                  $("#audio_bgmusic").attr("src", "")))
              : ((e.autoplay =
                  0 !=
                    _panoGroupObj.panoOFFgroup[this.sceneId].music.musicplay &&
                  1 != _soundObj.isbgmClose),
                (e.yy_autoplay =
                  0 !=
                  _panoGroupObj.panoOFFgroup[this.sceneId].music.musicplay),
                (e.volume =
                  _panoGroupObj.panoOFFgroup[this.sceneId].music.musicvolume),
                1 == paramObj.sceneMapId && 1 == this.loadpanoCount
                  ? (e.autoplay = !1)
                  : "played" == this.autoGuidesObj.status &&
                    1 ==
                      __WASEE_DATA__.product.panoinfo.guides.info.closemusic &&
                    (e.autoplay = !1),
                1 == __WASEE_DATA__.product.switch.overallNav.showmusic &&
                  $(".music").removeClass("none"),
                _soundObj.playsound(
                  "bgmusic",
                  _panoGroupObj.panoOFFgroup[this.sceneId].music.bgmscurl,
                  _panoGroupObj.panoOFFgroup[this.sceneId].music.musicLoop,
                  e
                ),
                1 == paramObj.sceneMapId &&
                  _soundObj.soundList.bgmusic.isplay &&
                  (_soundObj.soundList.bgmusic.temporary_pause = !0)),
              "object" == typeof this.sceneMeta &&
                2 == this.sceneMeta.voicetype &&
                ((_panoGroupObj.panoOFFgroup[
                  this.sceneId
                ].voice.isvoicevideo = 1),
                (_panoGroupObj.panoOFFgroup[this.sceneId].voice.voiceurl =
                  this.sceneMeta.videourl),
                (_panoGroupObj.panoOFFgroup[this.sceneId].voice.videoclearbg =
                  this.sceneMeta.videoclearbg),
                (_panoGroupObj.panoOFFgroup[this.sceneId].voice.videoposit =
                  this.sceneMeta.videoposit),
                (_panoGroupObj.panoOFFgroup[this.sceneId].voice.videosubtitle =
                  this.sceneMeta.videosubtitle),
                (_panoGroupObj.panoOFFgroup[this.sceneId].voice.voicetype = 2),
                (_panoGroupObj.panoOFFgroup[this.sceneId].voice.closeVoice =
                  !1)),
              ("0" !=
                _panoGroupObj.panoOFFgroup[this.sceneId].voice.closeVoice &&
                "" !=
                  _panoGroupObj.panoOFFgroup[this.sceneId].voice.closeVoice &&
                "false" !=
                  _panoGroupObj.panoOFFgroup[this.sceneId].voice.closeVoice) ||
              "" == _panoGroupObj.panoOFFgroup[this.sceneId].voice.voiceurl
                ? (_soundObj.soundList &&
                    _soundObj.soundList.bgvoice &&
                    "overal" == _soundObj.soundList.bgvoice.from &&
                    1 == _soundObj.soundList.bgvoice.isplay) ||
                  (0 == this.is_scenic && _soundObj.stopsound("bgvoice"),
                  1 == this.sceneMapId &&
                    (delete _soundObj.soundList.bgvoice,
                    document.getElementById("audio_bgvoice") &&
                      (document.getElementById("audio_bgvoice").src = "")),
                  "object" == typeof _projectiveImg &&
                    $("video#audio_bgvoice").length > 0 &&
                    (_projectiveImg.hide(),
                    _projectiveImg.pause(1),
                    delete _soundObj.soundList.bgvoice),
                  _soundObj.removesubtitle(),
                  $(".voice").addClass("none close"),
                  "played" == this.autoGuidesObj.status &&
                    (_soundObj.soundList.bgvoice &&
                      (_soundObj.soundList.bgvoice.url = ""),
                    $("#audio_bgvoice").attr("src", "")))
                : (_panoGroupObj.panoOFFgroup[this.sceneId].voice.voiceLoop >
                    0 &&
                    __WASEE_DATA__.product.switch.overallNav.enableLookto >=
                      1 &&
                    (_waseeVRObj.autorotateObj.enableLooktoscene &&
                      (clearTimeout(
                        _waseeVRObj.autorotateObj.enableLooktoscene
                      ),
                      delete _waseeVRObj.autorotateObj.enableLooktoscene),
                    (__WASEE_DATA__.product.switch.overallNav.enableLookto = 0),
                    1 ==
                      __WASEE_DATA__.product.switch.overallNav.enableLookto &&
                      _krpano.call("stopdelayedcall(bomb);delete(bt);")),
                  __WASEE_DATA__.product.switch.overallNav.showvoice &&
                    $(".voice").removeClass("none"),
                  (e.autoplay =
                    0 !=
                      _panoGroupObj.panoOFFgroup[this.sceneId].voice
                        .voiceplay && 1 != _soundObj.isbgvClose),
                  (e.yy_autoplay =
                    0 !=
                    _panoGroupObj.panoOFFgroup[this.sceneId].voice.voiceplay),
                  (e.volume =
                    _panoGroupObj.panoOFFgroup[this.sceneId].voice.voicevolume),
                  1 != paramObj.sceneMapId &&
                    1 == this.loadpanoCount &&
                    1 ==
                      _panoGroupObj.panoOFFgroup[this.sceneId].voice
                        .isvoicevideo &&
                    1 == e.autoplay &&
                    $("body").append(
                      '<div class="mBoxbg on goyoulan"><button style="background-color: #5085FB;font-size: 16px;cursor: pointer;" class="mask_toast flex_center_y"><i class="iconfont icon_play" style="font-size: 24px;margin-right: 6px;"></i>' +
                        _langObj.kaishiyoul +
                        "</button></div>"
                    ),
                  1 == paramObj.sceneMapId && 1 == this.loadpanoCount
                    ? (e.autoplay = !1)
                    : "played" == this.autoGuidesObj.status &&
                      1 ==
                        __WASEE_DATA__.product.panoinfo.guides.info
                          .closevoice &&
                      (e.autoplay = !1),
                  "object" == typeof this.sceneMeta &&
                  2 == this.sceneMeta.voicetype
                    ? $("audio#audio_bgvoice").length > 0 &&
                      ($("audio#audio_bgvoice").attr("id", "audio_bgvoice2"),
                      $("#audio_bgvoice2").removeAttr("autoplay"),
                      (document.getElementById("audio_bgvoice2").muted = !0),
                      document.getElementById("audio_bgvoice2").pause(),
                      $("#audio_bgvoice2").removeAttr("loop"),
                      $("video#audio_bgvoice2").attr("id", "audio_bgvoice"),
                      delete _soundObj.soundList.bgvoice,
                      _waseeVRObj.is_scenic > 0 &&
                        "object" == typeof _scenicObj &&
                        _scenicObj.data &&
                        delete _scenicObj.data.iseventlistenervoice)
                    : $("video#audio_bgvoice").length,
                  (0 != e.autoplay &&
                    1 ==
                      _panoGroupObj.panoOFFgroup[this.sceneId].voice
                        .isvoicevideo) ||
                    "object" != typeof _projectiveImg ||
                    _projectiveImg.hide(),
                  _soundObj.playsound(
                    "bgvoice",
                    _panoGroupObj.panoOFFgroup[this.sceneId].voice.voiceurl,
                    1 ==
                      _panoGroupObj.panoOFFgroup[this.sceneId].voice.voiceLoop,
                    e
                  ),
                  1 == paramObj.sceneMapId &&
                    _soundObj.soundList.bgvoice.isplay &&
                    (_soundObj.soundList.bgvoice.temporary_pause = !0));
          }
          this.loadpanoCount > 1 &&
            1 != this.istphd &&
            !this.roNumcode &&
            (("scenemap" == this.onescene && 2 == this.loadpanoCount) ||
              "played" == this.autoGuidesObj.status ||
              this.onscenespeci(),
            paramObj._isForAPP ||
              (this.radarObj.onsceneradar(),
              1 == this.map_sand &&
                _waseeVRObj.radar &&
                _waseeVRObj.radar.scene_radar &&
                _waseeVRObj.radar.scene_radar[_waseeVRObj.sceneId] &&
                _waseeVRObj.radar.scene_radar[_waseeVRObj.sceneId].radar_type >
                  0 &&
                ($(".winecellar_p").hasClass("click") ||
                  $(".winecellar_p").click(),
                $(".radarimgbody .scalebsg").length > 0 &&
                  $(".radarimgbody .scalebsg").click(),
                delete this.map_sand)));
        }
        try {
          shareObj
            ? 1 != this.loadpanoCount ||
              ("0" != paramObj._getSceneId &&
                null != paramObj._getSceneId &&
                "" != paramObj._getSceneId &&
                "_map" != paramObj._getSceneId)
              ? this.setShareUrl(1, "noview")
              : this.setShareUrl(0, "first")
            : (this.Intervalshare = setInterval(function () {
                shareObj &&
                  (clearInterval(_waseeVRObj.Intervalshare),
                  delete _waseeVRObj.Intervalshare,
                  1 != this.loadpanoCount ||
                  ("0" != paramObj._getSceneId &&
                    null != paramObj._getSceneId &&
                    "" != paramObj._getSceneId &&
                    "_map" != paramObj._getSceneId)
                    ? this.setShareUrl(1, "noview")
                    : this.setShareUrl(0, "first"));
              }, 1e3));
        } catch (e) {
          goalert("error.3="), goalert(e);
        }
        this.is_scenic > 0 &&
          "object" == typeof _scenicObj &&
          _scenicObj.panoOver(),
          (this.loadpanoCount > 2 ||
            (2 == this.loadpanoCount &&
              "scenemap" != _waseeVRObj.prev_sceneName) ||
            "scenemap" == _waseeVRObj.prev_sceneName) &&
            this.go_panoOver_callBack(),
          this.map_sand && delete this.map_sand,
          setTimeout(function () {
            _waseeVRObj.chargeObj.setChargeweizhi();
          }, 500),
          "object" == typeof wstphdObj &&
            "function" == typeof __tphdObj.changeview &&
            __tphdObj.changeview({
              id: this.sceneId,
              hlookat: this._hlookat,
              vlookat: this._vlookat,
              fov: this._fov,
            });
      }
    },
    panoOver_callBack: function (e) {
      if (
        "object" == typeof e &&
        (this.panoOver_callBackData || (this.panoOver_callBackData = {}),
        (this.panoOver_callBackData = $.extend(this.panoOver_callBackData, e)),
        this.is_go_panoOver_callBack)
      )
        for (const a in e)
          Object.hasOwnProperty.call(e, a) &&
            "function" == typeof e[a] &&
            e[a]();
    },
    go_panoOver_callBack: function (e) {
      if (
        ((this.is_go_panoOver_callBack = !0),
        "object" == typeof _waseeVRObj.panoOver_callBackData)
      )
        for (var a in _waseeVRObj.panoOver_callBackData)
          try {
            if (_waseeVRObj.panoOver_callBackData.hasOwnProperty(a)) {
              const e = _waseeVRObj.panoOver_callBackData[a];
              "function" == typeof e &&
                e({ id: this.sceneId, title: this.sceneTitle });
            }
          } catch (e) {
            goalert("panoover_callback.fucntion " + a + " is error"),
              goalert(e);
          }
    },
    set_langObj_callBack: function (e) {
      "object" == typeof e &&
        (this.langObj_callBackData || (this.langObj_callBackData = {}),
        (this.langObj_callBackData = $.extend(this.langObj_callBackData, e)));
    },
    go_langObj_callBack: function () {
      if ("object" == typeof _waseeVRObj.langObj_callBackData)
        for (var e in _waseeVRObj.langObj_callBackData)
          try {
            if (_waseeVRObj.langObj_callBackData.hasOwnProperty(e)) {
              const a = _waseeVRObj.langObj_callBackData[e];
              "function" == typeof a && a(_languageObj.lang);
            }
          } catch (a) {
            goalert("langobj_callback.fucntion " + e + " is error"), goalert(a);
          }
    },
    panoOverFirstAPP: function () {
      paramObj._isForAPP &&
        (_waseeVRObj__isApp.API_Wasee_Front_CallBack(4, {}),
        _waseeVRObj__isApp.API_Wasee_Front_CallBack(2, {}));
    },
    panoOverFirst: function () {
      if (this.isscenepwd) return !1;
      if (
        (1 == __WASEE_DATA__.product.switch.overallNav.scene_name &&
          this.toast({
            text: __WASEE_DATA__.product.panoinfo.name,
            time: 5e3,
            callBack: function () {
              $("#toast").addClass("scenenametips"),
                setTimeout('$(".scenenametips").animate({"top":"-30px"})', 4e3);
            },
          }),
        2 == __INFO__.score_status &&
          ($("#pano_body").append(
            '<div class="score">' + _langObj.jingxuan + "</div>"
          ),
          4 == __WASEE_DATA__.product.panoinfo.skinItem &&
            $("#pano_body score").html("精选 " + _languageObj.EN.jingxuan),
          setTimeout('$(".score").animate({"top":"-50px"})', 4e3)),
        paramObj._isForAPP &&
          (_waseeVRObj.isIOS
            ? window.webkit.messageHandlers.API_UI_showSubTitle.postMessage(!0)
            : _waseeVRObj.isAndroid && window.JsBridge.API_UI_showSubTitle(!0)),
        1 != __INFO__.password_status)
      ) {
        if (
          (delete this.panoOverFirst,
          (this.compassHeight =
            -20 - Number(_krpano.get("layer[compass].height"))),
          (this.compassY = _krpano.get("layer[compass].y")),
          "CN" != _languageObj.lang || paramObj._isexport)
        ) {
          let e =
            "set(contextmenu.item[qp].caption," +
            _langObj.quanqingqieh +
            ");set(contextmenu.item[cc].caption," +
            _langObj.tuozhuaitype +
            ");set(contextmenu.item[nv].caption," +
            _langObj.shijiao +
            ");set(contextmenu.item[fv].caption," +
            _langObj.yuyan +
            ");set(contextmenu.item[lp].caption," +
            _langObj.xiaoxinxin +
            ");set(contextmenu.item[ba].caption," +
            _langObj.shuijinqiu +
            ");";
          4 == __WASEE_DATA__.product.panoinfo.skinItem &&
            (e =
              "set(contextmenu.item[qp].caption,全屏 " +
              _languageObj.EN.quanqingqieh +
              ");set(contextmenu.item[cc].caption,拖拽形式 " +
              _languageObj.EN.tuozhuaitype +
              ");set(contextmenu.item[nv].caption,正常视角 " +
              _languageObj.EN.shijiao +
              ");set(contextmenu.item[fv].caption,鱼眼视角 " +
              _languageObj.EN.yuyan +
              ");set(contextmenu.item[lp].caption,小行星视角 " +
              _languageObj.EN.xiaoxinxin +
              ");set(contextmenu.item[ba].caption,水晶球视角 " +
              _languageObj.EN.shuijinqiu +
              ");"),
            _krpano.call(e);
        }
        if (
          (this.isDesktop ||
            ($(".navrighttop,.navrightbottom").addClass("mobile"),
            paramObj._isForAPP && $("body").addClass("app"),
            $("body").addClass("noselect")),
          "scenemap" != _krpano.get("xml.scene") ||
            ("scenemap" == _krpano.get("xml.scene") &&
              1 == __WASEE_DATA__.product.switch.overallNav.openmap_menu))
        )
          this.panoOverFirst2();
        else {
          let e = this;
          (_waseeVRObj.domHeight.fwHeight = 0),
            (this.panoOverFirstBack = function () {
              this.panoOverFirst2(), delete e.panoOverFirstBack;
            }),
            this.addJavascript({
              src:
                paramObj.resourceWasee +
                "/home/vrpano/js/expo.min.js?" +
                Math.random(),
              callBack: function () {
                __WASEE_DATA__.product.panoinfo.menustyle > 0 &&
                  ((1 == e.isapk &&
                    e.sceneId > 0 &&
                    _panoGroupObj.panoOFFgroup[e.sceneId] &&
                    3 != _panoGroupObj.panoOFFgroup[e.sceneId].media_type &&
                    1 == __WASEE_DATA__.product.switch.overallNav.showVR) ||
                    _waseeVRObj.setPageParrama(1, "panoOverFirst"));
              },
            });
        }
        try {
          "phone" == $.browserRedirect() &&
            ((_openobj.in_image_url_show = _openobj.in_appimage_url_show),
            (_openobj.in_image_url = _openobj.in_appimage_url)),
            null == _openobj.in_image_url && _openobj.in_image_url;
        } catch (e) {
          goalert("error2:"), goalert(e);
        }
        this.isgopanohelp || this.panohelp();
      }
    },
    panoOverFirst2: function () {
      if (
        ((void 0 !== _waseeVRObj.sceneMeta.notice &&
          0 != _waseeVRObj.sceneMeta.notice.length) ||
          this.setpanoinfonotice(),
        1 != paramObj.sceneMapId ||
          (0 != $("#openmap-alert").length &&
            !$("#openmap-alert").is(":hidden")) ||
          this.openscenemapBack(),
        paramObj._isForAPP)
      ) {
        let e = __WASEE_DATA__.product.switch.overallNav,
          a = "";
        1 == e.autorotate_view && (a += "set(autorotate.horizon,off);"),
          __WASEE_DATA__.product.switch.overallNav.autorotate_time > 0 &&
            (a +=
              "set(autorotate.speed," +
              360 / __WASEE_DATA__.product.switch.overallNav.autorotate_time +
              ");"),
          (a += "set(contextmenu.touch,false);"),
          krp.call(a),
          this.setCss(
            ".navrighttop{top:" + (paramObj._App_NaviBarHeight + 10) + "px;}"
          );
      } else {
        if (
          0 != __WASEE_DATA__.product.panoinfo.contextmenu_show &&
          __WASEE_DATA__.product.panoinfo.contextmenu
        ) {
          let e = "";
          for (
            let a = 0;
            a < __WASEE_DATA__.product.panoinfo.contextmenu.length;
            a++
          ) {
            const t = __WASEE_DATA__.product.panoinfo.contextmenu[a];
            "" != t.url
              ? (e +=
                  "set(contextmenu.item[zdy_" +
                  a +
                  '],caption="' +
                  t.title +
                  '",onclick="js(_waseeVRObj.clicktextmenu(' +
                  a +
                  '))");')
              : (e +=
                  "set(contextmenu.item[zdy_" +
                  a +
                  '].caption,"' +
                  t.title +
                  '");');
          }
          "" != e &&
            ((this.clicktextmenu = function (e) {
              _waseeVRObj.showInfo(
                __WASEE_DATA__.product.panoinfo.contextmenu[e]
              );
            }),
            _krpano.call(e));
        }
        __INFO__.user.id == paramObj.city_default_pool_id &&
          _krpano.call(
            'set(contextmenu.item[zdy_999],caption="' +
              _langObj.guanliyuanpeiz +
              '",onclick="js(pano_otherModule.dom_adminSetAlert())");'
          ),
          _panoGroupObj.setPanoGroupHtml();
        try {
          if (
            (0 != __WASEE_DATA__.product.switch.definimenu.bottommenu_show ||
              0 != __WASEE_DATA__.product.switch.definimenu.topmenu_show) &&
            __WASEE_DATA__.product.switch.definimenu &&
            __WASEE_DATA__.product.switch.definimenu.menus
          ) {
            let e = {},
              a = {},
              t = "",
              o = "",
              s = 6,
              i = 0,
              n = 2;
            "pc" != _waseeVRObj.isBrowser &&
              (0 == $(".pano_group_list_btn").length && (s++, n++),
              1 != __WASEE_DATA__.product.switch.definimenu.showpanoinfo &&
                s++);
            for (
              let r = 0;
              r < __WASEE_DATA__.product.switch.definimenu.menus.length;
              r++
            ) {
              const p = __WASEE_DATA__.product.switch.definimenu.menus[r];
              if (1 == p.show) {
                if (p.pid > 0)
                  a["_" + p.pid]
                    ? a["_" + p.pid].child_list
                      ? a["_" + p.pid].child_list.push("_" + p.id)
                      : (a["_" + p.pid].child_list = ["_" + p.id])
                    : (a["_" + p.pid] = { child_list: ["_" + p.id] });
                else if (3 != __WASEE_DATA__.product.panoinfo.skinItem) {
                  let e = p.icon;
                  e > 0
                    ? (e =
                        paramObj.resourceWasee +
                        "/home/vrpano/img/menusicon/menus_" +
                        (3 == __WASEE_DATA__.product.panoinfo.skinItem
                          ? 0
                          : __WASEE_DATA__.product.panoinfo.menustyle) +
                        "_" +
                        e +
                        ".png")
                    : e.indexOf("%$mypath%") >= 0 &&
                      (e = e.replace(
                        "%$mypath%",
                        paramObj.resourceWasee + "/home/vrpano/"
                      )),
                    i < s &&
                      0 == p.showposition &&
                      (i++,
                      i <= 4
                        ? i <= n || "pc" == _waseeVRObj.isBrowser
                          ? (t +=
                              '<em class="flex_center_y defi" data-id="' +
                              p.id +
                              '" data-pid="' +
                              p.pid +
                              '"><img class="iconimg" src="' +
                              e +
                              '"><span class="title">' +
                              p.title +
                              "</span></em>")
                          : (o +=
                              '<em class="flex_center_y defi" data-id="' +
                              p.id +
                              '" data-pid="' +
                              p.pid +
                              '"><img class="iconimg" src="' +
                              e +
                              '"><span class="title">' +
                              p.title +
                              "</span></em>")
                        : "pc" == _waseeVRObj.isBrowser
                        ? (t +=
                            '<em class="flex_center_y defi" data-id="' +
                            p.id +
                            '" data-pid="' +
                            p.pid +
                            '"><img class="iconimg" src="' +
                            e +
                            '"><span class="title">' +
                            p.title +
                            "</span></em>")
                        : (o +=
                            '<em class="flex_center_y defi none" data-id="' +
                            p.id +
                            '"><img class="iconimg" src="' +
                            e +
                            '"><span class="title">' +
                            p.title +
                            "</span></em>"));
                }
                e["_" + p.id]
                  ? (e["_" + p.id] = $.extend(p, e["_" + p.id]))
                  : (e["_" + p.id] = p);
              }
            }
            for (let t in a) e[t] && (e[t].child_list = a[t].child_list);
            (__WASEE_DATA__.product.switch.definimenu.menus = e),
              3 != __WASEE_DATA__.product.panoinfo.skinItem &&
                ("" != t &&
                  $(".pano_bottom_item .item_bottom .menu_left").append(t),
                "" != o &&
                  $(".pano_bottom_item .item_bottom .menu_right").prepend(o));
          }
          3 == __WASEE_DATA__.product.panoinfo.skinItem &&
            (window.ppts = setInterval(function () {
              if ("object" == typeof $._Rouslette) {
                clearInterval(window.ppts), delete window.ppts;
                try {
                  _waseeVRObj.sceneId > 0 &&
                    _panoGroupObj.singroupscene(_waseeVRObj.sceneId);
                } catch (e) {
                  goalert("error2.2:"), goalert(e);
                }
              }
            }, 1e3));
          try {
            this.onswitch();
          } catch (e) {
            goalert("error3.2:"), goalert(e);
          }
        } catch (e) {
          goalert("error2:"), goalert(e);
        }
        this.panoSkinreqruet(),
          "scene_map" != _krpano.get("xml.scene") &&
            ("0" != paramObj.krpano.scenic_map ||
              ("0" != paramObj._getSceneId &&
                "" != paramObj._getSceneId &&
                "_map" != paramObj._getSceneId)) &&
            setTimeout(function () {
              setTimeout(function () {
                _waseeVRObj.chargeObj.setChargeweizhi();
              }, 500);
            }, 500);
      }
      if (
        ((4 != __WASEE_DATA__.product.panoinfo.skinItem &&
          "CN" == _languageObj.lang) ||
          _krpano.set(
            "layer[compass_plate].url",
            paramObj.resourceWasee +
              "/home/vrpano/img/compass_plate_" +
              (4 == __WASEE_DATA__.product.panoinfo.skinItem
                ? "EN"
                : _languageObj.lang) +
              ".png"
          ),
        0 != __WASEE_DATA__.product.panoinfo.menustyle ||
          (null != this.roNumcode && 0 != __INFO__.user.id) ||
          (1 == this.isapk &&
            this.sceneId > 0 &&
            _panoGroupObj.panoOFFgroup[this.sceneId] &&
            3 != _panoGroupObj.panoOFFgroup[this.sceneId].media_type &&
            1 == __WASEE_DATA__.product.switch.overallNav.showVR) ||
          this.setPageParrama(1, "panoOverFirst"),
        "scenemap" == _waseeVRObj.prev_sceneName && 2 == this.loadpanoCount)
      )
        this.go_panoOver_callBack();
      else {
        let e = this;
        this.addJavascript({
          src:
            paramObj.resourceWasee +
            "/home/vrpano/js/expo.min.js?" +
            Math.random(),
          callBack: function () {
            __WASEE_DATA__.product.panoinfo.menustyle > 0 &&
              ((1 == e.isapk &&
                e.sceneId > 0 &&
                _panoGroupObj.panoOFFgroup[e.sceneId] &&
                3 != _panoGroupObj.panoOFFgroup[e.sceneId].media_type &&
                1 == __WASEE_DATA__.product.switch.overallNav.showVR) ||
                e.setPageParrama(1, "panoOverFirst")),
              (window.turpm = setInterval(function () {
                window.turpmc ? window.turpmc++ : (window.turpmc = 1),
                  "object" == typeof _waseeVRObj.panoOver_callBackData &&
                    (clearInterval(window.turpm),
                    delete window.turpm,
                    _waseeVRObj.go_panoOver_callBack()),
                  window.turpmc >= 60 &&
                    (clearInterval(window.turpm), delete window.turpm);
              }, 1e3));
          },
        });
      }
      ("63676" == paramObj.krpano.krpano_id ||
        location.host.indexOf("onethink.com") > -1) &&
        ($(".pano_bottom_item .menu_right").prepend(
          '<em class="flex_center_y tphd"><span class="icon flex__center"><i class="iconfont icon_shuangzhibo"></i></span><span class="title">同屏互动</span></em><em class="flex_center_y" onclick="_waseeVRObj.searchAllObj.init()"><span class="icon flex__center"><i class="iconfont icon_shuangzhibo"></i></span><span class="title">搜索</span></em>'
        ),
        $(".pano_bottom_item .menu_right .tphd").click(function () {
          _waseeVRObj.opentphd(1);
        })),
        this.roNumcode &&
          this.roNumcode.length > 2 &&
          this.opentphd(null, this.roNumcode);
    },
    setpanoinfonotice: function (e) {
      let a = 0,
        t = 0,
        o = 32,
        s = 8,
        i = 16,
        n = 0,
        r = "";
      switch (
        (this.isDesktop ||
          ((o = 30),
          (s = 7),
          (i = 10),
          (n = 30),
          paramObj._width < 375 && (n = 15)),
        paramObj._isForAPP && (t = paramObj._App_NaviBarHeight + 10),
        e)
      ) {
        case 1:
          paramObj._isForAPP &&
            (r =
              "width: 60%;margin-left:50%;transform: translateX(-50%);border-radius: 20px;"),
            0 == $(".syNoticeUlbody").length &&
              $("#pano_body").prepend(
                '<div class="syNoticeUlbody tstion" style="top: ' +
                  t +
                  "px;height: " +
                  o +
                  "px;" +
                  r +
                  '"></div>'
              );
          break;
        case 2:
          0 == $(".syNoticeUlbody").length
            ? ((this.domHeight.noticeHeight = 0), (o = 0))
            : ((this.domHeight.noticeHeight = o + t), (a = 1));
          let p = this.domHeight.noticeHeight,
            l = this.domHeight.noticeHeight;
          this.isDesktop ||
            ($("#ser_scene").length > 0 &&
              $("#ser_scene").is(":visible") &&
              ((p = $("#ser_scene").offset().top + $("#ser_scene").height()),
              (l = p),
              (a = 1))),
            $(".cintyfwliBody").css("top", p + i + "px"),
            3 == __WASEE_DATA__.product.panoinfo.skinItem &&
              $(".skinItem3 .navlefttop .compass").length > 0 &&
              setTimeout(function () {
                _krpano.call(
                  "set(layer[compass],y=" +
                    $(".skinItem3 .navlefttop .compass").offset().top +
                    ",x=" +
                    $(".navlefttop").offset().left +
                    ")"
                );
              }, 300),
            this.isDesktop &&
              $(".pcMenu").length > 0 &&
              ($(".pcMenu").css("top", l + i + "px"),
              (o += $(".pcMenu").height() + 16),
              (l = $(".pcMenu").offset().top + $(".pcMenu").height()),
              (a = 1)),
            1 == this.is_switch_nav
              ? $("#pano_nav .navMapIcon").length > 0
                ? ((l = $("#pano_nav .navMapIcon").height()), (a = 1))
                : $("#pano_nav .search").length > 0 &&
                  ((l = $("#pano_nav .search").height()), (a = 1))
              : 1 == __WASEE_DATA__.product.panoinfo.skinItem &&
                $(".house-rg-tp-menus").length > 0 &&
                !(
                  $("#ser_scene").length > 0 && $("#ser_scene").is(":visible")
                ) &&
                ((l =
                  $(".house-rg-tp-menus").offset().top +
                  $(".house-rg-tp-menus").height()),
                (a = 1)),
            1 == a
              ? $(".navrighttop,.radarimgbody").css("top", l + i + "px")
              : $(".navrighttop").removeAttr("style");
          break;
        default:
          if (0 == $("#syNoticeUlNew").length) {
            if (
              0 != __WASEE_DATA__.product.panoinfo.notice_show &&
              __WASEE_DATA__.product.panoinfo.notice &&
              __WASEE_DATA__.product.panoinfo.notice.length > 0
            ) {
              let e = "",
                a = 0,
                t = 32,
                o = 8,
                s = "";
              for (
                let a = 0;
                a < __WASEE_DATA__.product.panoinfo.notice.length;
                a++
              ) {
                const t = __WASEE_DATA__.product.panoinfo.notice[a];
                e += '<li data-Id="' + a + '">' + t.title + "</li>";
              }
              paramObj._isForAPP &&
                (s =
                  "width: 60%;margin-left:50%;transform: translateX(-50%);border-radius: 20px;"),
                0 == $(".syNoticeUlbody").length &&
                  $("#pano_body").prepend(
                    '<div class="syNoticeUlbody tstion" style="top: ' +
                      a +
                      "px;height: " +
                      t +
                      "px;" +
                      s +
                      '"></div>'
                  ),
                $(".syNoticeUlbody").html(
                  '<ul id="syNoticeUlNew" style="top:' +
                    o +
                    'px;">' +
                    e +
                    "</ul>"
                ),
                (this.domHeight.noticeHeight = t + a),
                $("body").on("click", "#syNoticeUlNew li", function () {
                  let e =
                    __WASEE_DATA__.product.panoinfo.notice[
                      $(this).attr("data-Id")
                    ];
                  "" != e.url &&
                    _waseeVRObj.showInfo({
                      url: e.url,
                      openlinktype: e.click_type,
                    });
                }),
                $.syRunHorseLight();
            } else
              $(".syNoticeUlbody").remove(), (this.domHeight.noticeHeight = 0);
            this.setpanoinfonotice(2);
          }
      }
    },
    autoratenext: function (e) {
      let a =
        (e >= 0 ? e : _panoGroupObj._guidescenelist.indexOf(this.sceneId)) + 1;
      a >= _panoGroupObj._guidescenelist.length && (a = 0),
        (_panoGroupObj.panoOFFgroup[_panoGroupObj._guidescenelist[a]].pid > 0 &&
          0 ==
            _panoGroupObj.panoOFFgroup[_panoGroupObj._guidescenelist[a]]
              .child_type) ||
        (0 ==
          _panoGroupObj.panoOFFgroup[_panoGroupObj._guidescenelist[a]].isshow &&
          0 == __WASEE_DATA__.product.switch.overallNav.isautoshow)
          ? this.autoratenext(a)
          : (this.autonextid =
              _panoGroupObj._guidescenelist[a] == this.sceneId
                ? -1
                : "scene" + _panoGroupObj._guidescenelist[a]);
    },
    getsceneMeta: function (e) {
      let a = {},
        t = e > 0 ? e : this.sceneId;
      return (
        t > 0 && this.sceneMetaList && this.sceneMetaList[t]
          ? (a = this.sceneMetaList[t])
          : t > 0 &&
            _panoGroupObj.panoOFFgroup[t] &&
            ((a = _panoGroupObj.panoOFFgroup[t].meta),
            $.isJSONstr(a) && (a = JSON.parse(a)),
            "object" != typeof a && (a = {}),
            a.voicescale || (a.voicescale = 1),
            null == a.voiceendtime && (a.voiceendtime = -1),
            null == this.sceneMetaList && (this.sceneMetaList = {}),
            1 == this.istphd && (a.notice = []),
            (this.sceneMetaList[t] = a)),
        a
      );
    },
    opentphd: function (e, a) {
      function t() {
        wstphdObj.init({
          resourceWasee: paramObj.resourceWasee,
          element: $("#subinformain"),
          roNumcode:
            location.hostname.indexOf("wasee.com") < 0
              ? "QIMCCMEI"
              : a || $.getRandomStr(6).toUpperCase(),
          userInfo: {
            uid:
              __INFO__.user.id > 0
                ? __INFO__.user.id
                : __INFO__.user.anchor_auth_id > 0
                ? "wx" + __INFO__.user.anchor_auth_id
                : 0,
            nickname: __INFO__.user.nickname,
            headimg: __INFO__.user.headimg,
            isAdm: e,
          },
          callBack: function () {
            _soundObj.stopsound("allsound", "temporary_pause"),
              (_waseeVRObj.sceneMeta.notice = []),
              _waseeVRObj.clearScreen(0),
              (_waseeVRObj.clearScreen = function () {}),
              $(".speguidetail,.syNoticeUlbody").remove(),
              (_waseeVRObj.istphd = 1),
              $("#pano_body").addClass("wstphd");
          },
        });
      }
      location.hostname.indexOf("wasee.com") < 0 &&
        ((__INFO__.user.id = $.getParameter("uid")),
        (__INFO__.user.nickname = "公子梅" + $.getParameter("uid")),
        (__INFO__.user.headimg =
          "https://www.onethink.com/v/Data/upload/live/201708/1/liveimage/201812/5c1afe279d06d.jpg"),
        (e = 1 == __INFO__.user.id ? 1 : null)),
        "object" == typeof wstphdObj
          ? t()
          : $.addJavascript({
              src:
                paramObj.resourceWasee +
                "/home/vrpano/js/wstphd.js?" +
                paramObj._wstphdjs_time,
              callBack: function () {
                t();
              },
            });
    },
    openscenemapBack: function () {
      let e = this;
      if (
        1 == __WASEE_DATA__.product.switch.overallNav.switch_hdmap &&
        0 == __WASEE_DATA__.product.panoinfo.scenic_map
      ) {
        function a() {
          function a() {
            (e.sceneMapId = 1),
              _soundObj.stopsound("allsound", "temporary_pause"),
              $(".music,.voice,.HOTCSTESGORY").addClass("noneee"),
              _waseeVRObj.setpanoinfonotice();
          }
          function t() {
            (e.sceneMapId = 0),
              _soundObj.stopsound("allsound", "temporary_nopause"),
              $(".music,.voice,.HOTCSTESGORY").removeClass("noneee"),
              2 == e.openscenemapBackcount &&
                _soundObj.soundList.bgvoice &&
                "" != _soundObj.soundList.bgvoice.url &&
                1 == _soundObj.soundList.bgvoice.yy_autoplay &&
                _soundObj.playsound(
                  "bgvoice",
                  _soundObj.soundList.bgvoice.url,
                  _soundObj.soundList.bgvoice.loop,
                  { autoplay: !0, volume: _soundObj.soundList.bgvoice.volume }
                ),
              2 == e.openscenemapBackcount &&
                _soundObj.soundList.bgmusic &&
                "" != _soundObj.soundList.bgmusic.url &&
                1 == _soundObj.soundList.bgmusic.yy_autoplay &&
                _soundObj.playsound(
                  "bgmusic",
                  _soundObj.soundList.bgmusic.url,
                  _soundObj.soundList.bgmusic.loop,
                  { autoplay: !0, volume: _soundObj.soundList.bgmusic.volume }
                ),
              "object" == typeof pano_otherModule && pano_otherModule.notice();
          }
          e.openscenemapBackcount++,
            $("#openmap-alert").length > 0 && $("#openmap-alert").is(":visible")
              ? a()
              : t(),
            e.is_scenic > 0 && _scenicObj.openscenemapBack(e.sceneMapId);
        }
        this.openscenemapBackcount
          ? ($("#openmap-alert").is(":visible") &&
              ((this.sceneMapId = 1),
              e.is_scenic > 0 && _scenicObj.openscenemapBack(this.sceneMapId)),
            setTimeout(function () {
              a();
            }, 700))
          : ((e.openscenemapBackcount = 0), a());
      }
    },
    panoMousedown: function () {
      (this.is_panoMousedown = !0),
        "function" == typeof window.playbgsound && window.playbgsound(),
        1 == __WASEE_DATA__.product.switch.overallNav.enableLookto &&
          _krpano.set("bt", 0),
        (this._hlookat_change = _krpano.get("view.hlookat")),
        window.radarhotview &&
          $(".radarimgbody .radarimg .hot.on").length > 0 &&
          (window.radarhotview.dq_rotate = window.radarhotview.rotate),
        $(".panotipsContent.on").length > 0 &&
          "1" != $(".panotipsContent").attr("data-focus") &&
          $(".panotipsContent.on").removeClass("on"),
        __WASEE_DATA__.product.panoinfo.wasee_scenic_id > 0 &&
          "function" == typeof _scenicObj.panoMousedown &&
          _scenicObj.panoMousedown();
    },
    panoMouseup: function () {
      delete this.is_panoMousedown;
    },
    loginsucc: function () {
      if (
        ((__INFO__.password_status = 0),
        _krpano.call("set(lkmult,0);"),
        $(".lock").removeClass("on"),
        setTimeout("$('.lock,.lockbg').remove();", 300),
        1 == _openobj.isopenin)
      ) {
        $(".openinobj").removeClass("visib_h"),
          1 == _openobj.cover_type &&
            "" != __INFO__.format_pano_expire &&
            _openobj._vVideo &&
            _openobj._vVideo.play(),
          0 != __WASEE_DATA__.product.panoinfo.scenic_map ||
            (1 != __WASEE_DATA__.product.switch.overallNav.openmap_inshow &&
              null !=
                __WASEE_DATA__.product.switch.overallNav.openmap_inshow) ||
            "object" != typeof openmapModule ||
            openmapModule.init(),
          _openobj.autoopen && _openobj.autoopen();
        var e = this.sceneMeta
          ? this.sceneMeta
          : this.getsceneMeta(_krpano.get("xml.scene").substring(5));
        e.pwd && e.pwd.cate_valid.length > 1
          ? this.chargescenepwd(e)
          : _krpano.call("toggleasethe();");
      } else if (!_krpano.get("in_startanima")) {
        e = this.sceneMeta
          ? this.sceneMeta
          : this.getsceneMeta(_krpano.get("xml.scene").substring(5));
        e.pwd && e.pwd.cate_valid.length > 1
          ? this.chargescenepwd(e)
          : (_krpano.call("toggleasethe();"),
            _waseeVRObj.panoOver(_krpano.get("xml.scene")),
            _waseeVRObj.panoOverFirst());
      }
    },
    chargescenepwd: function (e) {
      if (e.pwd && e.pwd.cate_valid.length > 1 && 1 != _waseeVRObj.scenepwdok) {
        (this.islkmult = !0), (this.isscenepwd = !0);
        try {
          "object" == typeof pano_otherModule
            ? pano_otherModule.scene_pwd({
                sceneMeta: e,
                callBack: function () {
                  _krpano.call("wait(0.5);toggleasethe(on);delete(lockscene);"),
                    (_waseeVRObj.islkmult = !1),
                    (_waseeVRObj.isscenepwd = !1),
                    _waseeVRObj.sceneMeta && _waseeVRObj.sceneMeta.pwd
                      ? (_waseeVRObj.sceneMeta.pwd.cate_valid = "")
                      : (_waseeVRObj.scenepwdok = 1),
                    _krpano.get("in_startanima") ||
                      (_waseeVRObj.panoOver(), _waseeVRObj.panoOverFirst());
                },
              })
            : ($("head").append(
                '<link id="pano_other_css" rel="stylesheet" type="text/css" href="' +
                  paramObj.resourceWasee +
                  "/home/vrpano/css/pano_other.css?" +
                  paramObj.pano_other_time +
                  '">'
              ),
              _waseeVRObj.addJavascript({
                src:
                  paramObj.resourceWasee +
                  "/home/vrpano/js/pano_other.min.js?" +
                  paramObj.pano_other_time,
                callBack: function () {
                  pano_otherModule.scene_pwd({
                    sceneMeta: e,
                    callBack: function () {
                      _krpano.call(
                        "wait(0.5);toggleasethe(on);delete(lockscene);"
                      ),
                        (_waseeVRObj.islkmult = !1),
                        (_waseeVRObj.isscenepwd = !1),
                        _waseeVRObj.sceneMeta && _waseeVRObj.sceneMeta.pwd
                          ? (_waseeVRObj.sceneMeta.pwd.cate_valid = "")
                          : (_waseeVRObj.scenepwdok = 1),
                        _krpano.get("in_startanima") ||
                          (_waseeVRObj.panoOver(), _waseeVRObj.panoOverFirst());
                    },
                  });
                },
              }));
        } catch (e) {}
      }
    },
    projectiveImgback: {
      playBack: function () {},
      pausedBack: function () {},
      endedBack: function () {},
    },
    panovideoObj: {
      play: function () {
        this.video.play();
      },
      seek: function (e) {
        e >= 0 &&
          (this.video.seek(e),
          this.timeupdate(),
          "object" == typeof animateHotspot && animateHotspot.seek(e));
      },
      pause: function () {
        this.video.pause();
      },
      stop: function () {
        this.video.stop(), this.onvideocomplete();
      },
      togglepause: function () {
        this.video.togglepause();
      },
      load_video_sources: function (e) {
        _waseeVRObj.isLoadScene = !1;
        let a =
          "object" == typeof e && e.sceneId > 0
            ? e.sceneId
            : _krpano.get("xml.scene").substr(5);
        if (
          ((this.sceneId = a),
          (this.reload = !0),
          "object" != typeof e &&
            $(
              ".panolist .panolistjirong .panotb>.swiper-container>.swiper-wrapper .panowrap[data-scenename=scene" +
                a +
                "]"
            )
              .addClass("on")
              .siblings()
              .removeClass("on"),
          _panoGroupObj.panoOFFgroup[a] &&
            2 == _panoGroupObj.panoOFFgroup[a].media_type &&
            _panoGroupObj.panoOFFgroup[a].video)
        ) {
          (this.totalbytes = 0),
            0 != $(".videocontrol").length ||
              paramObj._isForAPP ||
              ($("#subinformain").append(
                '<div class="videocontrol flex_center_y flex__justify__b"><div class="left"><em class="btnPlay flex_center_y"><i class="iconfont playpause icon_kaishi"></i><i class="iconfont playpause icon_zanting"></i></em></div><div class="center flex_center_y flex__justify__b"><span class="timeing time">00:00</span><div class="zjdu_body flex_center_y"><span class="bg"></span><span class="loaded"></span><span class="zjdu"></span></div><span class="alltime time">00:00</span></div><div class="right"><div class="sourcelist flex_center_y"><span class="sourename flex__center">-</span><div class="list"></div><span class="tips"></span></div></div></div>'
              ),
              this.showhidevideocontro()),
            _waseeVRObj.isIOS &&
              0 == $(".panovideoplay").length &&
              $(".videocontrol").after(
                '<div class="panovideoplay"><i class="iconfont playpause icon_kaishi"></i></div>'
              ),
            _waseeVRObj.panovideoObj.setvideocontrolwzhi(3);
          let e = _panoGroupObj.panoOFFgroup[a].video,
            t = "",
            o = _panoGroupObj.panoOFFgroup[a].default_resolution,
            s = "",
            i = "",
            n = e.super,
            r = e.high,
            p = e.smooth,
            l = e._2K,
            d = e._4K;
          if (
            ((original = e.original),
            n && n.length > 10 && _waseeVRObj.isDesktop
              ? ((s =
                  '<span data-type="super" class="on">高清</span><span data-type="high">标清</span><span data-type="smooth">流畅</span>'),
                (t = n),
                (i = "高清"))
              : r && r.length > 10
              ? ((s =
                  '<span data-type="high" class="on">标清</span><span data-type="smooth">流畅</span>'),
                (t = r),
                (i = "标清"))
              : p &&
                p.length > 10 &&
                ((s = '<span data-type="smooth" class="on">流畅</span>'),
                (t = p),
                (i = "流畅")),
            l && l.length > 10)
          ) {
            let e = "";
            "" == t && ((t = l), (e = ' class="on"'), (i = "2K")),
              (s += '<span data-type="_2K"' + e + ">2K</span>");
          }
          if (d && d.length > 10) {
            let e = "";
            "" == t && ((t = d), (e = ' class="on"'), (i = "4K")),
              (s += '<span data-type="_4K"' + e + ">4K</span>");
          }
          if (original && original.length > 10) {
            let e = "";
            "" == t && ((t = original), (e = ' class="on"'), (i = "原画"));
          }
          if (
            ($(".videocontrol .right .sourename").html(i),
            $(".videocontrol .right .list").html(s),
            "" != o && e[o] && e[o].length > 10)
          ) {
            t = e[o];
            let a = {
              smooth: "流畅",
              high: "标清",
              super: "高清",
              _2K: "2K",
              _4K: "4K",
              original: "原画",
            };
            $(".videocontrol .right .sourename").html(a[o]),
              $(".videocontrol .right .list span[data-type=" + o + "]")
                .addClass("on")
                .siblings()
                .removeClass("on");
          }
          if (
            ($(".videocontrol .right .list span").length < 2
              ? ($(".videocontrol .right").addClass("none"),
                $(".videocontrol .center").css("width", "calc(100% - 26px)"))
              : ($(".videocontrol .right").removeClass("none"),
                $(".videocontrol .center").removeAttr("style")),
            "" == t)
          )
            _waseeVRObj.toast({ text: "视频地址不存在" });
          else {
            this.videourl = t;
            let e = (_waseeVRObj.isIOS, !1);
            (this.posterurl = _panoGroupObj.panoOFFgroup[a].thumburl),
              _krpano.call(
                "plugin[video].playvideo(" +
                  t +
                  "," +
                  this.posterurl +
                  "," +
                  e +
                  ")"
              );
          }
          (this.video = _krpano.get("plugin[video]")),
            (this.video.loop = !0),
            "object" == typeof animateHotspot && animateHotspot.resetInit(),
            this.play(),
            (this.totalbytes = 0),
            (this.totaltime = _panoGroupObj.panoOFFgroup[this.sceneId].time),
            $(".videocontrol .center .alltime").html(
              _soundObj.imgbodyData.formatTime(this.totaltime)
            );
        }
      },
      videointerface_play: function (e) {
        let a,
          t = $(".videocontrol .right .sourename").html();
        if ("object" == typeof e)
          return (
            (this.videourl = e.url && e.url.length > 10 ? e.url : ""),
            (a = e.time >= 0 ? e.time : 0),
            void (t = "指定视频")
          );
        if (
          ((this.videourl = _panoGroupObj.panoOFFgroup[this.sceneId].video[e]),
          "" == this.videourl)
        )
          _waseeVRObj.toast({ text: "视频地址不存在" });
        else {
          this.posterurl = _panoGroupObj.panoOFFgroup[this.sceneId].thumburl;
          let e = this.video.ispaused,
            o = a >= 0 ? a : this.video.time;
          clearInterval(this.timeupdateInterv),
            $(".videocontrol .right .tips").html(
              "正在为您切换到<i>" + t + "</i>,请稍候..."
            ),
            _krpano.call(
              "plugin[video].playvideo(" +
                this.videourl +
                "," +
                this.posterurl +
                "," +
                e +
                "," +
                o +
                ")"
            );
        }
      },
      setcallBack: function (e) {
        "object" == typeof e &&
          "play" == e.type &&
          (this.play_callBackData || (this.play_callBackData = {}),
          (this.play_callBackData = $.extend(
            this.play_callBackData,
            e.callBack
          )));
      },
      setvideocontrolwzhi: function (e) {
        function a() {
          let e = 0;
          if ($(".pano_bottom_item").hasClass("onhide")) {
            if ($(".specigroupBody.on").length > 0)
              (e = 1),
                setTimeout(function () {
                  $(".specigroupBody.on").offset().top &&
                    ((t =
                      paramObj._height - $(".specigroupBody.on").offset().top),
                    $(".videocontrol").css("bottom", t + 12 + "px"));
                }, 250);
            else if (
              $(".speguidetail").length > 0 &&
              !$(".speguidetail").hasClass("hide") &&
              ((!$(".pano_bottom_item").hasClass("onhide") &&
                !$(".pano_bottom_item").hasClass("on")) ||
                $(".pano_bottom_item").hasClass("on"))
            ) {
              t = 55 + $(".speguidetail").height();
            }
          } else
            $(".pano_bottom_item").hasClass("on") &&
              (t = $(".pano_bottom_item.on").height());
          0 == e && $(".videocontrol").css("bottom", t + 12 + "px");
        }
        if (0 == $(".videocontrol").length) return;
        let t = 20;
        switch (__WASEE_DATA__.product.panoinfo.skinItem) {
          case 3:
            a();
            break;
          default:
            _waseeVRObj.isDesktop || a();
        }
      },
      showhidevideocontro: function (e) {
        e
          ? (this.showhidevideocontroInt &&
              (clearTimeout(this.showhidevideocontroInt),
              delete this.showhidevideocontroInt),
            $(".videocontrol").hasClass("onhide") &&
              $(".videocontrol").removeClass("onhide"),
            this.setvideocontrolwzhi(),
            this.showhidevideocontro())
          : (this.showhidevideocontroInt = setTimeout(function () {
              $(".videocontrol").addClass("onhide");
            }, 5e3));
      },
      timeupdate: function () {
        let e = this,
          a = e.video.time;
        a >= e.totaltime && (a = e.totaltime),
          $(".videocontrol .center .timeing").html(
            _soundObj.imgbodyData.formatTime(a)
          );
        var t = a / e.totaltime;
        $(".videocontrol .center .zjdu").css("width", 100 * t + "%");
      },
      getbufferData: function () {
        if (paramObj._isForAPP) {
          let e = this;
          _waseeVRObj__isApp.API_Wasee_Front_CallBack(10, {
            loadedbytes: e.video.loadedbytes,
            totalbytes: e.totalbytes,
            time: e.video.time,
            totaltime: e.totaltime,
          });
        }
      },
      onvideoready: function () {
        $(".videocontrol .right .tips").empty();
        let e = this;
        (_waseeVRObj.panovideoObj.video.autoresume = !0),
          (e.ds_loadDownby = setInterval(function () {
            if (e.totalbytes > 0) {
              let a = e.video.loadedbytes;
              if (a >= e.totalbytes)
                clearInterval(e.ds_loadDownby),
                  delete e.ds_loadDownby,
                  $(".videocontrol .center .loaded").css("width", "100%");
              else {
                let t = a / e.totalbytes;
                $(".videocontrol .center .loaded").css("width", 100 * t + "%");
              }
            } else e.totalbytes = e.video.totalbytes;
          }, 1e3));
      },
      onvideoplay: function () {
        $(".panovideoplay").remove(),
          $(".videocontrol .btnPlay").addClass("on"),
          this.reload && (delete this.reload, this.showhidevideocontro(1));
        let e = this;
        (this.huancint = setTimeout(function () {
          0 == e.video.time &&
            $("#subinformain").append(
              '<img class="panovideohuanc" src="' +
                paramObj.resourceWasee +
                '/home/vrpano/img/loadv.gif">'
            );
        }, 300)),
          (this.timeupdateInterv = setInterval(function () {
            e.timeupdate(), e.video.time > 0 && $(".panovideohuanc").remove();
          }, 500)),
          "object" == typeof animateHotspot && animateHotspot.play(),
          this.go_videoCallbackEvent(1);
      },
      onvideopaused: function () {
        clearInterval(this.timeupdateInterv),
          $(".videocontrol .btnPlay").removeClass("on"),
          "object" == typeof animateHotspot && animateHotspot.pause(),
          this.go_videoCallbackEvent(2);
      },
      onvideocomplete: function () {
        clearInterval(this.timeupdateInterv),
          this.ds_loadDownby &&
            (clearInterval(this.ds_loadDownby), delete this.ds_loadDownby),
          this.huancint && (clearTimeout(this.huancint), delete this.huancint),
          $(".videocontrol .btnPlay").removeClass("on"),
          $(".panovideohuanc").length > 0 && $(".panovideohuanc").remove(),
          "object" == typeof animateHotspot && animateHotspot.stop(),
          this.go_videoCallbackEvent(3);
      },
      videoCallbackEvent: {},
      addvideoCallbackEvent: function (e) {
        "object" == typeof e &&
          (1 == e.isdel
            ? e.name && delete this.videoCallbackEvent[e.name]
            : (this.videoCallbackEvent[e.name] = e));
      },
      go_videoCallbackEvent: function (e) {
        if (this.videoCallbackEvent)
          for (var a in this.videoCallbackEvent)
            if (Object.hasOwnProperty.call(this.videoCallbackEvent, a)) {
              const t = this.videoCallbackEvent[a];
              t.type == e && "function" == typeof t.callBack && t.callBack();
            }
      },
    },
    chargeObj: {
      voicecount: 0,
      scenecount: 0,
      sceneId: 0,
      _tips: "购买后60日内有效",
      isLogin: function () {
        return _waseeVRObj.wxAuthLogin({ from: "chargeObj" });
      },
      init: function () {
        if (
          ((this.isinit = !0),
          (this.scenecount = _krpano.get("scene.count")),
          (paramObj.sound_freecount = 3),
          (paramObj.charge_price =
            __WASEE_DATA__.product.panoinfo.charge_price),
          (paramObj.isbuyed =
            _waseeVRObj.is_ememap > 0 ? 0 : __INFO__.user.isbuyed),
          1 == paramObj.isbuyed &&
            paramObj.charge_price > 0 &&
            0 == this.voicecount)
        )
          for (var e in _panoGroupObj.panoOFFgroup)
            if (
              0 != e &&
              Object.hasOwnProperty.call(_panoGroupObj.panoOFFgroup, e)
            ) {
              let a = _waseeVRObj.getsceneMeta(e);
              if ("object" == typeof a && 2 == a.voicetype)
                a.videourl.length > 10 && this.voicecount++;
              else {
                let a = _panoGroupObj.panoOFFgroup[e].voice;
                a &&
                  1 != a.closevoice &&
                  "true" != a.closevoice &&
                  a.voiceurl.length > 10 &&
                  this.voicecount++;
              }
            }
      },
      isBuySoundcharge: function (e) {
        let a = this,
          t = !0;
        if (
          ((a.sceneId = _waseeVRObj.sceneId),
          this.isinit || this.init(),
          1 == paramObj.isbuyed &&
            paramObj.charge_price > 0 &&
            this.voicecount > 0)
        ) {
          if (((t = !1), "object" == typeof e)) {
            e.id || (e.id = a.sceneId);
            let t = _krpano.get("scene[scene" + e.id + "]");
            e.voiceurl ||
              (0 != t.closeMusic &&
                null != t.closeMusic &&
                "false" != t.closeMusic) ||
              "" == t.voiceurl ||
              (e.voiceurl = t.voiceurl);
          }
          let o = "",
            s =
              '景区视听包<span class="glll">（包含所有语音讲解及景区全景浏览）</span>',
            i = 1,
            n = !1;
          if (paramObj.sound_freecount > 0) {
            let a = $.getCookie("sound_freelist"),
              s = 0;
            a.length > 0 &&
              ((s = a.split("|").length - 1),
              "object" == typeof e &&
                e.voiceurl &&
                a.indexOf(e.voiceurl) >= 0 &&
                ((n = !0), (t = !0))),
              "object" == typeof e &&
                e.voiceurl &&
                (n ||
                  (s < paramObj.sound_freecount
                    ? (s++,
                      (t = !0),
                      $.setCookie(
                        "sound_freelist",
                        a + "|" + e.voiceurl,
                        31104e8
                      ))
                    : (i = 2))),
              1 == i &&
                (o =
                  '<div class="smatip">可免费试听' +
                  paramObj.sound_freecount +
                  '处<i class="yst">' +
                  s +
                  "</i>/" +
                  paramObj.sound_freecount +
                  "</div>");
          }
          "object" == typeof e && e.voiceurl && (a.voiceurl = e.voiceurl),
            "object" != typeof pay_paramObj &&
              ($("head").append(
                '<link rel="stylesheet" type="text/css" href="' +
                  paramObj.resourceWasee +
                  '/css/waseepay.css">'
              ),
              _waseeVRObj.setCss(".wspay{z-index: 9999;position: relative;}"),
              location.href.indexOf("onethink") > 0
                ? $.addJavascript({
                    src: paramObj.resourceWasee + "/js/waseepay.js",
                  })
                : $.addJavascript({
                    src:
                      paramObj.resourceWasee +
                      "/js/waseepay.min.js?" +
                      paramObj.waseepay_time,
                  })),
            "object" != typeof e ||
            ("object" == typeof e && 0 != e.showpay && !n)
              ? 1 == i
                ? (0 == $(".chargeBody").length
                    ? ($("#subinformain").append(
                        '<div class="chargeBody ' +
                          $.isPhone() +
                          '"><div class="content"><span class="closecharge">X</span><div class="title">' +
                          s +
                          "</div>" +
                          o +
                          '<div class="taglist flex__wrap__b"><span class="TagITEMTONE"><i class="it">' +
                          this.voicecount +
                          '</i>处讲解</span><span class="TagITEMTTWO"><i class="it">' +
                          this.scenecount +
                          '</i>个场景<span class="glll">(包含全部付费场景)</span></span></div><div class="buyitem flex__justify__b flex_center_y"><div class="left flex_center_y buytips">' +
                          this._tips +
                          '</div><div class="right flex_center_y"><span class="pricetip">折后价：<i>¥</i><i class="total">' +
                          paramObj.charge_price +
                          '</i></span><button class="buy">立即购买</button></div></div></div></div>'
                      ),
                      setTimeout(function () {
                        $(".chargeBody").addClass("on");
                      }, 100))
                    : $(".chargeBody").hasClass("see") ||
                      ($(".chargeBody .content .smatip").remove(),
                      $(".chargeBody .content .title").after(o),
                      $(".chargeBody").addClass("on")),
                  a.setChargeweizhi())
                : (0 == $(".chargeBody").length &&
                    $("#subinformain").append(
                      '<div class="chargeBody type2 ' + $.isPhone() + '"></div>'
                    ),
                  0 == $(".chargeBody .content_two").length &&
                    $(".chargeBody").html(
                      '<div class="content_two"><span class="closecharge">X</span><div class="title">三个免费讲解结束</div><div class="bitips">购买景区视听包即可畅游全部景点<span class="glll">（注：视听包包含本景区所有景点及其解说）</span></div><div class="pricebody">折后价：<span class="price">¥' +
                        paramObj.charge_price +
                        '</span></div><div class="buybutton flex__justify__b"><span class="cancle">取消</span><button class="buy">立即购买</button></div><div class="buytips flex__center">' +
                        this._tips +
                        "</div></div>"
                    ),
                  $(".chargeBody").addClass("type2 on"))
              : 1 == i &&
                $(".chargeBody").length > 0 &&
                ($(".chargeBody .content .smatip").remove(),
                $(".chargeBody .content .title").after(o));
        }
        return t;
      },
      isBuyScenecharge: function () {
        1 == paramObj.isbuyed &&
          _krpano.get("scene[get(xml.scene)].isbuy") &&
          (0 == $(".chargeBody").length &&
            $("#subinformain").append(
              '<div class="chargeBody type2 see' + $.isPhone() + '"></div>'
            ),
          $(".chargeBody").html(
            '<div class="content_two"><span class="closecharge">X</span><div class="title">此场景为付费场景</div><div class="bitips">购买景区视听包即可畅游全部景点<span class="glll">（注：视听包包含本景区所有景点及其解说）</span></div><div class="pricebody">折后价：<span class="price">¥' +
              paramObj.charge_price +
              '</span></div><div class="buybutton flex__justify__b"><span class="cancle">取消</span><button class="buy">立即购买</button></div><div class="buytips flex__center">' +
              this._tips +
              "</div></div>"
          ),
          setTimeout(function () {
            $(".chargeBody").addClass("on");
          }, 100),
          $(".chargeBody").addClass("type2 on"));
      },
      setChargeweizhi: function () {
        if ($(".chargeBody").length > 0) {
          let e = 12;
          $(".scenicnavbottom.on").length > 0 &&
          $(".scenicnavbottom").height() > 0 &&
          paramObj._height > $(".scenicnavbottom").offset().top
            ? (e += paramObj._height - $(".scenicnavbottom").offset().top)
            : $(".panogroupBody.on").length > 0 &&
              $(".panogroupBody").height() > 0 &&
              paramObj._height > $(".panogroupBody").offset().top &&
              (e += paramObj._height - $(".panogroupBody").offset().top),
            $(".chargeBody").css("bottom", e + "px");
        }
      },
      showhidevideocontro: function (e) {
        e
          ? $(".chargeBody").addClass("on")
          : $(".chargeBody").removeClass("on");
      },
      getorderConfirm: function () {
        if (this.isLogin()) {
          let e = this;
          if ("object" != typeof pay_paramObj)
            return void setTimeout(function () {
              e.getorderConfirm();
            }, 500);
          pay_paramObj.anchorInfo_money >= 0 || getAnchorInfoMoney(),
            gopayObj.getorderConfirm({
              page_url: encodeURIComponent(location.href),
              total: paramObj.charge_price,
              obj_id: paramObj.krpano.krpano_id,
              obj_type: 23032,
              count: 1,
              pay_vkey: __INFO__.pay_vkey,
              title: "付费看/付费听",
              pay_seccessCallBack: function () {
                (paramObj.isbuyed = 0),
                  $(".windowBody.intro-payType .close").click(),
                  $(".chargeBody").remove(),
                  e.voiceurl &&
                    e.voiceurl.length > 10 &&
                    _soundObj.playsound("bgvoice", e.voiceurl, 0, {
                      closesound: !1,
                    });
              },
            });
        }
      },
    },
    todefaultview: function () {
      _krpano.call(
        "lookto(get(panoview.yhlookat),get(panoview.yvlookat),get(panoview.yfov)" +
          (1 != this.storyline ? ",,,,js(_waseeVRObj.setShareUrl(1))" : "") +
          ")"
      );
    },
    panoSkinreqruet: function (e) {
      let a = this;
      switch (__WASEE_DATA__.product.panoinfo.skinItem) {
        case 3:
          if (
            (void 0 === e || ("object" == typeof e && "compass" == e.type)) &&
            (1 == __WASEE_DATA__.product.switch.overallNav.switch_compass &&
              (0 == $(".navlefttop .compass").length
                ? ($(".navlefttop").append('<div class="compass"></div>'),
                  _krpano.call(
                    'set(events[compass_events].onviewchange,"compass_update_rotate_z()");set(layer[compass],align=topleft,scalechildren="false",x=' +
                      ("pc" == $.browserRedirect() ? 20 : 10) +
                      ',y=20,url="' +
                      paramObj.resourceWasee +
                      '/home/vrpano/img/skin/3/compass_bg.png",width=32,height=32);set(layer[compass_plate],url="' +
                      paramObj.resourceWasee +
                      '/home/vrpano/img/skin/3/compass_plate.png",width=32,height=32)'
                  ),
                  (a.compassHeight =
                    -20 - Number(_krpano.get("layer[compass].height"))),
                  (a.compassY = _krpano.get("layer[compass].x")),
                  setTimeout(function () {
                    _krpano.call(
                      "set(layer[compass],y=" +
                        $(".skinItem3 .navlefttop .compass").offset().top +
                        ",x=" +
                        $(".navlefttop").offset().left +
                        ")"
                    );
                  }, 100))
                : "pc" != $.browserRedirect() &&
                  (_krpano.call(
                    "set(layer[compass],y=" +
                      $(".skinItem3 .navlefttop .compass").offset().top +
                      ",x=" +
                      $(".navlefttop").offset().left +
                      ")"
                  ),
                  (a.compassY = _krpano.get("layer[compass].x")))),
            "object" == typeof e)
          )
            return;
          (void 0 === e || ("object" == typeof e && "radar" == e.type)) &&
            (function e(a) {
              ("object" != typeof pano_otherModule &&
                (setTimeout(function () {
                  e(2);
                }, 300),
                2 == a)) ||
                setTimeout(
                  function () {
                    let e =
                      $(".navrighttop").offset().top +
                      $(".navrighttop").height();
                    "pc" == $.browserRedirect() && e < 20 && (e = 20);
                  },
                  2 == a ? 300 : 0
                );
            })(),
            $(".speguidetail>p,.setautotour>div,.setspecir>div").addClass(
              "backdrop"
            );
      }
    },
    panohelptimeout: {},
    panohelp: function () {
      this.isgopanohelp = !0;
      let e = 2592e6,
        a = "",
        t = !1,
        o = 5e3,
        s = this.panohelptimeout._index > 0 ? this.panohelptimeout._index : 1;
      if (((this.panohelptimeout._index = s + 1), 1 == s)) {
        if (
          "0" != _meta.wx_fav &&
          $.isWeiXinClient() &&
          "" == $.getCookie("collectTips") &&
          0 == $(".index_relative_collect").length
        ) {
          let a =
            '<div class="index_relative_collect" style="z-index:999999999;"><em></em><div class="close">x</div><div class="index_collect"><span class="title">点击这里收藏</span><div class="body">下次就可以在微信“我”的收藏中快速找到这里啦！</div></div></div>';
          $("#pano_body").after(a),
            setTimeout('$(".index_relative_collect").addClass("on");', 1e3),
            setTimeout(function () {
              $(".index_relative_collect").removeClass("on"),
                $.setCookie("collectTips", -1, e);
            }, o),
            $(".index_relative_collect").click(function () {
              $(".index_relative_collect").removeClass("on"),
                $.setCookie("collectTips", -1, e);
            });
        }
        if (0 != _openobj.in_image_url_show && 0 == $(".goyoulan").length) {
          let o = self == top ? _meta.in_image_loop : 0,
            i = 1;
          if (
            (1 == o &&
              $.getCookie("in_image" + paramObj.krpano.krpano_id) ==
                ("" == _openobj.in_image_url ? 1 : _openobj.in_image_url) &&
              (i = 0),
            1 == i)
          ) {
            if (
              (null == _openobj.in_time && (_openobj.in_time = 3),
              null == _openobj.in_image_url ||
                0 == _openobj.in_image_url.length ||
                _openobj.in_image_url.indexOf("think720/images/help") > -1)
            ) {
              let i =
                "pc" == $.browserRedirect()
                  ? paramObj.resourceWasee +
                    "/home/vrpano/img/intipsPC" +
                    ("CN" != _languageObj.lang ? "_" + _languageObj.lang : "") +
                    ".gif"
                  : paramObj.resourceWasee +
                    "/home/vrpano/img/intipsAPP" +
                    ("CN" != _languageObj.lang ? "_" + _languageObj.lang : "") +
                    ".gif";
              (a =
                '<img class="systips rotesb_img" data-Cook="rotesb_img" src="' +
                i +
                '">'),
                (t = !0),
                (this.panohelptimeout.rotesb_img = setTimeout(function () {
                  $(".wsyindao .rotesb_img").remove(),
                    1 == o &&
                      $.setCookie(
                        "in_image" + paramObj.krpano.krpano_id,
                        "" == _openobj.in_image_url ? 1 : _openobj.in_image_url,
                        e
                      ),
                    delete _waseeVRObj.panohelptimeout.rotesb_img,
                    _waseeVRObj.panohelp(s + 1);
                }, 1e3 * _openobj.in_time));
            }
            "" != a
              ? (0 == $(".wsyindao").length &&
                  $("#pano_body").append('<div class="wsyindao"></div>'),
                $(".wsyindao").prepend(a))
              : (_openobj.in_image_url &&
                  _openobj.in_image_url.length > 10 &&
                  -1 == _openobj.in_image_url.indexOf("think720/images/help") &&
                  ($("body").append(
                    '<div class="mBoxbg on in_imgbdBG" style="background: rgba(0,0,0,' +
                      _openobj.in_alpha +
                      ')" onclick="$(this).remove();"><img class="in_img in_imgbd" src="' +
                      _openobj.in_image_url +
                      '"></div>'
                  ),
                  (t = !0),
                  (this.panohelptimeout.rotesb_img = setTimeout(function () {
                    $(".in_imgbdBG").remove(),
                      1 == o &&
                        $.setCookie(
                          "in_image" + paramObj.krpano.krpano_id,
                          _openobj.in_image_url,
                          e
                        ),
                      delete _waseeVRObj.panohelptimeout.rotesb_img,
                      _waseeVRObj.panohelp(s + 1);
                  }, 1e3 * _openobj.in_time))),
                $(".wsyindao").length > 0 && $(".wsyindao").remove());
          }
        }
        t || this.panohelp(s + 1);
      } else 2 == s && this.chargeObj.isBuySoundcharge();
    },
    preantostare: function () {
      if ("scenemap" == _krpano.get("xml.scene")) return;
      let e = this;
      e.is_preantostare = setTimeout(function () {
        clearTimeout(e.is_preantostare),
          delete e.is_preantostare,
          (_waseeVRObj.is_switch_nav &&
            ((_panonavObj && 1 == _panonavObj.isStartNav()) ||
              ($.getParameter("fid") > 0 &&
                $.getParameter("tid") > 0 &&
                0 == _waseeVRObj.loadpanoCount))) ||
            _krpano.call(
              "jscall(\"$('.navrighttop .autorotate').removeClass('close');\");autorotate.start();" +
                (1 == __WASEE_DATA__.product.switch.overallNav.enableLookto
                  ? "bombtimer(0)"
                  : "")
            );
      }, 4500);
    },
    autorotateObj: {
      setsceneauto: function () {
        if (_waseeVRObj.sceneMeta.autoobj) {
          let e = "";
          0 == _waseeVRObj.sceneMeta.autoobj.autorotate
            ? ((__WASEE_DATA__.product.switch.overallNav.autorotate = 0),
              krp.call(
                "if(autorotate.enabled,autorotate.stop();stopdelayedcall(bomb);delete(bt);jscall(\"$('.navrighttop .autorotate').addClass('close');\"););"
              ),
              _waseeVRObj.is_preantostare &&
                (clearTimeout(_waseeVRObj.is_preantostare),
                delete _waseeVRObj.is_preantostare))
            : _waseeVRObj.sceneMeta.autoobj.autorotate > 0 &&
              ((__WASEE_DATA__.product.switch.overallNav.autorotate =
                _waseeVRObj.sceneMeta.autoobj.autorotate),
              (__WASEE_DATA__.product.switch.overallNav.autorotate_view =
                _waseeVRObj.sceneMeta.autoobj.autorotate_view),
              (__WASEE_DATA__.product.switch.overallNav.autorotate_time =
                _waseeVRObj.sceneMeta.autoobj.rotatespeed),
              1 == __WASEE_DATA__.product.switch.overallNav.autorotate_view
                ? (e += "set(autorotate.horizon,off);")
                : (e += "set(autorotate.horizon,0);"),
              1 == __WASEE_DATA__.product.switch.overallNav.autorotate
                ? (e +=
                    "set(autorotate.speed," +
                    360 /
                      Number(
                        __WASEE_DATA__.product.switch.overallNav.autorotate_time
                      ) +
                    ");")
                : (e +=
                    "set(autorotate.speed," +
                    -360 /
                      Number(
                        __WASEE_DATA__.product.switch.overallNav.autorotate_time
                      ) +
                    ");"),
              $(".navrighttop .autorotate").hasClass("click") ||
                (_waseeVRObj.is_switch_nav &&
                  ((_panonavObj && 1 == _panonavObj.isStartNav()) ||
                    ($.getParameter("fid") > 0 &&
                      $.getParameter("tid") > 0 &&
                      0 == _waseeVRObj.loadpanoCount))) ||
                krp.call(
                  "ifnot(autorotate.enabled,autorotate.start();jscall(\"$('.navrighttop .autorotate').removeClass('close');\"););"
                )),
            (__WASEE_DATA__.product.switch.overallNav.enableLookto =
              _waseeVRObj.sceneMeta.autoobj.sceneLoop),
            0 == __WASEE_DATA__.product.switch.overallNav.enableLookto ||
            "played" == _waseeVRObj.autoGuidesObj.status ||
            "paused" == _waseeVRObj.autoGuidesObj.status ||
            (_waseeVRObj.is_switch_nav &&
              _panonavObj &&
              1 == _panonavObj.isStartNav()) ||
            ($.getParameter("fid") > 0 &&
              $.getParameter("tid") > 0 &&
              0 == _waseeVRObj.loadpanoCount)
              ? ((e += "stopdelayedcall(bomb);delete(bt);"),
                _waseeVRObj.is_preantostare &&
                  (clearTimeout(_waseeVRObj.is_preantostare),
                  delete _waseeVRObj.is_preantostare))
              : 1 == __WASEE_DATA__.product.switch.overallNav.enableLookto &&
                _waseeVRObj.sceneMeta.autoobj.autorotate > 0
              ? (e += "bombtimer(0);")
              : 2 == __WASEE_DATA__.product.switch.overallNav.enableLookto &&
                ((e += "stopdelayedcall(bomb);delete(bt);"),
                _waseeVRObj.is_preantostare &&
                  (clearTimeout(_waseeVRObj.is_preantostare),
                  delete _waseeVRObj.is_preantostare),
                _waseeVRObj.sceneMeta.autoobj.loadtime >= 3 &&
                  "" != _waseeVRObj.autonextid &&
                  (this.enableLooktoscene = setTimeout(function () {
                    _waseeVRObj.toLoadscene({ name: _waseeVRObj.autonextid });
                  }, 1e3 * Number(_waseeVRObj.sceneMeta.autoobj.loadtime)))),
            "" != e && krp.call(e);
        }
      },
    },
    onswitch: function () {
      let e = __WASEE_DATA__.product.switch.overallNav,
        a = "",
        t = "",
        o = "",
        s = "",
        i = "",
        n = !1;
      if (
        ((1 != e.showAname && 0 != __INFO__.product_status) ||
          1 == this.is_ememap ||
          ((a += _langObj.zuozhe + "：" + __INFO__.anchor.nickname),
          paramObj._isWaseehost &&
            (a =
              '<a class="anchorr" ' +
              (this.is_ememap >= 1 ||
              (12 == __INFO__.anchor.from &&
                __INFO__.anchor.anchor_id != paramObj.official_id)
                ? ""
                : ' href="' +
                  (0 == __INFO__.product_status
                    ? "https://www.wasee.com"
                    : "/Wasee/VRHome/anchor?anchor_id=" + __INFO__.anchor.id) +
                  '" target="_blank"') +
              '><li class="maxw">' +
              a +
              "</li></a>")),
        1 == e.showvisit)
      )
        if ("CN" == _languageObj.lang)
          a +=
            _langObj.fangwenl +
            "：" +
            $.transWan(__INFO__.product.visit_count, "万");
        else {
          var r = Number(__INFO__.product.visit_count);
          if (r > 1e4) {
            var p = r / 1e3;
            p = p.toFixed(1);
            var l = p.split(".");
            r = 0 == l[1] ? l[0] + "K" : p + "K";
          }
          a += _langObj.fangwenl + "：" + r;
        }
      if (
        ("" != a && (a = '<div class="fwligna flex_center_y">' + a + "</div>"),
        1 != __INFO__.product_status
          ? ((n = !0),
            (t =
              '<a class="logtip" target="_blank" href="https://www.wasee.com" style="display: inline-block;"><img src="http://43.138.26.82:8080/TemplateData/webgl-logo.png" onload="_waseeVRObj.domHeight.logoFun()" alt=""></a>'))
          : 1 == e.logo_switch &&
            __WASEE_DATA__.product.panoinfo.wasee_logo_url.length > 10 &&
            1 == __INFO__.product_status &&
            ((n = !0),
            (t =
              '<a class="logtip"' +
              (__WASEE_DATA__.product.panoinfo.logo_redirect_url
                ? ' target="_blank" href="' +
                  __WASEE_DATA__.product.panoinfo.logo_redirect_url +
                  '"'
                : "") +
              ' style="display: inline-block;"><img src="' +
              _waseeVRObj.setOSSimg(
                __WASEE_DATA__.product.panoinfo.wasee_logo_url,
                4 == __WASEE_DATA__.product.panoinfo.skinItem ? 1e3 : 480,
                1
              ) +
              '" onload="_waseeVRObj.domHeight.logoFun()" alt=""></a>')),
        (a += t),
        0 != _meta.switch_cls &&
          this.sceneId > 0 &&
          _panoGroupObj.panoOFFgroup[this.sceneId] &&
          _panoGroupObj.panoOFFgroup[this.sceneId].hotcatedata &&
          _panoGroupObj.panoOFFgroup[this.sceneId].hotcatedata.length > 10)
      ) {
        let e = JSON.parse(
          _panoGroupObj.panoOFFgroup[this.sceneId].hotcatedata
        );
        if ("object" == typeof e) {
          let a =
            0 != __WASEE_DATA__.product.switch.overallNav.hotcls
              ? '<span value="all" class="on">' + _langObj.all + "</span>"
              : "";
          for (let t = 0; t < e.length; t++) {
            const o = e[t];
            (_waseeVRObj.hotcatedata[o.id] = o),
              (a +=
                '<span value="' +
                o.id +
                '" title="' +
                o.title +
                '">' +
                o.title +
                "</span>");
          }
          "" != a &&
            $(".navleftcenter").append(
              '<div class="HOTCSTESGORY">' + a + "</div>"
            );
        }
      }
      if (
        ("" != a
          ? ($(".cintyfwliBody .cityIcon").length > 0
              ? $(".cintyfwliBody .cityIcon").after(a)
              : $(".cintyfwliBody").prepend(a),
            $(".cintyfwliBody .fwligna").length > 0 &&
              $(".cintyfwliBody .fwligna").width() - 300 > 80 &&
              this.setCss(
                ".cintyfwliBody .fwligna{transform: translateX(-" +
                  ($(".cintyfwliBody .fwligna").width() - 280) +
                  "px);}"
              ),
            n || _waseeVRObj.domHeight.logoFun())
          : _waseeVRObj.domHeight.logoFun(),
        0 == __WASEE_DATA__.product.switch.overallNav.showmusic &&
          $(".music").addClass("nonee"),
        0 == __WASEE_DATA__.product.switch.overallNav.showvoice &&
          $(".voice").addClass("nonee"),
        self == top &&
          (1 == __WASEE_DATA__.product.switch.overallNav.fullscreen
            ? this.isDesktop
              ? $(
                  ".navrighttop .fullscreen,#subinformain .fullscreen"
                ).removeClass("none")
              : this.isIOS
              ? $(".navrighttop .fullscreen,#subinformain .fullscreen").remove()
              : $(
                  ".navrighttop .fullscreen,#subinformain .fullscreen"
                ).removeClass("none")
            : $(".navrighttop .fullscreen,#subinformain .fullscreen").remove()),
        1 != e.showgyro || this.isDesktop
          ? $(".gyro").remove()
          : this.sceneId > 0 &&
            _panoGroupObj.panoOFFgroup[this.sceneId] &&
            3 != _panoGroupObj.panoOFFgroup[this.sceneId].media_type &&
            $(".gyro").removeClass("none"),
        1 == e.autorotate_view && (i += "set(autorotate.horizon,off);"),
        1 == e.showautorotate
          ? $(".autorotate").removeClass("none")
          : $(".autorotate").remove(),
        __WASEE_DATA__.product.switch.overallNav.autorotate_time > 0 &&
          this.sceneId > 0 &&
          (2 == e.autorotate
            ? (i +=
                "set(autorotate.speed," +
                -360 /
                  Number(
                    __WASEE_DATA__.product.switch.overallNav.autorotate_time
                  ) +
                ");")
            : (i +=
                "set(autorotate.speed," +
                360 / __WASEE_DATA__.product.switch.overallNav.autorotate_time +
                ");")),
        _waseeVRObj.isDesktop || 1 != e.enablegyro)
      ) {
        if (e.autorotate >= 1)
          if (
            _waseeVRObj.is_switch_nav &&
            ((_panonavObj && 1 == _panonavObj.isStartNav()) ||
              ($.getParameter("fid") > 0 && $.getParameter("tid") > 0))
          );
          else {
            let a = 1 == e.enableLookto ? ";bombtimer(0)" : "";
            (_waseeVRObj.setAutorotateObj.autoload = 1),
              (i +=
                "delayedcall(oneautorota,4.2,jscall(\"$('.autorotate').removeClass('close');\");autorotate.start()" +
                a +
                ");");
          }
      } else
        this.sceneId > 0 &&
        _panoGroupObj.panoOFFgroup[this.sceneId] &&
        3 != _panoGroupObj.panoOFFgroup[this.sceneId].media_type
          ? (i += "set(plugin[gyro].enabled,true);")
          : (this.status_obj.enabled = !0),
          $(".gyro").removeClass("close");
      "" != i && krp.call(i),
        "1" == e.showVR
          ? this.sceneId > 0 &&
            _panoGroupObj.panoOFFgroup[this.sceneId] &&
            3 != _panoGroupObj.panoOFFgroup[this.sceneId].media_type &&
            $(".vrr").removeClass("none")
          : $(".vrr").remove(),
        1 != e.showsandtable &&
          $(".winecellar_p").addClass("visib_h").css("height", 0),
        JSON.stringify(__WASEE_DATA__.product.radar).length > 60
          ? (this.radarObj.isinit || this.radarObj.init(),
            1 == e.map_showfull && (e.map_showtype = 1),
            1 == e.map_showtype &&
              $(".navrighttop .winecellar_p,.moresystem .winecellar_p").attr(
                "isautohide",
                2
              ),
            this.radarObj.onsceneradar(
              1 != e.map_showtype || paramObj._isForAPP ? null : 1
            ),
            ("scenemap" != this.sceneName ||
              ("scenemap" == _krpano.get("xml.scene") &&
                1 == __WASEE_DATA__.product.switch.overallNav.openmap_menu)) &&
              1 == this.loadpanoCount &&
              1 == e.map_showfull &&
              _waseeVRObj.radar.scene_radar[_waseeVRObj.sceneId] &&
              _waseeVRObj.radar.scene_radar[_waseeVRObj.sceneId].radar_type >
                0 &&
              "object" == typeof _waseeVRObj.radarObj.sceneradar &&
              $(".radarimgbody .scalebsg").click())
          : $(".winecellar_p").remove();
      let d = this.isDesktop ? 20 : 5;
      if (
        (3 != __WASEE_DATA__.product.panoinfo.skinItem &&
          $(".navleftbottom,.navrightbottom").css(
            "bottom",
            $(".pano_bottom_item").height() + d + "px"
          ),
        _meta.langue_show &&
          1 == _meta.langue_show &&
          ($(".navrighttop .winecellar_p").length > 0
            ? $(".navrighttop .winecellar_p").before(
                '<em class="menu_icon_btn langue muousetips" data-tips="' +
                  _langObj.qiehuanyuyan +
                  '">' +
                  _languageObj.lang +
                  "</em>"
              )
            : $(".navrighttop .EM_MENU_LIST").append(
                '<em class="menu_icon_btn langue muousetips" data-tips="' +
                  _langObj.qiehuanyuyan +
                  '">' +
                  _languageObj.lang +
                  "</em>"
              )),
        1 == e.showpraise)
      ) {
        let e = __INFO__.product.praise_count,
          a = __INFO__.product.praise > 0 ? " on" : "";
        (e =
          0 == e || "" == e
            ? _langObj.dianzan
            : $.transWan(__INFO__.product.praise_count, "万")),
          this.isDesktop
            ? (o +=
                '<em class="flex_center_y praise' +
                a +
                '"><span class="icon flex__center"><i class="iconfont icon_aixin"></i></span><span class="title">' +
                e +
                "</span></em>")
            : (s +=
                '<p class="praise_p p-re muousetips" data-tips="' +
                _langObj.dianzan2 +
                '"><em class="icon_base_ibtn praise' +
                a +
                '"><i class="iconfont icon_praise"></i><span class="flex_center_x title">' +
                e +
                "</span></em></p>");
      }
      1 == e.showmessage &&
        self == top &&
        (this.isDesktop
          ? (o +=
              '<em class="flex_center_y command"><span class="icon flex__center"><i class="iconfont icon_liuyan"></i></span><span class="title">' +
              _langObj.shuoyishuo +
              "</span></em>")
          : (s +=
              '<em class="icon_base_ibtn command muousetips" data-tips="' +
              _langObj.shuoyishuo2 +
              '"><i class="iconfont icon_shuoyishuo"></i><span class="flex_center_x title">' +
              _langObj.shuoyishuo +
              "</span></em>")),
        1 == e.showmsg &&
          self == top &&
          (this.isDesktop
            ? (o +=
                '<em class="flex_center_y msgs"><span class="icon flex__center"><i class="iconfont icon_sayic"></i></span><span class="title">' +
                _langObj.liuyan +
                "</span></em>")
            : (s +=
                '<em class="icon_base_ibtn msgs muousetips" data-tips="' +
                _langObj.liuyan2 +
                '"><i class="iconfont icon_commend"></i><span class="flex_center_x title">' +
                _langObj.liuyan +
                "</span></em>")),
        1 == e.showshare &&
          (this.isDesktop
            ? (o +=
                '<em class="flex_center_y share"><span class="icon flex__center"><i class="iconfont icon_fenxiang"></i></span><span class="title">' +
                _langObj.fengxiang +
                "</span></em>")
            : (s +=
                '<em class="icon_base_ibtn share muousetips" data-tips="' +
                _langObj.fengxiang2 +
                '"><i class="iconfont icon_share"></i><span class="title">' +
                _langObj.fengxiang +
                "</span></em>"));
      let _ = __WASEE_DATA__.product.switch.definimenu;
      if (
        1 == _.showpanoinfo &&
        3 != __WASEE_DATA__.product.panoinfo.skinItem
      ) {
        let e =
            '<span class="icon flex__center"><i class="iconfont icon_gaishu_x"></i></span>',
          a = _langObj.zuopingjianj,
          t = "";
        if (
          (__WASEE_DATA__.product.panoinfo.menustyle > 0 &&
            (e =
              '<img class="iconimg" src="' +
              paramObj.resourceWasee +
              "/home/vrpano/img/menusicon/menus_" +
              __WASEE_DATA__.product.panoinfo.menustyle +
              '_22.png">'),
          $.isJSONstr(_.anchor_btn))
        ) {
          let o = JSON.parse(_.anchor_btn);
          o.icon && o.icon.length > 10
            ? (e = '<img class="iconimg" src="' + o.icon + '">')
            : o.icon > 0 &&
              __WASEE_DATA__.product.panoinfo.menustyle > 0 &&
              (e =
                '<img class="iconimg" src="' +
                paramObj.resourceWasee +
                "/home/vrpano/img/menusicon/menus_" +
                __WASEE_DATA__.product.panoinfo.menustyle +
                "_" +
                o.icon +
                '.png">'),
            (t = o.name),
            "" != o.name &&
              "作品简介" != o.name &&
              "CN" == _languageObj.lang &&
              (a = o.name);
        }
        o +=
          '<em class="flex_center_y panotips">' +
          e +
          '<span class="title" ytitle="' +
          t +
          '">' +
          a +
          "</span></em>";
      }
      "" != o && $(".pano_bottom_item .item_bottom .menu_right").append(o),
        this.isDesktop || "" == s || $(".navrightbottom .list").prepend(s);
      if (
        _krpano.get("config.autoGuides.guide.count") > 0 &&
        1 != this.istphd &&
        !this.roNumcode
      ) {
        this.autoGuidesObj.init(),
          0 == $(".speguidetail").length &&
            $(".pano_bottom_item").after(
              '<div class="speguidetail flex_center_x"></div>'
            ),
          0 == $(".pano_group_list_btn").length &&
            $(".speguidetail").addClass("only"),
          $(".speguidetail").prepend(
            '<button class="btnn flex_center_y guideBtn"><em class="ebtn guides_btn icon_base_btn none"><i class="base_global"></i></em><i class="iconfont icon_play"></i><span>' +
              _langObj.daolan +
              "</span></button>"
          );
        let e = $(".pano_bottom_item").hasClass("onhide") ? 1e3 : 3e3;
        null == window.show_guide_speci &&
          (window.show_guide_speci = setTimeout(function () {
            0 == __WASEE_DATA__.product.panoinfo.skinItem
              ? $(".pano_group_list_btn").length > 0 &&
                !$(".pano_bottom_item .item_top").hasClass("transhide") &&
                !$(".pano_bottom_item .pano_group_list_btn").hasClass("list")
                ? $(".pano_bottom_item .pano_group_list_btn").click()
                : $(".pano_bottom_item").hasClass("onhide") ||
                  0 != $("#subinformain .setautotour").length ||
                  $(".speguidetail").addClass("on")
              : 3 == __WASEE_DATA__.product.panoinfo.skinItem &&
                ($(".pano_bottom_item").hasClass("onhide") ||
                  $(".hyroul-body .cbottom.hylogo").click()),
              0 != __WASEE_DATA__.product.switch.overallNav.switch_specific &&
                1 ==
                  __WASEE_DATA__.product.switch.overallNav.showspecificlist &&
                null == window.showspecificlist_timeout &&
                (window.showspecificlist_timeout = setTimeout(function () {
                  $(".speguidetail").length > 0 &&
                    $(".speguidetail .speciBtn").click();
                }, 1e3));
          }, e));
      } else $("#audio_xianlu_guide").remove();
      this.onscenespeci(),
        "" != paramObj.langClass &&
          ($(".navrighttop .langue").attr("data-lname", "qiehuanyuyan"),
          $(".navlefttop .fwligna").attr("data-lname", "fangwenl"),
          $(".navlefttop .anchorr").attr("data-lname", "zuozhe"),
          $(".navlefttop .HOTCSTESGORY span[value=all]").attr(
            "data-lname",
            "all"
          ),
          $(".navrightbottom .praise_p,.pano_bottom_item .praise").attr(
            "data-lname",
            "dianzan"
          ),
          $(".navrightbottom .command,.pano_bottom_item .command").attr(
            "data-lname",
            "shuoyishuo"
          ),
          $(".navrightbottom .msgs,.pano_bottom_item .msgs").attr(
            "data-lname",
            "liuyan"
          ),
          $(".navrightbottom .share,.pano_bottom_item .share").attr(
            "data-lname",
            "fengxiang"
          ),
          $(".navrightbottom .panotips,.pano_bottom_item .panotips").attr(
            "data-lname",
            "zuopingjianj"
          ),
          $(".speguidetail .guideBtn").attr("data-lname", "daolan"),
          $(".speguidetail .speciBtn").attr("data-lname", "xijie"));
    },
    set_hotcatedata: function () {
      if (
        0 != _meta.switch_cls &&
        this.sceneId > 0 &&
        _panoGroupObj.panoOFFgroup[this.sceneId].hotcatedata &&
        _panoGroupObj.panoOFFgroup[this.sceneId].hotcatedata.length > 10
      ) {
        let e = JSON.parse(
          _panoGroupObj.panoOFFgroup[this.sceneId].hotcatedata
        );
        if ("object" == typeof e) {
          let a =
            0 != __WASEE_DATA__.product.switch.overallNav.hotcls
              ? '<span value="all" class="on">' + _langObj.all + "</span>"
              : "";
          if (e.length > 0) {
            for (let t = 0; t < e.length; t++) {
              const o = e[t];
              (_waseeVRObj.hotcatedata[o.id] = o),
                (a +=
                  '<span value="' +
                  o.id +
                  '" title="' +
                  o.title +
                  '">' +
                  o.title +
                  "</span>");
            }
            $(".HOTCSTESGORY").length > 0
              ? $(".HOTCSTESGORY").removeClass("none").html(a)
              : ((a = '<div class="HOTCSTESGORY">' + a + "</div>"),
                $(".navleftcenter").append(a)),
              4 == __WASEE_DATA__.product.panoinfo.skinItem &&
                $(".navlefttop .HOTCSTESGORY span[value=all]").html(
                  "全部 " + _languageObj.EN.all
                );
          } else $(".HOTCSTESGORY").addClass("none").empty();
        } else $(".HOTCSTESGORY").addClass("none").empty();
      } else $(".HOTCSTESGORY").addClass("none").empty();
    },
    onscenespeci: function () {
      if (
        0 != __WASEE_DATA__.product.switch.overallNav.switch_specific &&
        this.sceneId > 0 &&
        _panoGroupObj.panoOFFgroup[this.sceneId].specifics.length > 0 &&
        1 != this.istphd &&
        !this.roNumcode
      ) {
        0 == $(".speguidetail").length &&
          $(".pano_bottom_item").after(
            '<div class="speguidetail flex_center_x"></div>'
          ),
          $(".speguidetail").removeClass("hide"),
          0 == $(".pano_group_list_btn").length &&
            $(".speguidetail").addClass("only"),
          0 == $(".speguidetail .detailPoint_btn").length
            ? $(".speguidetail").append(
                '<button class="btnn flex_center_y speciBtn"><em class="ebtn detailPoint_btn icon_base_btn none"><i class="base_global"></i></em><i class="iconfont icon_search"></i><span>' +
                  _langObj.xijie +
                  '</span><em class="playerBtn player">' +
                  _langObj.xunyou +
                  "</em></button>"
              )
            : $(".speguidetail .speciBtn").removeClass("none");
        let e = $(".pano_bottom_item").hasClass("onhide") ? 1e3 : 3e3;
        null == window.show_guide_speci &&
          (window.show_guide_speci = setTimeout(function () {
            0 == __WASEE_DATA__.product.panoinfo.skinItem
              ? $(".pano_group_list_btn").length > 0 &&
                !$(".pano_bottom_item").hasClass("onhide") &&
                !$(".pano_bottom_item .pano_group_list_btn").hasClass("list")
                ? $(".pano_bottom_item .pano_group_list_btn").click()
                : $(".speguidetail").addClass("on")
              : 3 == __WASEE_DATA__.product.panoinfo.skinItem &&
                ($(".pano_bottom_item").hasClass("onhide") ||
                  $(".hyroul-body .cbottom.hylogo").click()),
              1 == __WASEE_DATA__.product.switch.overallNav.showspecificlist &&
                null == window.showspecificlist_timeout &&
                (window.showspecificlist_timeout = setTimeout(function () {
                  $(".speguidetail").length > 0 &&
                    $(".speguidetail .speciBtn").click();
                }, 1e3));
          }, e)),
          $(".specigroupBody").length > 0
            ? $(".specigroupBody").empty()
            : $("#subinformain").append(
                '<div class="specigroupBody p-ab noselect"></div>'
              );
      } else
        $(".specigroupBody").length > 0 && $(".specigroupBody").remove(),
          $(".speguidetail .speciBtn").addClass("none");
    },
    radarObj: {
      sceneradar: null,
      radarimgwidhei: "180px",
      m_radarimgwidhei: "120px",
      init: function () {
        if (
          !_waseeVRObj.radar &&
          JSON.stringify(__WASEE_DATA__.product.radar).length > 60
        ) {
          let e = __WASEE_DATA__.product.radar,
            a = {},
            t = {},
            o = { radarspots: {} };
          if (e.scene_radar.length > 0)
            for (let t = 0; t < e.scene_radar.length; t++) {
              const o = e.scene_radar[t];
              a[o.scene_id] = o;
            }
          if (
            ((o.radar_img = e.overallradar.radar_img),
            e.overallradar.radarspots)
          )
            for (let a = 0; a < e.overallradar.radarspots.length; a++) {
              const t = e.overallradar.radarspots[a];
              t.x > 1 && (t.x = t.x / o.radar_img.width),
                t.y > 1 && (t.y = t.y / o.radar_img.height),
                (o.radarspots[t.name] = t);
            }
          for (let a = 0; a < e.groupradar.length; a++) {
            const o = e.groupradar[a],
              s = o.radarspots,
              i = {};
            if (s)
              for (let e = 0; e < s.length; e++) {
                const a = s[e];
                a.x > 1 && (a.x = a.x / o.radar_img.width),
                  a.y > 1 && (a.y = a.y / o.radar_img.height),
                  (i[a.name] = a);
              }
            t[o.groupid] = {
              groupid: o.groupid,
              radar_img: o.radar_img,
              radarspots: i,
            };
          }
          _waseeVRObj.radar = {
            scene_radar: a,
            overallradar: o,
            groupradar: t,
            tbody: e.tbody,
          };
          let s = {
            bgcolor: "#544F6E",
            borcolor: "#FFFFFF",
            bgcolor2: "#4F85FB",
            borcolor2: "#FFFFFF",
            size: 1,
          };
          "object" == typeof e.tbody && $.extend(s, e.tbody);
          let i = 15 * s.size;
          _waseeVRObj.setCss(
            ".radarimgbody .radarimg .hot{width:" +
              i +
              "px;height:" +
              i +
              "px;transform: translate(-" +
              i / 2 +
              "px, -" +
              i / 2 +
              "px);background: " +
              s.bgcolor +
              ";border-color: " +
              s.borcolor +
              ";}.radarimgbody .radarimg .hot.on::before{width:" +
              i +
              "px;height:" +
              i +
              "px;background: " +
              s.bgcolor2 +
              ";border-color: " +
              s.borcolor2 +
              ";}",
            null,
            "radarhotcolor"
          ),
            _waseeVRObj.setCss(
              ".radarimgbody .radarimg.amap-container .hot, .radarimgbody .radarimg.amap-container .hot.on{width:" +
                i +
                "px;height:" +
                i +
                "px;background: " +
                s.bgcolor +
                ";border-color: " +
                s.borcolor +
                ";transform: translate(-" +
                i / 2 +
                "px, -" +
                i / 2 +
                "px);} .radarimgbody.amapBody .markopenin{transform: translate(-50%, " +
                i / 2 +
                "px);} .radarimgbody .radarimg.amap-container .hot.on{background: none;}.radarimgbody .radarimg.amap-container .hot.on::before{width:" +
                i +
                "px;height:" +
                i +
                "px;background: " +
                s.bgcolor2 +
                ";border-color: " +
                s.borcolor2 +
                ";}.radarimgbody .radarimg.amap-container .hOT_TITle.noll{transform: translate(calc(-50% + 0px), -" +
                (i / 2 + 22 + 6) +
                "px);}",
              "radarhotcolor2"
            );
        }
        (this.max_width = $(".radarimgbody").width()),
          (this.max_height = _waseeVRObj.isDesktop ? 440 : this.max_width),
          (this.big_max_width = 0.9 * paramObj._width),
          (this.big_max_height = 0.8 * paramObj._height),
          (this.isinit = !0);
      },
      onsceneradar: function (e) {
        this.isinit || ((this.isinit = !0), this.init());
        try {
          $(".radarimgbody .radarimg .hot.on").length > 0 &&
            $(".radarimgbody .radarimg .hot.on img")
              .css("transform", "rotate(0deg) scale(1)")
              .removeClass("on");
          let o = $(".navrighttop .winecellar_p,.moresystem .winecellar_p");
          if (_waseeVRObj.radar && o.length > 0) {
            1 == __WASEE_DATA__.product.switch.overallNav.map_showname &&
              $(".radarimgbody").addClass("showname"),
              $(".radarimgbody").attr({
                tips:
                  _waseeVRObj.radar.tbody && _waseeVRObj.radar.tbody.title
                    ? _waseeVRObj.radar.tbody.title
                    : _langObj.shapan2,
                "data-lname": "shapan2",
              }),
              _waseeVRObj.panoSkinreqruet({ type: "radar" });
            let s = "",
              i = this,
              n = null;
            if (
              (_waseeVRObj.radar.scene_radar[_waseeVRObj.sceneId] &&
                ((s =
                  _waseeVRObj.radar.scene_radar[_waseeVRObj.sceneId]
                    .radar_type),
                _waseeVRObj.radar.scene_radar[_waseeVRObj.sceneId]
                  .radar_imglist &&
                  _waseeVRObj.radar.scene_radar[_waseeVRObj.sceneId]
                    .radar_imglist[s + "radar_type"] &&
                  1 !=
                    _waseeVRObj.radar.scene_radar[_waseeVRObj.sceneId]
                      .radar_imglist[s + "radar_type"].status &&
                  (s = "")),
              0 === s || "0" == s)
            )
              o.hasClass("click") && o.attr("isautohide", 2),
                o.addClass("none").removeClass("click"),
                $(".radarimgbody").removeClass("on");
            else if (1 == s)
              _waseeVRObj.radar.overallradar.radar_img &&
              (2 == _waseeVRObj.radar.overallradar.radar_img.imgtype ||
                (2 != _waseeVRObj.radar.overallradar.radar_img.imgtype &&
                  _waseeVRObj.radar.overallradar.radar_img.url &&
                  "" != _waseeVRObj.radar.overallradar.radar_img.url))
                ? ((n = _waseeVRObj.radar.overallradar),
                  (n.radar_type = 1),
                  o.removeClass("none").find(".title").html(_langObj.shapan))
                : (o.addClass("none").removeClass("click"),
                  $(".radarimgbody").removeClass("on"));
            else if (2 == s || 3 == s) {
              let e =
                _waseeVRObj.radar.scene_radar[_waseeVRObj.sceneId].groupid;
              (e > 0 &&
                _waseeVRObj.radar.groupradar &&
                _waseeVRObj.radar.groupradar[e]) ||
                (2 == s &&
                  (e = _panoGroupObj.panoOFFgroup[_waseeVRObj.sceneId].gid));
              let a = _waseeVRObj.radar.groupradar[e];
              a &&
                a.radar_img &&
                (2 == a.radar_img.imgtype ||
                  (2 != a.radar_img.imgtype && "" != a.radar_img.url)) &&
                ((n = a),
                (n.radar_type = s),
                o.removeClass("none").find(".title").html(_langObj.shapan));
            }
            if (
              (0 !== s &&
                "0" != s &&
                null == n &&
                _waseeVRObj.radar.scene_radar[_waseeVRObj.sceneId] &&
                _waseeVRObj.radar.scene_radar[_waseeVRObj.sceneId]
                  .radar_imglist &&
                "object" ==
                  typeof _waseeVRObj.radar.scene_radar[_waseeVRObj.sceneId]
                    .radar_imglist &&
                (_waseeVRObj.radar.scene_radar[_waseeVRObj.sceneId]
                  .radar_imglist["2radar_type"] &&
                1 ==
                  _waseeVRObj.radar.scene_radar[_waseeVRObj.sceneId]
                    .radar_imglist["2radar_type"].status &&
                _waseeVRObj.radar.scene_radar[_waseeVRObj.sceneId]
                  .radar_imglist["2radar_type"].gid > 0 &&
                _waseeVRObj.radar.groupradar[
                  _waseeVRObj.radar.scene_radar[_waseeVRObj.sceneId]
                    .radar_imglist["2radar_type"].gid
                ]
                  ? ((n =
                      _waseeVRObj.radar.groupradar[
                        _waseeVRObj.radar.scene_radar[_waseeVRObj.sceneId]
                          .radar_imglist["2radar_type"].gid
                      ]),
                    (n.radar_type = 2))
                  : _waseeVRObj.radar.scene_radar[_waseeVRObj.sceneId]
                      .radar_imglist["3radar_type"] &&
                    1 ==
                      _waseeVRObj.radar.scene_radar[_waseeVRObj.sceneId]
                        .radar_imglist["3radar_type"].status &&
                    _waseeVRObj.radar.scene_radar[_waseeVRObj.sceneId]
                      .radar_imglist["3radar_type"].gid > 0 &&
                    _waseeVRObj.radar.groupradar[
                      _waseeVRObj.radar.scene_radar[_waseeVRObj.sceneId]
                        .radar_imglist["3radar_type"].gid
                    ]
                  ? ((n =
                      _waseeVRObj.radar.groupradar[
                        _waseeVRObj.radar.scene_radar[_waseeVRObj.sceneId]
                          .radar_imglist["3radar_type"].gid
                      ]),
                    (n.radar_type = 3))
                  : _waseeVRObj.radar.scene_radar[_waseeVRObj.sceneId]
                      .radar_imglist["1radar_type"] &&
                    1 ==
                      _waseeVRObj.radar.scene_radar[_waseeVRObj.sceneId]
                        .radar_imglist["1radar_type"].status &&
                    ((n = _waseeVRObj.radar.overallradar), (n.radar_type = 1))),
              (i.sceneradar = n),
              i.sceneradar &&
                JSON.stringify(i.sceneradar).length > 10 &&
                i.sceneradar.radar_type > 0 &&
                i.sceneradar.radar_img &&
                (2 == i.sceneradar.radar_img.imgtype ||
                  (2 != i.sceneradar.radar_img.imgtype &&
                    i.sceneradar.radar_img.url.length > 10)))
            )
              if (
                (o.removeClass("none").find(".title").html(_langObj.shapan),
                2 == i.sceneradar.radar_img.imgtype)
              )
                t();
              else {
                let e = i.sceneradar.radar_img.width,
                  o = i.sceneradar.radar_img.height;
                if (0 == e || 0 == o) {
                  var a = new Image();
                  (a.src = i.sceneradar.radar_img.url),
                    (a.onload = function () {
                      (i.sceneradar.radar_img.width = a.width),
                        (i.sceneradar.radar_img.height = a.height),
                        t();
                    });
                } else t();
              }
            else
              o.hasClass("click") && o.attr("isautohide", 2),
                o.addClass("none").removeClass("click"),
                $(".radarimgbody,.radarimgbody .radarimg .hot").removeClass(
                  "on"
                ),
                $(
                  ".radarimgbody .radarimg .hot[sceneid=" +
                    _waseeVRObj.sceneId +
                    "]"
                )
                  .addClass("on")
                  .siblings()
                  .removeClass("on"),
                0 ==
                  $(
                    ".radarimgbody .radarimg .hot[sceneid=" +
                      _waseeVRObj.sceneId +
                      "] img"
                  ).length &&
                  $(
                    ".radarimgbody .radarimg .hot[sceneid=" +
                      _waseeVRObj.sceneId +
                      "]"
                  ).append(
                    '<img src="' +
                      paramObj.resourceWasee +
                      '/home/vrpano/img/radarview.png?20210408">'
                  );
            function t() {
              1 == e || (!o.hasClass("none") && 2 == o.attr("isautohide"))
                ? (2 == o.attr("isautohide") && o.removeAttr("isautohide"),
                  $(".navrighttop .winecellar_p").click())
                : $(".radarimgbody").length > 0 &&
                  $(".radarimgbody").hasClass("on") &&
                  i.change_radar_img(i.sceneradar);
            }
          }
        } catch (e) {
          goalert("error3:"), goalert(e);
        }
      },
      change_radar_img: function (e, a) {
        function t() {
          if (
            (!e.isthischange &&
              $(".radarimgbody .toplist").length > 0 &&
              $(".radarimgbody .toplist").empty(),
            !e.isthischange &&
              _waseeVRObj.radar.scene_radar[_waseeVRObj.sceneId]
                .radar_imglist &&
              "object" ==
                typeof _waseeVRObj.radar.scene_radar[_waseeVRObj.sceneId]
                  .radar_imglist)
          ) {
            let e = "",
              a = "",
              t = "",
              o = 0;
            for (const s in _waseeVRObj.radar.scene_radar[_waseeVRObj.sceneId]
              .radar_imglist)
              if (
                Object.hasOwnProperty.call(
                  _waseeVRObj.radar.scene_radar[_waseeVRObj.sceneId]
                    .radar_imglist,
                  s
                )
              ) {
                const i =
                  _waseeVRObj.radar.scene_radar[_waseeVRObj.sceneId]
                    .radar_imglist[s];
                "3radar_type" == s &&
                1 == i.status &&
                i.gid > 0 &&
                _waseeVRObj.radar.groupradar[i.gid] &&
                _waseeVRObj.radar.groupradar[i.gid].radar_img &&
                (2 == _waseeVRObj.radar.groupradar[i.gid].radar_img.imgtype ||
                  (2 != _waseeVRObj.radar.groupradar[i.gid].radar_img.imgtype &&
                    _waseeVRObj.radar.groupradar[i.gid].radar_img.url &&
                    _waseeVRObj.radar.groupradar[i.gid].radar_img.url.length >
                      10))
                  ? ((a =
                      '<span tindex="3">' +
                      _panoGroupObj.panogroupIdlist[i.gid + "_g"].title +
                      "</span>"),
                    o++)
                  : "2radar_type" == s &&
                    1 == i.status &&
                    i.gid > 0 &&
                    _waseeVRObj.radar.groupradar[i.gid] &&
                    _waseeVRObj.radar.groupradar[i.gid].radar_img &&
                    (2 ==
                      _waseeVRObj.radar.groupradar[i.gid].radar_img.imgtype ||
                      (2 != _waseeVRObj.radar.groupradar[i.gid].imgtype &&
                        _waseeVRObj.radar.groupradar[i.gid].radar_img.url &&
                        _waseeVRObj.radar.groupradar[i.gid].radar_img.url
                          .length > 10))
                  ? ((e =
                      '<span tindex="2">' +
                      _panoGroupObj.panogroupIdlist[i.gid + "_g"].title +
                      "</span>"),
                    o++)
                  : "1radar_type" == s &&
                    1 == i.status &&
                    _waseeVRObj.radar.overallradar &&
                    _waseeVRObj.radar.overallradar.radar_img &&
                    (2 == _waseeVRObj.radar.overallradar.radar_img.imgtype ||
                      (2 != _waseeVRObj.radar.overallradar.radar_img.imgtype &&
                        _waseeVRObj.radar.overallradar.radar_img.url &&
                        _waseeVRObj.radar.overallradar.radar_img.url.length >
                          10)) &&
                    ((t = '<span tindex="1">' + _langObj.shapan3 + "</span>"),
                    o++);
              }
            o > 1 &&
              (0 == $(".radarimgbody .toplist").length
                ? $(".radarimgbody").append(
                    '<div class="toplist maxw">' + e + a + t + "</div>"
                  )
                : $(".radarimgbody .toplist").html(e + a + t),
              $(
                ".radarimgbody .toplist span[tindex=" +
                  _waseeVRObj.radarObj.sceneradar.radar_type +
                  "]"
              )
                .addClass("on")
                .siblings()
                .removeClass("on"));
          }
        }
        let o = !1;
        if (2 == e.radar_img.imgtype)
          return (
            $(
              ".radarimgbody .radarimg .hot.on,.radarimgbody .radarimg .hOT_TITle.on"
            ).removeClass("on"),
            !window.radar ||
              window.radar.radar_type != e.radar_type ||
              (1 != window.radar.radar_type &&
                ((2 != e.radar_type && 3 != e.radar_type) ||
                  window.radar.groupid != e.groupid)) ||
              ((o = !0),
              $(
                ".radarimgbody .radarimg .hot.on,.radarimgbody .radarimg .hOT_TITle.on"
              ).removeClass("on"),
              $(
                ".radarimgbody .radarimg .hot[sceneid=" +
                  _waseeVRObj.sceneId +
                  "],.radarimgbody .radarimg .hOT_TITle[sceneid=" +
                  _waseeVRObj.sceneId +
                  "]"
              ).addClass("on")),
            (window.radar = $.extend({}, e)),
            o ||
              (e.radar_img.mapshowtype ||
                (e.radar_img.mapshowtype =
                  "" != e.radar_img.lng && "" != e.radar_img.lat ? 2 : 1),
              this.setradar_amap.setMap(
                2 == e.radar_img.mapshowtype
                  ? {
                      radar_type: e.radar_type,
                      longitude: e.radar_img.lng,
                      latitude: e.radar_img.lat,
                      hotlist: e.radarspots,
                      zoom: e.radar_img.zoom,
                      fromt: a,
                    }
                  : {
                      radar_type: e.radar_type,
                      hotlist: e.radarspots,
                      fromt: a,
                    }
              ),
              t()),
            2 != a && this.setradar_amap.panoToscene(),
            void $(".radarimgbody").addClass("on")
          );
        if (
          (window.radar &&
            window.radar.radar_type == e.radar_type &&
            (1 == window.radar.radar_type ||
              ((2 == e.radar_type || 3 == e.radar_type) &&
                window.radar.groupid == e.groupid)) &&
            $(".radarimgbody").length > 0 &&
            (o = !0),
          o)
        )
          $(".radarimgbody").addClass("on");
        else {
          e.radar_img.width, e.radar_img.height;
          $(".radarimg").hasClass("amap-container") &&
            ($(".radarimgbody").removeClass("amapBody"),
            $(".radarimg").removeClass("amap-container"),
            $(".radarimgbody .radarimg .moveimg").nextAll().remove()),
            0 == $(".radarimgbody").length
              ? ($("#subinformain").append(
                  '<div class="radarimgbodyBox"><span class="allclose"></span><div class="radarimgbody noselect" style="position: absolute;"><div class="radarimgparent flex_center_y"><div class="radarimg"></div></div><div class="scbtn flex__center"><span class="scalebsg flex__center"><i class="iconfont icon_addscale"></i><i class="title" tips="' +
                    _langObj.fangda +
                    '"></i></span><span class="shouqi flex__center"><i class="iconfont icon_close"></i><i class="title" tips="' +
                    _langObj.shouqi +
                    '"></i></span><span class="closeradar"><i class="iconfont icon_close"></i><i class="title" tips="' +
                    _langObj.close +
                    '"></i></span></div><div class="scale flex_center_y flex__justify__b"><span class="sub scaleYSChAnGE"><i class="iconfont icon_subscale"></i></span><span class="scalev">100%</span><span class="add scaleYSChAnGE"><i class="iconfont icon_addscale"></i></span></div></div></div>'
                ),
                setTimeout(function () {
                  $(".radarimgbody").addClass("on");
                }, 100))
              : $(".radarimgbody").addClass("on"),
            _waseeVRObj.panoSkinreqruet({ type: "radar" });
          let a = this.max_width,
            o = this.max_height,
            s = 0,
            i = 0;
          if (
            ((window.radar = $.extend({}, e)),
            $(".radarimgbody").hasClass("big") &&
              ((a = this.big_max_width), (o = this.big_max_height)),
            radar.radar_img.width < a && radar.radar_img.height < o)
          )
            (radar.scale = 1),
              (s = radar.radar_img.width),
              (i = radar.radar_img.height);
          else {
            let e = a / radar.radar_img.width;
            e > o / radar.radar_img.height && (e = o / radar.radar_img.height),
              (s = radar.radar_img.width * e),
              (i = radar.radar_img.height * e),
              (radar.scale = e);
          }
          (radar.slateX = 0),
            (radar.slateY = 0),
            $(".radarimgbody .scale .scalev").html(
              (100 * radar.scale).toFixed(0) + "%"
            ),
            $(".radarimg")
              .css({
                transform:
                  "translate3d(" +
                  radar.slateX +
                  "px," +
                  radar.slateY +
                  "px,0px) scale(1)",
              })
              .empty(),
            $(".radarimgbody .radarimg").prepend(
              '<img class="moveimg" src="' + e.radar_img.url + '" style="" />'
            ),
            t();
        }
        delete _waseeVRObj.radarObj.sceneradar.isthischange;
        let s = "",
          i = "",
          n = {};
        for (var r in e.radarspots)
          if (e.radarspots.hasOwnProperty(r)) {
            const a = e.radarspots[r];
            if (
              (_waseeVRObj.sceneId == a.scene_id && ((i = a.name), (n = a)),
              !o && _panoGroupObj.panoOFFgroup[a.scene_id])
            ) {
              a.x || (a.x = 0.5), a.y || (a.y = 0.5);
              let e = "",
                t = "";
              a.t_x > 0 && a.t_y > 0
                ? (t =
                    '<div class="hOT_TITle maxw" name="' +
                    a.name +
                    '" sceneid="' +
                    a.scene_id +
                    '" style="left:' +
                    100 * a.t_x +
                    "%;top:" +
                    100 * a.t_y +
                    '%;">' +
                    _panoGroupObj.panoOFFgroup[a.scene_id].name +
                    "</div>")
                : (e =
                    '<span class="ls_hOT_TITle maxw">' +
                    _panoGroupObj.panoOFFgroup[a.scene_id].name +
                    "</span>"),
                (s +=
                  '<div class="hot" tips="' +
                  _panoGroupObj.panoOFFgroup[a.scene_id].name +
                  '" name="' +
                  a.name +
                  '" sceneid="' +
                  a.scene_id +
                  '" style="left:' +
                  100 * a.x +
                  "%;top:" +
                  100 * a.y +
                  '%;">' +
                  e +
                  "</div>" +
                  t);
            }
          }
        o ||
          ($(".radarimgbody .radarimg").append(s),
          $(".radarimgbody .radarimg .hOT_TITle").each(function () {
            $(this).css(
              "transform",
              "translate(-" + ($(this).width() + 10) / 2 + "px, -11px)"
            );
          })),
          i && "" != i
            ? ($(".radarimgbody .radarimg .hot[name=" + i + "]")
                .addClass("on")
                .siblings()
                .removeClass("on"),
              0 ==
                $(".radarimgbody .radarimg .hot[name=" + i + "] img").length &&
                $(".radarimgbody .radarimg .hot[name=" + i + "]").append(
                  '<img src="' +
                    paramObj.resourceWasee +
                    '/home/vrpano/img/radarview.png?20210408">'
                ),
              1 == __WASEE_DATA__.product.switch.overallNav.map_showthishot &&
                $(".radarimgbody .radarimg .hot.on")
                  .removeClass("none")
                  .siblings(".hot")
                  .addClass("none"),
              (window.radarhotview = {
                init: !1,
                ys_rotate: n.viewrotate,
                dq_rotate: n.viewrotate,
                rotate: n.viewrotate,
                ath: n.viewath,
              }),
              this.sethotonratate(),
              this.sethotonangle())
            : $(".radarimgbody .radarimg .hot.on").removeClass("on");
      },
      sethotonratate: function () {
        window.radarhotview &&
          $(".radarimgbody .radarimg .hot.on").length > 0 &&
          $(".radarimgbody .radarimg .hot.on img").css(
            "transform",
            " rotate(" +
              this.getRadarViewrotate(
                radarhotview.ys_rotate,
                radarhotview.ath
              ) +
              "deg) scale(1)"
          );
      },
      sethotonangle: function () {
        if (
          window.radarhotview &&
          !window.radarhotview.init &&
          $(".radarimgbody .radarimg .hot.on").length > 0
        ) {
          let e = (1.570796326794897 * radarhotview.rotate) / 90;
          $(".radarimgbody .radarimg .hot.on img").attr("data-angle", e);
        }
      },
      getRadarViewrotate: function (e, a) {
        var t = _krpano.get("view.hlookat");
        a || (a = _krpano.get("view.ysath"));
        let o = (t - a) % 360;
        return Number(e) + Number(o);
      },
      setradar_amap: {
        setMap: function (e) {
          if ("object" != typeof AMap) {
            var a =
              "https://webapi.amap.com/maps?v=1.4.14&key=43faad999094b4716a40b38fd90ebe72&plugin=Map3D,AMap.DistrictLayer,AMap.Scale,AMap.ToolBar";
            return (
              _waseeVRObj.addJavascript({
                src: a,
                callBack: function () {
                  _waseeVRObj.radarObj.setradar_amap.setMap(e);
                },
              }),
              !1
            );
          }
          $(".radarimgbody .radarimg").css({ width: "100%", height: "100%" }),
            $(".radarimgbody .radarimg .moveimg")
              .attr("src", "")
              .nextAll()
              .remove(),
            AMapModule.map_control({
              longitude: e.longitude,
              latitude: e.latitude,
              element: "radarimg",
              zoom: e.zoom,
              fromt: e.fromt,
            }),
            $(".radarimgbody").addClass("amapBody"),
            $(".radarimgbody").removeClass("none"),
            "pc" == $.browserRedirect()
              ? $(".radarimg").css({
                  height: _waseeVRObj.radarObj.radarimgwidhei,
                  width: _waseeVRObj.radarObj.radarimgwidhei,
                })
              : $(".radarimg").css({
                  height: _waseeVRObj.radarObj.m_radarimgwidhei,
                  width: _waseeVRObj.radarObj.m_radarimgwidhei,
                }),
            this.set_maphotspot(e);
        },
        set_maphotspot: function (e) {
          if (e.hotlist) {
            var a = AMapModule.data.map.getCenter(),
              t = a.lng,
              o = a.lat;
            Object.values(e.hotlist).find(function (a) {
              if (_panoGroupObj.panoOFFgroup[a.scene_id]) {
                (a.lng && a.lat) || ((a.lng = t), (a.lat = o), (t += 2e-4));
                let s = _panoGroupObj.panoOFFgroup[a.scene_id].name,
                  i = _waseeVRObj.sceneId == a.scene_id ? " on" : "";
                _waseeVRObj.radarObj.setradar_amap.addHot({
                  hot_id: a.scene_id,
                  gid: e.gid,
                  name: a.name,
                  title: s,
                  longitude: a.lng,
                  latitude: a.lat,
                  content:
                    '<div class="hot' +
                    i +
                    '" name="' +
                    a.name +
                    '" sceneid="' +
                    a.scene_id +
                    '"></div><div class="markopenin maxw flex__justify__b"><span><i class="iconfont icon_detail"></i></span><span class="txt">进入</span></div>',
                });
                let n = a.t_lng,
                  r = a.t_lat,
                  p = !1;
                (a.t_lng && a.t_lat) ||
                  ((n = a.lng), (r = a.lat), (p = !0), (i += " noll")),
                  _waseeVRObj.radarObj.setradar_amap.addHot({
                    hot_id: a.scene_id,
                    gid: e.gid,
                    name: a.name,
                    title: s,
                    longitude: n,
                    latitude: r,
                    no_t_lnglat: p,
                    is_tile: !0,
                    content:
                      '<div class="hOT_TITle maxw' +
                      i +
                      '" name="' +
                      a.name +
                      '" sceneid="' +
                      a.scene_id +
                      '">' +
                      s +
                      "</div>",
                  });
              }
            });
          }
        },
        hot: {},
        hot_other: {},
        addHot: function (e) {
          var a = AMapModule,
            t = 15;
          e.is_tile, e.hot_id;
          new AMap.Marker({
            map: a.data.map,
            position: [e.longitude, e.latitude],
            draggable: !1,
            offset: new AMap.Pixel(-t / 2, -t / 2),
            content: e.content,
          });
        },
        panoToscene: function () {
          if (
            _waseeVRObj.radarObj &&
            _waseeVRObj.radarObj.sceneradar &&
            _waseeVRObj.radarObj.sceneradar.radarspots &&
            AMapModule.data.map
          ) {
            let e = Object.values(
              _waseeVRObj.radarObj.sceneradar.radarspots
            ).find(function (e) {
              return e.scene_id == _waseeVRObj.sceneId;
            });
            return (
              !("object" != typeof e || !e.lng) &&
              (AMapModule.data.map.panTo([e.lng, e.lat]), !0)
            );
          }
          return !1;
        },
      },
    },
    viewchange: function () {
      if (
        (_waseeVRObj._hlookat_change ||
          (_waseeVRObj._hlookat_change = _krpano.get("view.hlookat")),
        window.radarhotview &&
          !window.radarhotview.init &&
          _waseeVRObj._hlookat_change &&
          $(".radarimgbody.on").length > 0 &&
          $(".radarimg .hot.on").length > 0)
      ) {
        let e = this.radarObj.getRadarViewrotate(
          radarhotview.ys_rotate,
          radarhotview.ath
        );
        (radarhotview.rotate = e),
          $(".radarimg .hot.on img").css(
            "transform",
            "rotate(" + e + "deg) scale(1) "
          ),
          this.radarObj.sethotonangle();
      }
      "object" == typeof jobModule &&
        "function" == typeof jobModule.flagRemove &&
        jobModule.flagRemove(),
        "object" == typeof wstphdObj &&
          "function" == typeof __tphdObj.changeview &&
          this.is_panoMousedown &&
          __tphdObj.changeview({
            id: this.sceneId,
            hlookat: _krpano.get("view.hlookat"),
            vlookat: _krpano.get("view.vlookat"),
            fov: _krpano.get("view.fov"),
          });
    },
    setAutorotateObj: {
      isauto: !1,
      isgyro: !1,
      goautogyro: function (e) {
        let a = "",
          t = "",
          o = "";
        if (
          (1 == __WASEE_DATA__.product.switch.overallNav.enableLookto &&
            ((t =
              'stopdelayedcall(bomb);delete(bt);jscall("if(_waseeVRObj.is_preantostare){clearTimeout(_waseeVRObj.is_preantostare);delete _waseeVRObj.is_preantostare;};");'),
            (o = "bombtimer(0);")),
          0 == e)
        ) {
          if (this.goautogyro_timeout)
            return (
              clearTimeout(this.goautogyro_timeout),
              void delete this.goautogyro_timeout
            );
          (this.isauto = krp.get("autorotate.enabled")),
            this.isauto ||
              1 != this.autoload ||
              (_krpano.call("stopdelayedcall(oneautorota)"),
              (this.isauto = !0)),
            this.autoload && delete this.autoload,
            (this.isgyro = krp.get("plugin[gyro].enabled")),
            this.isauto && (a += "autorotate.stop();" + t),
            this.isgyro && (a += "set(plugin[gyro].enabled,false);");
        } else
          this.isauto &&
            (a +=
              "jscall(\"$('.navrighttop .autorotate').removeClass('close');\");autorotate.start();" +
              o),
            this.isgyro && (a += "set(plugin[gyro].enabled,true);");
        "" != a &&
          (void 0 === e
            ? (this.goautogyro_timeout = setTimeout(function () {
                delete _waseeVRObj.setAutorotateObj.goautogyro_timeout,
                  krp.call(a);
              }, 4e3))
            : krp.call(a));
      },
      isvideoplay: !1,
      govideoautoplay: function (e) {
        _panoGroupObj.panoOFFgroup[_waseeVRObj.sceneId] &&
          2 == _panoGroupObj.panoOFFgroup[_waseeVRObj.sceneId].media_type &&
          "object" == typeof _waseeVRObj.panovideoObj.video &&
          (0 == e
            ? _waseeVRObj.panovideoObj.video.ispaused ||
              (_waseeVRObj.panovideoObj.video.pause(), (this.isvideoplay = !0))
            : (_waseeVRObj.panovideoObj.video.play(), (this.isvideoplay = !1)));
      },
      goembedvideo: function (e) {
        let a = !1;
        if (_waseeVRObj.isAndroid)
          for (var t in _panoGroupObj.panoOFFgroup[_waseeVRObj.sceneId].embeds)
            Object.hasOwnProperty.call(
              _panoGroupObj.panoOFFgroup[_waseeVRObj.sceneId].embeds,
              t
            ) &&
              _krpano.get("hotspot[" + t + "]") &&
              1 == _krpano.get("hotspot[" + t + "]").isvideoplayer &&
              !_krpano.get("hotspot[" + t + "]").ispaused &&
              (0 == e
                ? (_krpano.call("hotspot[" + t + "].pause()"), (a = !0))
                : _krpano.call("hotspot[" + t + "].play()"));
        else {
          let t = _krpano.get("play_videoname");
          _krpano.get("play_videoname") &&
            t.length > 1 &&
            _krpano.get("hotspot[" + t + "]") &&
            !_krpano.get("hotspot[" + t + "]").ispaused &&
            (0 == e
              ? (_krpano.call("hotspot[" + t + "].pause()"), (a = !0))
              : _krpano.call("hotspot[" + t + "].play()"));
        }
        return a;
      },
    },
    bindNavButClick: function () {
      $(".navrighttop")
        .on("click", ".autorotate", function () {
          $(this).toggleClass("close"),
            !$(this).hasClass("close") &&
              krp.get("plugin[gyro].enabled") &&
              ($("body").append(
                '<div class="mask_transparent"></div><div class="mask_toast"><p class="mask_toast_content">请关闭陀螺仪体验</p></div>'
              ),
              setTimeout(function () {
                $(".mask_transparent,.mask_toast").remove();
              }, 1500)),
            krp.call(
              "if(autorotate.isrotating,autorotate.stop();,autorotate.start(););"
            );
        })
        .on("click", ".vrr2", function () {
          _waseeVRObj.isAndroid && $.isWeiXinClient()
            ? ($("body").append(
                '<div class="mBoxbg on"><img src="' +
                  paramObj.resourceWasee +
                  '/home/vrpano/img/androidvr.png" style="width: auto;float: right;max-width:100%;"></div>'
              ),
              setTimeout(function () {
                $(".mBoxbg").click(function () {
                  $(this).remove();
                });
              }, 1e3))
            : _waseeVRObj__isApp.setVR(1);
        })
        .on("click", ".gyro", function () {
          $(this).toggleClass("close"),
            krp.call("switch(plugin[gyro].enabled)");
        });
    },
    enterVr: function () {
      1 == this.isapk && this.setPageParrama(0);
      let e = "";
      (this.webvrhotspot = []),
        (e =
          "set(layer[webvr_fakemode_info].html," +
          _langObj.vrtishi +
          ");set(layer[webvr_exitbutton].html," +
          _langObj.tuichuvr +
          ");set(layer[webvr_setupbutton].html," +
          _langObj.vrshezhi +
          ");set(vr_setup_hs.html," +
          _langObj.vrshezhi +
          ");"),
        4 == __WASEE_DATA__.product.panoinfo.skinItem &&
          ((e =
            "set(layer[webvr_fakemode_info].html," +
            _langObj.vrtishi +
            " " +
            _languageObj.EN.vrtishi +
            ");set(layer[webvr_exitbutton].html," +
            _langObj.tuichuvr +
            " " +
            _languageObj.EN.tuichuvr +
            ");set(layer[webvr_setupbutton].html," +
            _langObj.vrshezhi +
            " " +
            _languageObj.EN.vrshezhi +
            ");set(vr_setup_hs.html," +
            _langObj.vrshezhi +
            " " +
            _languageObj.EN.vrshezhi +
            ");"),
          $(".olympics-menus .select").addClass("none"));
      for (let a = 0; a < krp.get("hotspot.count"); a++)
        1 == krp.get("hotspot[" + a + "].visible") &&
          "nadirlogo" != krp.get("hotspot[" + a + "].name") &&
          "nadirlogo2" != krp.get("hotspot[" + a + "].name") &&
          (this.webvrhotspot.push(a),
          (e += "set(hotspot[" + a + "].visible,false);"));
      "" != e && krp.call(e), this.loadHotspot_vr(), this.setPageParrama(0);
    },
    exitVr: function () {
      if (
        (paramObj._isForAPP &&
          _waseeVRObj__isApp.API_Wasee_Front_CallBack(1, {}),
        this.setPageParrama(1),
        this.webvrhotspot && this.webvrhotspot.length > 0)
      ) {
        "" != this._mrhotsnamelist &&
          this.deletePanoelem("hotspot", "", this._mrhotsnamelist);
        let e = "";
        for (let a = 0; a < this.webvrhotspot.length; a++)
          e += "set(hotspot[" + this.webvrhotspot[a] + "].visible,true);";
        "" != e && krp.call(e);
      } else
        this.webvrhotspot ||
          ("" != this._mrhotsnamelist &&
            this.deletePanoelem("hotspot", "", this._mrhotsnamelist),
          this.loadHotspot());
      4 == __WASEE_DATA__.product.panoinfo.skinItem &&
        $(".olympics-menus .select").removeClass("none");
    },
    changeOrientation: function (e) {
      var a = document.documentElement.clientWidth,
        t = document.documentElement.clientHeight;
      a < t &&
        (e.width(t),
        e.height(a),
        e.css("top", (t - a) / 2),
        e.css("left", 0 - (t - a) / 2),
        e.css("transform", "rotate(90deg)"));
      var o = "onorientationchange" in window ? "orientationchange" : "resize";
      window.addEventListener(
        o,
        function () {
          setTimeout(function () {
            var a = document.documentElement.clientWidth,
              t = document.documentElement.clientHeight;
            initCityWidth(),
              (cityCrashDistanceArr = initCityCrashDistance()),
              a > t
                ? (e.width(a),
                  e.height(t),
                  e.css("top", 0),
                  e.css("left", 0),
                  e.css("transform", "none"),
                  e.css("transform-origin", "50% 50%"))
                : (e.width(t),
                  e.height(a),
                  e.css("top", (t - a) / 2),
                  e.css("left", 0 - (t - a) / 2),
                  e.css("transform", "rotate(90deg)"),
                  e.css("transform-origin", "50% 50%"));
          }, 300);
        },
        !1
      );
    },
    isCls: !1,
    clearScreen: function (e) {
      if (
        !(
          0 == this.loadpanoCount ||
          (1 == _waseeVRObj.is_switch_nav && _panonavObj.isStartNav())
        )
      )
        if (this.lSNOCLS) delete this.lSNOCLS;
        else if (
          (e && e.isforce) ||
          (1 != __INFO__.password_status && "scenemap" != this.sceneName)
        )
          if (e)
            (0 != e.isautoCls && 1 != e.isautoCls) ||
              (this.isautoCls = e.isautoCls),
              1 == e.isCls
                ? (this.setPageParrama(0), (this.isCls = !0))
                : (this.setPageParrama(1), (this.isCls = !1));
          else {
            if (0 == this.isautoCls) return;
            if (this.isSaying) return;
            this.isCls
              ? (this.setPageParrama(1), (this.isCls = !1))
              : (this.setPageParrama(0), (this.isCls = !0));
          }
    },
    set_in_startpano: function (e) {
      var a = e.width,
        t = e.height;
      (paramObj._width * t) / a > paramObj._height &&
        $(e).css({ "max-width": "100%", height: "auto", "max-height": "80%" });
    },
    bigpixeltipsShow: function () {
      "" == $.getCookie("sbigpixeltipsClose")
        ? (this.isDesktop
            ? $("body").append(
                '<div class="bigpixeltips" onClick="_waseeVRObj.bigpixeltipsClose();"><img src="' +
                  paramObj.resourceWasee +
                  '/home/krpano/img/bigpixeltips-d.gif"></div>'
              )
            : $("body").append(
                '<div class="bigpixeltips" onClick="_waseeVRObj.bigpixeltipsClose();"><img src="' +
                  paramObj.resourceWasee +
                  '/home/krpano/img/bigpixeltips-m.gif"></div>'
              ),
          setTimeout(function () {
            _waseeVRObj.bigpixeltipsClose();
          }, 5e3))
        : "scenemap" != _waseeVRObj.sceneName &&
          ("0" != paramObj.krpano.scenic_map ||
            ("0" != paramObj._getSceneId &&
              "" != paramObj._getSceneId &&
              paramObj._getSceneId));
    },
    bigpixeltipsClose: function () {
      $(".bigpixeltips").length > 0 &&
        ($(".bigpixeltips").remove(),
        $.setCookie("sbigpixeltipsClose", -1, 2592e6)),
        "scenemap" != _waseeVRObj.sceneName &&
          ("0" != paramObj.krpano.scenic_map ||
            ("0" != paramObj._getSceneId &&
              "" != paramObj._getSceneId &&
              paramObj._getSceneId));
    },
    clearScreen_callBack: function (e) {
      "object" == typeof e &&
        (this.clearScreen_callBackData || (this.clearScreen_callBackData = {}),
        (this.clearScreen_callBackData = $.extend(
          this.clearScreen_callBackData,
          e
        )));
    },
    setPageParrama: function (e, a) {
      let t = "",
        o = !0,
        s = ".pano_bottom_item,";
      if (
        (this.is_scenic > 0 && 0 == this.sceneId && ((o = !1), (s = "")),
        paramObj._isForAPP
          ? 1 == e && "off" == _waseeVRObj.autoGuidesObj.status
            ? ($(".syNoticeUlbody").css(
                "top",
                paramObj._App_NaviBarHeight + 10 + "px"
              ),
              _krpano.call(
                (this.compassY
                  ? "tween(layer[compass].y," + this.compassY + ",0.3);"
                  : "") + "showAllHotspot(21009);"
              ),
              _waseeVRObj__isApp.API_Wasee_Front_CallBack(1, {}),
              "panoOverFirst" != a
                ? $(".navrighttop").addClass("on")
                : null != paramObj._getSceneId ||
                  1 != __WASEE_DATA__.product.switch.overallNav.switch_hdmap ||
                  0 != __WASEE_DATA__.product.panoinfo.scenic_map ||
                  (1 !=
                    __WASEE_DATA__.product.switch.overallNav.openmap_inshow &&
                    null !=
                      __WASEE_DATA__.product.switch.overallNav.openmap_inshow)
                ? $(".navrighttop").addClass("on")
                : $("#pano_body").removeClass("opa0"))
            : 0 == e &&
              ($(".navrighttop").removeClass("on"),
              $(".syNoticeUlbody").css("top", "-50px"),
              this.compassHeight &&
                (t = "tween(layer[compass].y," + this.compassHeight + ",0.3);"),
              "comment" != a && (t += "hideAlltHotspot(21009);"),
              _waseeVRObj__isApp.API_Wasee_Front_CallBack(4, {}),
              $("#openmap-switch").length > 0 &&
                1 == $("#openmap-switch").attr("data-atr") &&
                (_waseeVRObj.isIOS
                  ? window.webkit.messageHandlers.API_UI_showSubTitle.postMessage(
                      !0
                    )
                  : _waseeVRObj.isAndroid &&
                    window.JsBridge.API_UI_showSubTitle(!0)))
          : 1 == e && "off" == _waseeVRObj.autoGuidesObj.status
          ? ($(".pano_bottom_item").removeClass("visib_h"),
            $(".syNoticeUlbody").css("top", "0px"),
            $(".winecellar_p.click").length > 0 &&
              $(".radarimgbody").addClass("on"),
            "panoOverFirst" != a
              ? ($(
                  s +
                    ".cintyfwliBody,.navrighttop,.navleftcenter,.navleftbottom,.navrightbottom"
                ).addClass("on"),
                $(".videocontrol").removeClass("onhide"),
                o &&
                  ($(".speguidetail").length > 0 &&
                    $(".speguidetail,.setspecir").addClass("on"),
                  $(".specigroupBody").hasClass("show") &&
                    $(".specigroupBody").addClass("on").removeClass("show")),
                _panoGroupObj.panoOFFgroup[this.sceneId] &&
                  2 == _panoGroupObj.panoOFFgroup[this.sceneId].media_type &&
                  this.panovideoObj.setvideocontrolwzhi())
              : null != paramObj._getSceneId ||
                1 != __WASEE_DATA__.product.switch.overallNav.switch_hdmap ||
                0 != __WASEE_DATA__.product.panoinfo.scenic_map ||
                (1 != __WASEE_DATA__.product.switch.overallNav.openmap_inshow &&
                  null !=
                    __WASEE_DATA__.product.switch.overallNav.openmap_inshow)
              ? ($(
                  s +
                    ".cintyfwliBody,.navrighttop,.navleftcenter,.navleftbottom,.navrightbottom"
                ).addClass("on"),
                $(".videocontrol").removeClass("onhide"),
                _panoGroupObj.panoOFFgroup[this.sceneId] &&
                  2 == _panoGroupObj.panoOFFgroup[this.sceneId].media_type &&
                  this.panovideoObj.setvideocontrolwzhi())
              : ((1 != __WASEE_DATA__.product.switch.overallNav.openmap_menu &&
                  $("#pano_body").hasClass("opa0")) ||
                  $(
                    s +
                      ".cintyfwliBody,.navrighttop,.navleftcenter,.navleftbottom,.navrightbottom"
                  ).addClass("on"),
                1 == e && "panoOverFirst" == a
                  ? setTimeout(function () {
                      $("#pano_body").removeClass("opa0");
                    }, 1e3)
                  : $("#pano_body").removeClass("opa0")),
            0 == __WASEE_DATA__.product.panoinfo.skinItem
              ? 1 == __WASEE_DATA__.product.switch.overallNav.switch_compass &&
                _krpano.call(
                  (this.compassY
                    ? "tween(layer[compass].y," + this.compassY + ",0.3);"
                    : "") + "showAllHotspot(21009);"
                )
              : 3 == __WASEE_DATA__.product.panoinfo.skinItem &&
                (1 == __WASEE_DATA__.product.switch.overallNav.switch_compass &&
                  (t += "tween(layer[compass].x," + this.compassY + ",0.3);"),
                $(".moresystem").removeClass("none")))
          : 0 == e &&
            ($(
              ".pano_bottom_item,.cintyfwliBody,.navrighttop,.navleftcenter,.navleftbottom,.navrightbottom,.radarimgbody"
            ).removeClass("on"),
            $(".videocontrol").addClass("onhide"),
            $(".syNoticeUlbody").css("top", "-50px"),
            "comment" != a && (t += "hideAlltHotspot(21009);"),
            $(".speguidetail").length > 0 &&
              $(".speguidetail,.setspecir").removeClass("on"),
            $(".specigroupBody").hasClass("on") &&
              $(".specigroupBody").addClass("show").removeClass("on"),
            0 == __WASEE_DATA__.product.panoinfo.skinItem && this.compassHeight
              ? (t = "tween(layer[compass].y," + this.compassHeight + ",0.3);")
              : 3 == __WASEE_DATA__.product.panoinfo.skinItem &&
                (1 == __WASEE_DATA__.product.switch.overallNav.switch_compass &&
                  (t +=
                    "tween(layer[compass].x," + this.compassHeight + ",0.3);"),
                $(".moresystem").addClass("none"))),
        "object" == typeof this.clearScreen_callBackData)
      )
        for (var i in this.clearScreen_callBackData)
          if (this.clearScreen_callBackData.hasOwnProperty(i)) {
            const a = this.clearScreen_callBackData[i];
            "function" == typeof a && a(e);
          }
      "" != t && _krpano.call(t);
    },
    setShareUrl: function (e, a) {
      if (1 != this.storyline) {
        var t = location.protocol + "//" + location.host + location.pathname,
          o = _shareObj.title;
        if (
          ((shareObj.desc = _shareObj.desc),
          (shareObj.imgUrl = _shareObj.imgUrl),
          this.is_switch_nav > 0)
        ) {
          var s = $.resetUrlParameter([
            "def_sid",
            "ath",
            "atv",
            "addType",
            "waseeApp",
            "preview",
          ]);
          "" != s && (t += (-1 == t.indexOf("?") ? "?" : "&") + s);
        } else if (1 == e) {
          (t += "?def_sid=" + _waseeVRObj.sceneId),
            _waseeVRObj.sceneId > 0 &&
              "noview" != a &&
              (t +=
                "&ath=" +
                _krpano.get("view.hlookat").toFixed(4) +
                "&atv=" +
                _krpano.get("view.vlookat").toFixed(4));
          s = "";
          (s =
            1 == this.loadpanoCount && "noview" == a
              ? $.resetUrlParameter(["def_sid", "addType", "waseeApp"])
              : $.resetUrlParameter([
                  "def_sid",
                  "ath",
                  "atv",
                  "addType",
                  "waseeApp",
                ])),
            "" != s && (t += "&" + s),
            (o =
              "scenemap" != this.sceneName &&
              this.FirstSceneName != this.sceneName &&
              1 == __WASEE_DATA__.wxShare.share_with_name
                ? _waseeVRObj.sceneTitle + " - " + _shareObj.title
                : _shareObj.title);
        } else if (98 == e)
          (o =
            "scenemap" != this.sceneName &&
            this.FirstSceneName != this.sceneName &&
            1 == __WASEE_DATA__.wxShare.share_with_name
              ? _waseeVRObj.sceneTitle + " - " + _shareObj.title
              : _shareObj.title),
            (t =
              location.protocol +
              "//" +
              location.host +
              location.pathname +
              "?def_sid=" +
              _waseeVRObj.sceneId);
        else if (99 == e)
          (o = _shareObj.title),
            (t = location.protocol + "//" + location.host + location.pathname);
        else {
          s = $.resetUrlParameter([
            "def_sid",
            "ath",
            "atv",
            "addType",
            "waseeApp",
            "preview",
          ]);
          "" != s
            ? (t += (-1 == t.indexOf("?") ? "?" : "&") + s)
            : paramObj._id > 0 && (t += "?id=" + paramObj._id),
            (o = _shareObj.title);
        }
        if (
          (98 != e &&
            99 != e &&
            t != location.href &&
            history.replaceState(null, document.title, t),
          shareObj.isOnloadShare)
        ) {
          if (
            98 != e &&
            99 != e &&
            1 == __WASEE_DATA__.product.panoinfo.switch_firstscene
          ) {
            (t =
              __WASEE_DATA__.product.panoinfo.firstscene > 0 &&
              _panoGroupObj.panoOFFgroup[
                __WASEE_DATA__.product.panoinfo.firstscene
              ]
                ? location.protocol +
                  "//" +
                  location.host +
                  location.pathname +
                  "?def_sid=" +
                  __WASEE_DATA__.product.panoinfo.firstscene
                : location.protocol + "//" + location.host + location.pathname),
              (o = _shareObj.title);
            s = $.resetUrlParameter([
              "def_sid",
              "ath",
              "atv",
              "addType",
              "waseeApp",
              "preview",
            ]);
            "" != s &&
              (__WASEE_DATA__.product.panoinfo.firstscene > 0 &&
              _panoGroupObj.panoOFFgroup[
                __WASEE_DATA__.product.panoinfo.firstscene
              ]
                ? (t += "&" + s)
                : (t += "?" + s));
          }
          if (
            ((shareObj.title = o),
            (shareObj.link = t),
            $.isWeiXinClient() || shareObj.isQQ())
          ) {
            if (shareObj.link.indexOf("def_sid=") > 0) {
              let a = 0,
                t = 123;
              98 != e &&
              99 != e &&
              1 == __WASEE_DATA__.product.panoinfo.switch_firstscene &&
              __WASEE_DATA__.product.panoinfo.firstscene > 0
                ? (a = __WASEE_DATA__.product.panoinfo.firstscene)
                : _waseeVRObj.sceneId > 0
                ? (a = _waseeVRObj.sceneId)
                : ((t = 121), (a = __WASEE_DATA__.product.panoinfo.id)),
                (shareObj.shareData = { obj_type: t, obj_id: a });
            } else
              shareObj.shareData = {
                obj_type: 121,
                obj_id: __WASEE_DATA__.product.panoinfo.id,
              };
            shareObj.wxconfig_share(shareObj);
          }
        }
        paramObj._isForAPP &&
          ((shareObj.link = t),
          _waseeVRObj.isIOS
            ? window.webkit.messageHandlers.API_Share_setParam.postMessage({
                title: shareObj.title,
                desc: shareObj.desc,
                url: shareObj.link,
                thumbUrl: shareObj.imgUrl,
              })
            : _waseeVRObj.isAndroid &&
              window.JsBridge.API_Share_setParam(
                JSON.stringify({
                  title: shareObj.title,
                  desc: shareObj.desc,
                  url: shareObj.link,
                  thumbUrl: shareObj.imgUrl,
                })
              ));
      }
    },
    setCss: function (e, a) {
      (a = document.createElement("style")),
        (a.innerText = e),
        document.body.appendChild(a);
    },
    change_move_img: function (e) {
      this.scene.winImgObj = e;
      let a = e.width,
        t = e.height,
        o = 1,
        s = 0,
        i = 0,
        n = paramObj._width,
        r = paramObj._height,
        p = n,
        l = r;
      if (
        ("musicimgbody" != e.from &&
          0 == $(".moveimgbody").length &&
          $("#subinformain").append(
            '<div class="moveimgbody bg_full noselect"><img class="moveimg" src="' +
              e.url +
              '"><span class="allclose"></span></div>'
          ),
        $(".moveimgbody").hasClass("bg_full") ||
          ((n = $(".moveimgbody").width()), (r = $(".moveimgbody").height())),
        "musicimgbody" != e.from
          ? _waseeVRObj.isDesktop
            ? ((n -= 280), (r -= 180))
            : ((n -= 40), (r -= 40))
          : (0 == $(".moveimgbody img").length &&
              $(".moveimgbody").prepend(
                '<img class="moveimg" src="' + e.url + '">'
              ),
            $(".moveimgbody img").addClass("moveimg"),
            (p = n),
            (l = r)),
        $(".moveimg").attr("onload", function () {
          $("#toast").length > 0 && $("#toast").remove();
        }),
        a > n || t > r)
      ) {
        let e = n / a,
          s = r / t;
        (o = e < s ? e : s), (a *= o), (t *= o);
      }
      (s = (p - a) / 2),
        (i = (l - t) / 2),
        (window.moveimg = $.extend(
          { init: !1, slateX: s, slateY: i, scale: 1, scalev: 100 },
          e
        )),
        $(".moveimgbody .moveimg").css({
          width: a + "px",
          height: t + "px",
          transform:
            "translate3d(" +
            moveimg.slateX +
            "px," +
            moveimg.slateY +
            "px,0px) scale(1)",
        });
    },
    ischangeBigpixelhotspot: !1,
    loadotherimg: function (e) {
      let a =
          "pc" == $.browserRedirect()
            ? 0.7 * paramObj._height
            : paramObj._height - 280,
        t =
          $(".bigpixeltipst .body .timgdiv").height() +
          ($(".bigpixeltipst .body .content").length > 0
            ? $(".bigpixeltipst .body .content").height() + 12
            : 0);
      t > a
        ? $(".bigpixeltipst").css("height", a + "px")
        : $(".bigpixeltipst").css("height", t + 24 + "px");
    },
    clickspecianimat: function (e, a) {
      if (!_waseeVRObj.ischangeBigpixelhotspot) {
        $(".specigroupBody .speciwrap[name=" + e + "]")
          .addClass("on")
          .siblings()
          .removeClass("on"),
          $(".bigpixeltipst").length > 0 && $(".bigpixeltipst").remove(),
          a &&
            window.autospeci &&
            ((window.autospeci.isauto = !1),
            clearTimeout(window.autospeci.timeout),
            (window.autospeci.index = $(".specigroupBody .speciwrap").index(
              a
            )));
        var t = _waseeVRObj.scene.specifics[e].ath,
          o = _waseeVRObj.scene.specifics[e].atv,
          s = _waseeVRObj.scene.specifics[e].fov,
          i = "";
        1 == _waseeVRObj.scene.specifics[e].isMaxFov
          ? 3 != _panoGroupObj.panoOFFgroup[_waseeVRObj.sceneId].media_type
            ? (i +=
                "zoomto(140,smooth(80,100,220));lookto(" +
                t +
                "," +
                o +
                ",get(view.fov),smooth(180,100,420),true,false);")
            : (i +=
                "zoomto(1,linear(1.2));wait(0.2);lookto(" +
                t +
                "," +
                o +
                ",get(view.fovmin),linear(1.2),true,false);")
          : 3 == _panoGroupObj.panoOFFgroup[_waseeVRObj.sceneId].media_type
          ? (i +=
              "lookto(" + t + "," + o + "," + s + ",linear(1.2),true,false);")
          : (i +=
              "lookto(" +
              t +
              "," +
              o +
              "," +
              s +
              ",smooth(180,100,420),true,false);"),
          1 == _waseeVRObj.scene.specifics[e].isMaxFov &&
            3 != _panoGroupObj.panoOFFgroup[_waseeVRObj.sceneId].media_type &&
            (i += "zoomto(2,smooth(80,100,220));"),
          (i += "js(_waseeVRObj.setBigpixelhotspot(" + e + "));"),
          (_waseeVRObj.ischangeBigpixelhotspot = !0),
          _krpano.call(i);
      }
    },
    setBigpixelhotspot: function (e) {
      if (e) {
        let a = _waseeVRObj.scene.specifics[e],
          t = "";
        if (
          (a.img &&
            a.img.length > 10 &&
            (t +=
              '<div class="timgdiv flex__center"><img src="' +
              a.img +
              '" class="timg" onload="_waseeVRObj.loadotherimg(this)" /></div>'),
          a.tbody &&
            "" != a.tbody &&
            (this.is_ememap >= 1 &&
              (a.tbody = $.replaceAll({
                strData: a.tbody,
                list: [
                  { "href=": "ahref=" },
                  { "href =": "ahref=" },
                  { onclick: "ahref" },
                ],
              })),
            (t += '<div class="content"><pre>' + a.tbody + "</pre></div>")),
          "" != t)
        ) {
          $("#subinformain").append(
            '<div class="bigpixeltipst"><span class="tclose" onclick="$(\'.bigpixeltipst\').remove();$(\'.specigroupBody .specilist .speciwrap.on\').removeClass(\'on\')"></span><div class="body scrollbarw">' +
              t +
              "</div></div>"
          );
          let e =
              "pc" == $.browserRedirect()
                ? 0.7 * paramObj._height
                : paramObj._height - 280,
            o =
              (a.img && a.img.length > 10
                ? $(".bigpixeltipst .body .timgdiv").height()
                : 0) +
              $(".bigpixeltipst .body .content").height() +
              12;
          o > e
            ? $(".bigpixeltipst").css("height", e + "px")
            : $(".bigpixeltipst").css("height", o + 24 + "px"),
            $(".bigpixeltipst").css({ overflow: "initial" });
        }
        (this.ischangeBigpixelhotspot = !1),
          window.autospeci &&
            (window.autospeci.timeout = setTimeout(
              function () {
                window.autospeci &&
                  ((window.autospeci.isauto = !0),
                  (window.autospeci.index += 1),
                  window.autospeci.go());
              },
              1 == _waseeVRObj.scene.specifics[e].isMaxFov ? 5e3 : 3e3
            ));
      }
    },
    trSharecontaint: function () {
      if (0 == $("#subinformain .sharediv").length) {
        let e = location.protocol + "//" + location.host + location.pathname,
          a = "",
          t = "";
        if (
          ((a =
            paramObj._id && paramObj._id > 0
              ? e + "?id=" + paramObj._id + "&def_sid=" + _waseeVRObj.sceneId
              : e + "?def_sid=" + _waseeVRObj.sceneId),
          (t =
            location.protocol +
            "//" +
            location.host +
            "/Home/Service/genQRCode?business=VRHome&code=" +
            __INFO__.qrCode +
            "&url=" +
            encodeURIComponent(a)),
          _waseeVRObj.isDesktop)
        )
          $("#subinformain").append(
            '<div class="mBoxbg on"></div><div class="sharediv windowBody tstion visib_h"><div class="title" style="text-align: left;"><font>' +
              _langObj.fengxiang +
              '</font><a href="https://www.wasee.com/Wasee/VRHome/communitydetail?id=1200" target="_blank"><i class="iconfont icon_wentigaishu_m" style="font-size: 18px;color: #F7B500;margin-left: 8px;"></i></a></div><span class="closeshare p-ab allclose"></span><div class="tab flex_center_x"><span tabindex="1" class="item flex_center_y on"><i class="iconfont icon_tab"></i><font>' +
              _langObj.fengxing2 +
              '</font></span><span class="item flex_center_y" tabindex="2"><i class="iconfont icon_tab"></i><font>' +
              _langObj.fengxing3 +
              '</font></span></div><div class="qrcode"><img class="s1" sceneid="' +
              _waseeVRObj.sceneId +
              '" src="' +
              t +
              '"></div><div class="qrcodehtml flex_center_y flex__justify__b"><div class="dmline weburl flex__wrap__b"><span class="titlee">' +
              _langObj.zuopingweb +
              '</span><div class="texttabox"><textarea type="text" id="sceneHtml2">' +
              a +
              '</textarea></div><span class="copysharebtn copysharebtn2"><a>' +
              _langObj.copy +
              '</a></span></div><div class="dmline encode flex__wrap__b"><span class="titlee">' +
              _langObj.qianrudaima +
              '</span><div class="texttabox"><textarea type="text" id="sceneHtml"><iframe width="100%" height="440" frameborder="0" name="waseePanorama" scrolling="no" src="' +
              a +
              '"></iframe></textarea></div><span class="copysharebtn"><a>' +
              _langObj.copy +
              '</a></span></div></div><div class="errortips" style="text-align: left;padding-left: 124px;font-size: 12px;color: #666;"><font>' +
              _langObj.sharerrortips +
              '</font>：&lt;meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0" /&gt;<br><a href="https://www.wasee.com/Wasee/VRHome/communitydetail?id=1200" target="_blank" style="font-size: 14px;color: #F7B500;">' +
              _langObj.jiaochen +
              "></a></div></div>"
          );
        else {
          let e = "";
          (e = paramObj._isForAPP
            ? "点击APP右上角"
            : $.isWeiXinClient()
            ? "点击微信右上角"
            : "用微信打开"),
            $("#subinformain").append(
              '<div class="mBoxbg on"></div><div class="sharediv windowBody on m2"><span class="closeshare p-ab allclose flex__center"><i class="iconfont icon_close"></i></span><div class="tab flex_center_x"><div tabindex="1" class="item flex_center_y on"><span class="flex__center"><i class="iconfont icon_tab"></i><font>' +
                _langObj.dangqianchangj +
                '</font></span></div><div class="item flex_center_y" tabindex="2"><span class="flex__center"><i class="iconfont icon_tab"></i><font>' +
                _langObj.quanjinxiangm +
                '</font></span></div></div><div class="qrcode"><img class="s1" sceneid="' +
                _waseeVRObj.sceneId +
                '" src="' +
                t +
                '"></div><div class="tips">' +
                ("CN" == _languageObj.lang
                  ? "长按保存二维码或 <br><span>" + e + "</span>分享给好友"
                  : _langObj.fengxing5) +
                '</div><div class="shareBtn">' +
                _langObj.fengxing4 +
                "</div></div>"
            );
        }
        $(".sharediv .qrcode").css(
          "height",
          $(".sharediv .qrcode").width() + "px"
        ),
          4 == __WASEE_DATA__.product.panoinfo.skinItem &&
            ($(".sharediv .title").attr("data-lname", "fengxing1"),
            $(".sharediv .tab .item[tabindex=1]").attr(
              "data-lname",
              "fengxing2"
            ),
            $(".sharediv .tab .item[tabindex=2]").attr(
              "data-lname",
              "fengxing3"
            ),
            $(".sharediv .copysharebtn").attr("data-lname", "copy"),
            $(".sharediv.m2 .tab .item[tabindex=1]").attr(
              "data-lname",
              "dangqianchangj"
            ),
            $(".sharediv.m2 .tab .item[tabindex=2]").attr(
              "data-lname",
              "quanjinxiangm"
            ),
            $(".sharediv.m2 .tips").attr("data-lname", "fengxing5"),
            $(".sharediv.m2 .shareBtn").attr("data-lname", "fengxing4"));
      } else if (
        $(".sharediv .qrcode .s1").attr("sceneid") != _waseeVRObj.sceneId &&
        ((_waseeVRObj.isDesktop &&
          1 == $(".sharediv .tab span.on").attr("tabindex")) ||
          !_waseeVRObj.isDesktop)
      ) {
        let e = location.protocol + "//" + location.host + location.pathname;
        paramObj._id && paramObj._id > 0
          ? (e += "?id=" + paramObj._id + "&def_sid=" + _waseeVRObj.sceneId)
          : (e += "?def_sid=" + _waseeVRObj.sceneId),
          $(".sharediv .qrcode .s1").attr({
            sceneid: _waseeVRObj.sceneId,
            src:
              location.protocol +
              "//" +
              location.host +
              "/Home/Service/genQRCode?business=VRHome&code=" +
              __INFO__.qrCode +
              "&url=" +
              encodeURIComponent(e),
          }),
          _waseeVRObj.isDesktop &&
            $(".sharediv #sceneHtml").val(
              '<iframe width="100%" height="440" frameborder="0" name="waseeVRPanorama" scrolling="no" src="' +
                e +
                '"></iframe>'
            );
      }
      return (
        setTimeout(
          '$(".sharediv").addClass("on");$(".sharediv").prev().addClass("on");',
          100
        ),
        !1
      );
    },
    getBlend: function (e) {
      let a = "BLEND(1.0, easeInCubic)";
      switch (e) {
        case "blend_a":
          a = "NOBLEND";
          break;
        case "blend_b":
          a = "BLEND(1.0, easeInCubic)";
          break;
        case "blend_c":
          a = "ZOOMBLEND(1.0, 2.0, easeInOutSine)";
          break;
        case "blend_d":
          a = "OPENBLEND(1.0, 0.0, 0.2, 0.0, linear)";
          break;
        case "blend_e":
          a = "COLORBLEND(1.0, 0x000000, easeOutSine)";
          break;
        case "blend_f":
          a = "COLORBLEND(1.0, 0xFFFFFF, easeOutSine)";
          break;
        case "blend_g":
          a = "LIGHTBLEND(1.0, 0xFFFFFF, 2.0, linear)";
          break;
        case "blend_h":
          a = "SLIDEBLEND(1.0, 180.0, 0.2, linear)";
          break;
        case "blend_i":
          a = "SLIDEBLEND(1.0, 90.0, 0.2, linear)";
          break;
        case "blend_j":
          a = "SLIDEBLEND(1.0, 0.0, 0.2, linear)";
          break;
        case "blend_k":
          a = "SLIDEBLEND(1.0, -90.0, 0.2, linear)";
          break;
        case "blend_l":
          a = "OPENBLEND(1.0, -1.0, 0.3, 0.0, linear)";
          break;
        case "blend_m":
          a = "OPENBLEND(1, 1.0, 0.3, 0.0, linear)";
          break;
        case "blend_n":
          a = "SLIDEBLEND(1.0, 135.0, 0.4, linear)";
          break;
        case "blend_o":
          a = "SLIDEBLEND(1.0, 35.0, 0.4, linear)";
          break;
        case "blend_p":
          a = "SLIDEBLEND(1.0, 215.0, 0.4, linear)";
          break;
        case "blend_q":
          a = "SLIDEBLEND(1.0, -35.0, 0.4, linear)";
          break;
        default:
          a = "BLEND(1.0, easeInCubic)";
      }
      return a;
    },
    autoGuidesObj: {
      init: function () {
        if (!this.isloadinit && 0 == this.autoGuides.length) {
          this.isloadinit = !0;
          let e = this;
          e.gui_count = _krpano.get("config.autoGuides.guide.count");
          for (let a = 0; a < e.gui_count; a++) {
            let t = _krpano.get("config.autoGuides.guide[" + a + "]"),
              o = _krpano.get("config.autoGuides.guide[" + a + "].point.count"),
              s = {
                id: t.id,
                title: t.title,
                name: t.name,
                music_dir: t.music_dir,
                point: [],
              };
            for (let e = 0; e < o; e++) {
              const t = _krpano.get(
                "config.autoGuides.guide[" + a + "].point[" + e + "]"
              );
              if (
                !_panoGroupObj.panoOFFgroup[t.sceneid] ||
                (0 == _panoGroupObj.panoOFFgroup[t.sceneid].isshow &&
                  0 == __WASEE_DATA__.product.switch.overallNav.isautoshow)
              )
                continue;
              let o = {
                name: t.name,
                sceneid: t.sceneid,
                ath: t.ath,
                atv: t.atv,
                fov: t.fov,
                time: t.time,
                blend: t.blend,
                music: t.music,
                music_name: t.music_name,
                tbody: t.tbody,
              };
              if (e > 0) {
                let e = s.point.length - 1;
                s.point[e].sceneid == t.sceneid
                  ? ((s.point[e].to_ath = t.ath),
                    (s.point[e].to_atv = t.atv),
                    (s.point[e].to_fov = t.fov))
                  : (s.point[e].to_sceneid = t.sceneid);
              }
              s.point.push(o);
            }
            e.autoGuides.push(s), (e.autoGuides2[t.id] = a);
          }
          this.autoGuides.length > 0
            ? ((this.p_count = this.autoGuides[0].point.length),
              _waseeVRObj.is_scenic > 0 &&
                $(
                  ".scenicnavbottom .navtitle .swiper-slide.roadmap,.navrightbottom .roadmap"
                ).removeClass("none"))
            : _waseeVRObj.is_scenic > 0 &&
              $(
                ".scenicnavbottom .navtitle .swiper-slide.roadmap,.navrightbottom .roadmap"
              ).remove();
        }
      },
      autoGuides: [],
      autoGuides2: {},
      status: "off",
      ath: "",
      atv: "",
      fov: "",
      gui_count: 0,
      p_count: 0,
      p_index: -1,
      endGuide_data: 0,
      startguide: function () {
        _waseeVRObj.autorotateObj.enableLooktoscene &&
          (clearTimeout(_waseeVRObj.autorotateObj.enableLooktoscene),
          delete _waseeVRObj.autorotateObj.enableLooktoscene),
          1 == __WASEE_DATA__.product.panoinfo.guides.info.goonescene &&
            (this.sceneId = _waseeVRObj.sceneId),
          1 == __WASEE_DATA__.product.panoinfo.guides.info.closemusic &&
            _soundObj.stopsound("bgmusic", "temporary_pause"),
          1 == __WASEE_DATA__.product.panoinfo.guides.info.closevoice &&
            _soundObj.stopsound("bgvoice", "temporary_pause"),
          1 == __WASEE_DATA__.product.panoinfo.guides.info.hidehot &&
            _krpano.call("hideAlltHotspot(21009,10010)");
      },
      goguideBtn: function (e) {
        function a() {
          if (
            (_waseeVRObj.setPageParrama(0),
            _waseeVRObj.setAutorotateObj.goautogyro(0),
            (_waseeVRObj.autoGuidesObj.status = "played"),
            $("#subinformain").addClass("pguided"),
            -1 == t.p_index)
          ) {
            let a = _waseeVRObj.autoGuidesObj.autoGuides[e].point[0];
            a.sceneid != _waseeVRObj.sceneId
              ? (_krpano.set("isautoGuide", !0),
                _waseeVRObj.toLoadscene({
                  id: a.sceneid,
                  vars:
                    "view.fov=" +
                    a.fov +
                    "&view.hlookat=" +
                    a.ath +
                    "&view.vlookat=" +
                    a.atv,
                }))
              : _krpano.call(
                  "lookto(" +
                    a.ath +
                    "," +
                    a.atv +
                    "," +
                    a.fov +
                    ",tween(easeinoutquad,3),true,true,js(_waseeVRObj.autoGuidesObj.p_index++;_waseeVRObj.autoGuidesObj.toGuide();););"
                );
          }
          _krpano.set("isautoGuide", !0);
        }
        (this.xianlu_index = e),
          (this.p_count = this.autoGuides[e].point.length);
        let t = this;
        0 == $("#subinformain .setautotour").length &&
          $("#subinformain").append(
            '<div class="setautotour flex__center"><div class="dl_zt flex_center_y" tips="' +
              _langObj.pause +
              '" tipss="' +
              _langObj.play +
              '"><i class="iconfont"></i></div><div class="dl_stop flex_center_y" tips="' +
              _langObj.stop +
              '"><i class="iconfont"></i></div></div>'
          ),
          4 == __WASEE_DATA__.product.panoinfo.skinItem &&
            ($(".setautotour .dl_zt").attr({
              "data-lname": "pause",
              "data-lname2": "play",
            }),
            $(".setautotour .dl_stop").attr("data-lname", "stop")),
          __WASEE_DATA__.product.panoinfo.guides &&
          __WASEE_DATA__.product.panoinfo.guides.info.startimg &&
          __WASEE_DATA__.product.panoinfo.guides.info.startimg.length > 10
            ? ($("#subinformain").append(
                '<img class="guide_startimg allcenter" style="max-width: 90%; max-height: 90%;width:auto;height:auto;" src="' +
                  __WASEE_DATA__.product.panoinfo.guides.info.startimg +
                  '">'
              ),
              _waseeVRObj.setPageParrama(0),
              (this.startimgstart = setTimeout(function () {
                $(".guide_startimg").remove(), a();
              }, 3500)))
            : a();
      },
      toGuide: function () {
        _waseeVRObj.setAutorotateObj.goautogyro(0);
        if ("off" == this.status || "paused" == this.status) return;
        if (this.p_index + 1 >= this.p_count) return void this.endGuide();
        let e = _waseeVRObj.autoGuidesObj.xianlu_index,
          a = this.autoGuides[e].point[this.p_index];
        if (
          (this.autoGuides[e].music_dir &&
            this.autoGuides[e].music_dir.length > 10 &&
            (!_soundObj.soundList.xianlu_guide ||
              (_soundObj.soundList.xianlu_guide &&
                !_soundObj.soundList.xianlu_guide.isplay)) &&
            (_soundObj.stopsound(
              "allsound",
              "temporary_pause",
              "guide|xianlu_guide|bgmusic|bgvoice"
            ),
            _soundObj.playsound(
              "xianlu_guide",
              this.autoGuides[e].music_dir,
              null,
              { tiaoguo: "guide|bgmusic|bgvoice" }
            )),
          a)
        ) {
          var t = "",
            o = "",
            s = "",
            i = "",
            n = this.autoGuides[e].point[this.p_index + 1];
          if ((a.time, "" != a.tbody))
            if (0 == $(".guideTbody").length) {
              let e = "",
                t = "",
                o = "font-size:14px;";
              if (__WASEE_DATA__.product.panoinfo.guides) {
                0 == __WASEE_DATA__.product.panoinfo.guides.info.posi &&
                  (t = " bottom"),
                  2 == __WASEE_DATA__.product.panoinfo.guides.info.style
                    ? (e = " heidi")
                    : 3 == __WASEE_DATA__.product.panoinfo.guides.info.style &&
                      (e = " noback");
                let a = __WASEE_DATA__.product.panoinfo.guides.info.size;
                14 != a &&
                  a > 0 &&
                  ((o = "font-size:" + a + "px;"),
                  a >= 16 &&
                    (o +=
                      16 == a
                        ? "line-height: 28px;"
                        : a >= 18
                        ? "line-height: 32px;"
                        : ""));
              }
              _waseeVRObj.is_ememap >= 1 &&
                (a.tbody = $.replaceAll({
                  strData: a.tbody,
                  list: [
                    { "href=": "ahref=" },
                    { "href =": "ahref=" },
                    { onclick: "ahref" },
                  ],
                })),
                $("#subinformain").append(
                  '<div class="guideTbody' +
                    e +
                    t +
                    '"><pre style="' +
                    o +
                    '">' +
                    a.tbody +
                    "</pre></div>"
                );
            } else $(".guideTbody pre").html(a.tbody);
          else $(".guideTbody").length > 0 && $(".guideTbody").remove();
          if (
            ("" != a.music && a.music.length > 10
              ? a.sceneid == _waseeVRObj.sceneId &&
                (_soundObj.stopsound(
                  "allsound",
                  "temporary_pause",
                  "xianlu_guide|guide|bgmusic|bgvoice"
                ),
                _soundObj.playsound("guide", a.music, null, {
                  tiaoguo: "xianlu_guide|bgmusic|bgvoice",
                }))
              : (n &&
                  n.sceneid != a.sceneid &&
                  "" != n.music &&
                  n.music.length > 10 &&
                  this.p_index > 0 &&
                  this.autoGuides[e].point[this.p_index - 1].music &&
                  this.autoGuides[e].point[this.p_index - 1].music.length >
                    10 &&
                  this.autoGuides[e].point[this.p_index - 1].music ==
                    n.music) ||
                (_soundObj.soundList.guide &&
                  (_soundObj.stopsound("guide"),
                  delete _soundObj.soundList.guide)),
            "nopaused" == this.status)
          )
            (this.status = "played"),
              (t = a.to_ath),
              (o = a.to_atv),
              (s = a.to_fov);
          else {
            if ("played" != this.status) return;
            (t = a.to_ath), (o = a.to_atv), (s = a.to_fov);
          }
          let r =
            "js(_waseeVRObj.autoGuidesObj.p_index++;_waseeVRObj.autoGuidesObj.toGuide(););";
          if (a.sceneid == _waseeVRObj.sceneId)
            if (a.to_sceneid)
              i +=
                "loadscene(scene" +
                a.to_sceneid +
                ",view.fov=" +
                n.fov +
                "&view.hlookat=" +
                n.ath +
                "&view.vlookat=" +
                n.atv +
                ", " +
                (_panoGroupObj.panoOFFgroup[a.to_sceneid] &&
                _panoGroupObj.panoOFFgroup[_waseeVRObj.sceneId].media_type ==
                  _panoGroupObj.panoOFFgroup[a.to_sceneid].media_type
                  ? "MERGE"
                  : "KEEPSCENES") +
                ", " +
                _waseeVRObj.getBlend(a.blend) +
                ");";
            else {
              let e = 2;
              a.time > 0 && (e = a.time),
                (i +=
                  "lookto(" +
                  t +
                  "," +
                  o +
                  "," +
                  s +
                  ",tween(easeinoutquad," +
                  e +
                  "),true,true," +
                  r +
                  ");");
            }
          else
            i +=
              "loadscene(scene" +
              a.sceneid +
              ",view.fov=" +
              a.fov +
              "&view.hlookat=" +
              a.ath +
              "&view.vlookat=" +
              a.atv +
              ", " +
              (_panoGroupObj.panoOFFgroup[a.to_sceneid] &&
              _panoGroupObj.panoOFFgroup[_waseeVRObj.sceneId].media_type ==
                _panoGroupObj.panoOFFgroup[a.to_sceneid].media_type
                ? "MERGE"
                : "KEEPSCENES") +
              ", " +
              _waseeVRObj.getBlend(a.blend) +
              ");";
          "" != i &&
            (a.sceneid != _waseeVRObj.sceneId || a.to_sceneid
              ? setTimeout(function () {
                  _krpano.call(i);
                }, 2e3)
              : _krpano.call(i));
        }
      },
      endGuide: function (e) {
        function a() {
          if (1 != _waseeVRObj.autoGuidesObj.endGuide_data)
            if (1 == __WASEE_DATA__.product.panoinfo.guides.info.loop) {
              function e() {
                (_waseeVRObj.autoGuidesObj.status = "played"),
                  _waseeVRObj.autoGuidesObj.toGuide(o.xianlu_index);
              }
              _soundObj.stopsound("guide"),
                _soundObj.soundList.guide &&
                  (_soundObj.soundList.guide.url = ""),
                _soundObj.stopsound("xianlu_guide"),
                _soundObj.soundList.xianlu_guide &&
                  (_soundObj.soundList.xianlu_guide.url = ""),
                __WASEE_DATA__.product.panoinfo.guides.info.startimg &&
                __WASEE_DATA__.product.panoinfo.guides.info.startimg.length > 10
                  ? ($("#subinformain").append(
                      '<img class="guide_startimg allcenter" style="max-width: 90%; max-height: 90%;width:auto;height:auto;" src="' +
                        __WASEE_DATA__.product.panoinfo.guides.info.startimg +
                        '">'
                    ),
                    setTimeout(function () {
                      $(".guide_startimg").remove(), e();
                    }, 3500))
                  : e();
            } else t();
          else t();
        }
        function t() {
          _waseeVRObj.setPageParrama(1),
            $("#subinformain").removeClass("pguided"),
            _waseeVRObj.autorotateObj.setsceneauto(),
            $(".setautotour").remove(),
            _krpano.call("delete(isautoGuide)"),
            $(".guideTbody").length > 0 && $(".guideTbody").remove(),
            1 == __WASEE_DATA__.product.panoinfo.guides.info.goonescene &&
            o.sceneId > 0 &&
            o.sceneId != _waseeVRObj.sceneId
              ? setTimeout(function () {
                  _waseeVRObj.toLoadscene({ id: o.sceneId });
                }, 1e3)
              : 1 == __WASEE_DATA__.product.panoinfo.guides.info.hidehot &&
                _waseeVRObj.loadHotspot(),
            _soundObj.soundList.guide &&
              (_soundObj.stopsound("guide"),
              delete _soundObj.soundList.guide,
              _soundObj.stopsound("allsound", "temporary_nopause")),
            _soundObj.soundList.xianlu_guide &&
              (_soundObj.stopsound("xianlu_guide"),
              delete _soundObj.soundList.xianlu_guide,
              _soundObj.stopsound("allsound", "temporary_nopause")),
            document.getElementById("audio_guide") &&
              document.getElementById("audio_guide").pause(),
            document.getElementById("audio_xianlu_guide") &&
              document.getElementById("audio_xianlu_guide").pause();
        }
        let o = this;
        (this.endGuide_data = e),
          (this.status = "off"),
          (this.p_index = -1),
          _waseeVRObj.setAutorotateObj.goautogyro(),
          this.startimgstart &&
            ($(".guide_startimg").remove(),
            clearTimeout(this.startimgstart),
            delete this.startimgstart),
          __WASEE_DATA__.product.panoinfo.guides &&
          __WASEE_DATA__.product.panoinfo.guides.info.endimg
            ? ($("#subinformain").append(
                '<img class="guide_endimg allcenter" style="max-width: 80%; max-height: 80%;" src="' +
                  __WASEE_DATA__.product.panoinfo.guides.info.endimg +
                  '">'
              ),
              setTimeout(function () {
                $(".guide_endimg").remove(), a();
              }, 3500))
            : a();
      },
    },
    searchAllObj: {
      init: function () {
        if (0 == $(".searchAbaotsce").length || 0 == this.hotspots.length) {
          if (
            ($("#subinformain").append(
              '\n                    <div class="mask_Box_overlay searchAbaotscebg on" style="backdrop-filter: blur(4px);"><span class="allclose"></span></div>\n                    <div class="mask_Box pcenter on searchAbaotsce">\n                        <div class="search flex__wrap__b">\n                            <div class="sicon"></div>\n                            <div class="sinput"><input class="searinput" placeholder="请输入关键字"><i class="iconfont icon_cha p-ab"></i><button class="searbtn iconfont">搜索</button>\n                                <div class="ylruselt none"></div>\n                            </div>\n                        </div>\n                        <div class="searcate">\n                            <span class="citem on" data-type="all">全部</span><span class="citem" data-type="scene">场景</span>\n                        </div>\n                        <div class="searruselt"></div>\n                        <div class="searpage none">\n                            <span class="sprev disabled2 none" data-type="prev"><</span>\n                            <span class="first on">1</span><i class="previ none">...</i>\n                            <a></a>\n                            <i class="nexti none">...</i><span class="last none">10</span>\n                            <span class="snext disabled2 none" data-type="next">></span>\n                        </div>\n                    </div>\n                '
            ),
            !_waseeVRObj.isDesktop)
          ) {
            $(".searchAbaotsce .searruselt").addClass("scrollbarw");
            let e = Math.floor((paramObj._width - 20) / 178);
            _waseeVRObj.setCss(
              ".mobile .searchAbaotsce .searruselt .searitem{width:" +
                ((paramObj._width - 20) / e - 12) +
                "px}"
            );
          }
          let e = 0,
            a = this,
            t = [],
            o = "",
            s = [],
            i = "";
          for (const a in _panoGroupObj.panoOFFgroup)
            if (Object.hasOwnProperty.call(_panoGroupObj.panoOFFgroup, a)) {
              const o = _panoGroupObj.panoOFFgroup[a];
              if (
                (this.hotspots.push(o),
                e++,
                _waseeVRObj.isDesktop ||
                  $(".searchAbaotsce .searruselt").append(
                    '<div class="searitem" data-sid="' +
                      o.id +
                      '" data-type="scene"><img src="' +
                      _waseeVRObj.setOSSimg(
                        o.thumburl.indexOf("%$myserver%") > -1
                          ? paramObj.myserver +
                              o.thumburl.split("%$myserver%")[1]
                          : o.thumburl,
                        500
                      ) +
                      '"><span class="title p_xcenter nowrap" title="' +
                      o.name +
                      '">' +
                      o.name +
                      "</span></div>"
                  ),
                "object" == typeof o.hotspots)
              )
                for (const a in o.hotspots)
                  if (Object.hasOwnProperty.call(o.hotspots, a)) {
                    const n = o.hotspots[a];
                    if ("manyou" == n.type) continue;
                    if (
                      (e++,
                      s.push(n),
                      t[n.type] || t.push(n.type),
                      !_waseeVRObj.isDesktop)
                    ) {
                      let e = "";
                      if ("link_img" == n.type)
                        e =
                          '<img src="' +
                          _waseeVRObj.setOSSimg(n.url, 500) +
                          '">';
                      else if ("link_3D" == n.type && $.isJSONstr(n.content)) {
                        let a = JSON.parse(n.content).D3mobel.cover_url;
                        "" != a &&
                          (e =
                            '<img src="' +
                            _waseeVRObj.setOSSimg(a, 500) +
                            '">');
                      }
                      i +=
                        '<div class="searitem" data-sid="' +
                        n.sceneid +
                        '" data-sname="' +
                        n.name +
                        '" data-type="' +
                        n.type +
                        '">' +
                        e +
                        '<span class="title p_xcenter nowrap" title="' +
                        n.title +
                        '">' +
                        n.title +
                        "</span></div>";
                    }
                  }
            }
          if ((this.hotspots.push(...s), t.length > 0)) {
            for (const e in this.hotcatadata)
              Object.hasOwnProperty.call(this.hotcatadata, e) &&
                t.indexOf(e) > -1 &&
                (o +=
                  '<span class="citem" data-type="' +
                  e +
                  '">' +
                  this.hotcatadata[e] +
                  "</span>");
            $(".searchAbaotsce .searcate").append(o);
          } else $(".searchAbaotsce .searcate").empty();
          _waseeVRObj.isDesktop
            ? 0 == e
              ? $(".searchAbaotsce .searruselt").html(
                  '<span class="allcenter" style="font-size: 16px;">没有相关数据</span>'
                )
              : ((this.pagesize =
                  5 * Math.floor(($(".searchAbaotsce").height() - 212) / 184)),
                (this.pagecount = Math.ceil(e / this.pagesize)),
                this.laodpage(1))
            : $(".searchAbaotsce .searruselt").append(i),
            $(".searchAbaotsce")
              .on("focus", ".searinput", function () {
                $(".searchAbaotsce .search .sinput .ylruselt").removeClass(
                  "none"
                );
              })
              .on("blur", ".searinput", function () {
                $(".searchAbaotsce .search .sinput .ylruselt").addClass("none");
              })
              .on("keyup", ".searinput", function () {
                a.gosearch($(this).val()),
                  "" != $(this).val()
                    ? $(this).next().show()
                    : $(this).next().hide();
              })
              .on("click", ".sinput .icon_cha", function () {
                $(this).hide(), $(".searinput").val(""), a.gosearch();
              })
              .on("click", ".searbtn", function () {
                a.gosearch($(".searinput").val());
              })
              .on("click", ".searcate .citem", function () {
                $(this).addClass("on").siblings().removeClass("on"),
                  (a.searchCata =
                    "all" == $(this).attr("data-type")
                      ? null
                      : $(this).attr("data-type")),
                  a.gosearch($(".searinput").val());
              })
              .on("click", ".searruselt .searitem", function () {
                $(".searchAbaotscebg").click();
                let e = $(this).attr("data-type");
                if (
                  "scene" == e ||
                  ("scene" != e &&
                    $(this).attr("data-sid") != _waseeVRObj.sceneId)
                )
                  _waseeVRObj.toLoadscene({ id: $(this).attr("data-sid") }),
                    "scene" != e &&
                      (a.clickhotName = $(this).attr("data-sname"));
                else {
                  let e = $(this).attr("data-sname");
                  _krpano.call(
                    "looktohotspot(hot_" +
                      e +
                      ');delayedcall(1,js(_waseeVRObj.hotspotClick("' +
                      e +
                      '")))'
                  );
                }
              })
              .on("click", ".searpage span", function () {
                $(this).hasClass("sprev")
                  ? _waseeVRObj.searchAllObj.laodpage(a.pageindex - 1)
                  : $(this).hasClass("snext")
                  ? _waseeVRObj.searchAllObj.laodpage(a.pageindex + 1)
                  : _waseeVRObj.searchAllObj.laodpage(Number($(this).html()));
              });
        } else $(".searchAbaotscebg,.searchAbaotsce").addClass("on");
      },
      hotspots: [],
      hotcatadata: {
        scene: "场景",
        manyou: "漫游",
        link_imgbody: "音图文",
        link_img: "图片",
        link_video: "视频",
        link_sound: "音频",
        link_3D: "3D模型",
        link_html: "文本",
        link_article: "文章",
        tel: "电话",
        url: "超链接",
        navi: "导航",
        link_quanjing: "作品",
        link_H5: "H5作品",
        link_event: "事件",
        link_doc: "文档",
        link_selec: "聚合下拉",
        link_eject: "聚合弹出",
        empty: "无类型",
      },
      gosearch: function (e) {
        if (
          ((this.hotspotsearch = []),
          $(".searchAbaotsce .searruselt").empty(),
          $(".searchAbaotsce .search .sinput .ylruselt").empty(),
          (this.pageindex = 0),
          e || this.searchCata || !_waseeVRObj.isDesktop)
        ) {
          this.searkeydata = e;
          for (let a = 0; a < this.hotspots.length; a++) {
            const t = this.hotspots[a];
            let o = "";
            if (
              "scene" != this.searchCata &&
              ("link_html" == t.type || "link_imgbody" == t.type) &&
              t.content &&
              $.isJSONstr(t.content)
            )
              if (
                ((o = JSON.parse(t.content).tbody),
                o || (o = JSON.parse(t.content)),
                $.isJSONstr(o))
              ) {
                let e = "";
                JSON.parse(o).find(function (a) {
                  e += a.tbody;
                }),
                  (o = e);
              } else if ("object" == typeof o) {
                let e = "";
                o.find(function (a) {
                  e += a.tbody;
                }),
                  (o = e);
              }
            if (
              (("scene" == this.searchCata || !this.searchCata) &&
                t.id > 0 &&
                (!e || t.name.indexOf(e) > -1 || t.name.indexOf(e) > -1)) ||
              ((!this.searchCata || this.searchCata == t.type) &&
                (!e ||
                  (t.title && t.title.indexOf(e) > -1) ||
                  o.indexOf(e) > -1))
            )
              if (_waseeVRObj.isDesktop) this.hotspotsearch.push(t);
              else {
                let e = {},
                  a = t.id > 0 ? t.name : t.title,
                  o = "";
                if (
                  ("" != a && this.searkeydata
                    ? ((e[this.searkeydata] =
                        "<font>" + this.searkeydata + "</font>"),
                      (a = $.replaceAll({ strData: a, list: [e] })))
                    : "" == a && (a = "---"),
                  this.searkeydata &&
                    $(".searchAbaotsce .search .sinput .ylruselt .item")
                      .length < 5 &&
                    (t.id > 0
                      ? $(".searchAbaotsce .search .sinput .ylruselt").append(
                          '<span class="item" data-sid="' +
                            t.id +
                            '">' +
                            a +
                            '<i data-type="scene">' +
                            this.hotcatadata.scene +
                            "</i></span>"
                        )
                      : $(".searchAbaotsce .search .sinput .ylruselt").append(
                          '<span class="item" data-sid="2" data-sname="' +
                            t.name +
                            '">' +
                            a +
                            '<i data-type="' +
                            t.type +
                            '">' +
                            this.hotcatadata[t.type] +
                            "</i></span>"
                        )),
                  t.id > 0)
                )
                  $(".searchAbaotsce .searruselt").append(
                    '<div class="searitem" data-sid="' +
                      t.id +
                      '" data-type="scene"><img src="' +
                      _waseeVRObj.setOSSimg(
                        t.thumburl.indexOf("%$myserver%") > -1
                          ? paramObj.myserver +
                              t.thumburl.split("%$myserver%")[1]
                          : t.thumburl,
                        500
                      ) +
                      '"><span class="title p_xcenter nowrap" title="' +
                      t.name +
                      '">' +
                      a +
                      "</span></div>"
                  );
                else {
                  if ("link_img" == t.type)
                    o = '<img src="' + _waseeVRObj.setOSSimg(t.url, 500) + '">';
                  else if ("link_3D" == t.type && $.isJSONstr(t.content)) {
                    let e = JSON.parse(t.content).D3mobel.cover_url;
                    "" != e &&
                      (o = '<img src="' + _waseeVRObj.setOSSimg(e, 500) + '">');
                  }
                  $(".searchAbaotsce .searruselt").append(
                    '<div class="searitem" data-sid="' +
                      t.sceneid +
                      '" data-sname="' +
                      t.name +
                      '" data-type="' +
                      t.type +
                      '">' +
                      o +
                      '<span class="title p_xcenter nowrap" title="' +
                      t.title +
                      '">' +
                      a +
                      "</span></div>"
                  );
                }
              }
          }
        } else
          (this.searkeydata = null),
            $(".searchAbaotsce .search .sinput .ylruselt").empty();
        if (_waseeVRObj.isDesktop) {
          let a = e || this.searchCata ? this.hotspotsearch : this.hotspots;
          0 == a.length
            ? $(".searchAbaotsce .searruselt").html(
                '<span class="allcenter" style="font-size: 16px;">没有找到相关数据</span>'
              )
            : ((this.pagecount = Math.ceil(a.length / this.pagesize)),
              $(".searpage a").empty(),
              this.pagecount < 2 &&
                $(
                  ".searpage,.searpage .sprev,.searpage .snext,.searpage .last"
                ).addClass("none"),
              this.laodpage(1));
        } else
          0 == $(".searchAbaotsce .searruselt .searitem").length &&
            $(".searchAbaotsce .searruselt").html(
              '<span class="allcenter" style="font-size: 16px;">没有找到相关数据</span>'
            );
      },
      laodpage: function (e) {
        let a = this.pagecount;
        if (!(e == this.pageindex || e > a || e < 1) && e) {
          this.pageindex = e;
          var t = e - 3 >= 3 ? e - 3 : 2,
            o = 1,
            s = 0,
            i = this.pagesize,
            n = "",
            r = "",
            p =
              this.searkeydata || this.searchCata
                ? this.hotspotsearch
                : this.hotspots;
          if (a > 1) {
            if (
              ($(".searpage .last").html(a).removeClass("none"),
              $(".searpage,.searpage .sprev,.searpage .snext").removeClass(
                "none"
              ),
              e - 3 > 2
                ? $(".searpage .previ").removeClass("none")
                : $(".searpage .previ").addClass("none"),
              a >= 8 && e + 3 < a - 1
                ? $(".searpage .nexti").removeClass("none")
                : $(".searpage .nexti").addClass("none"),
              1 != e
                ? $(".searpage .sprev").removeClass("disabled2")
                : $(".searpage .sprev").addClass("disabled2"),
              e != a
                ? $(".searpage .snext").removeClass("disabled2")
                : $(".searpage .snext").addClass("disabled2"),
              e < 6
                ? (o = a > 6 ? 6 : a - 1)
                : (e > a - 5 && ((t = a - 5 - 2), t < 3 && (t = 3)),
                  (o = e + 3 < a - 1 ? e + 3 : a - 1)),
              a > 2)
            ) {
              let e = "";
              for (let a = t; a <= o; a++) e += "<span>" + a + "</span>";
              $(".searpage a").html(e);
            }
            s = (e - 1) * this.pagesize;
          }
          (i = p.length < s + this.pagesize ? p.length : s + this.pagesize),
            $(".searchAbaotsce .searpage span").removeClass("on"),
            $(".searchAbaotsce .searpage span:contains(" + e + ")").addClass(
              "on"
            );
          for (let e = s; e < i; e++) {
            const a = p[e];
            let t = {},
              o = a.id > 0 ? a.name : a.title,
              s = "";
            if (
              ("" != o && this.searkeydata
                ? ((t[this.searkeydata] =
                    "<font>" + this.searkeydata + "</font>"),
                  (o = $.replaceAll({ strData: o, list: [t] })))
                : "" == o && (o = "---"),
              this.searkeydata &&
                e < 5 &&
                (a.id > 0
                  ? (r +=
                      '<span class="item" data-sid="' +
                      a.id +
                      '">' +
                      o +
                      '<i data-type="scene">' +
                      this.hotcatadata.scene +
                      "</i></span>")
                  : (r +=
                      '<span class="item" data-sid="2" data-sname="' +
                      a.name +
                      '">' +
                      o +
                      '<i data-type="' +
                      a.type +
                      '">' +
                      this.hotcatadata[a.type] +
                      "</i></span>")),
              a.id > 0)
            )
              n +=
                '<div class="searitem" data-sid="' +
                a.id +
                '" data-type="scene"><img src="' +
                _waseeVRObj.setOSSimg(
                  a.thumburl.indexOf("%$myserver%") > -1
                    ? paramObj.myserver + a.thumburl.split("%$myserver%")[1]
                    : a.thumburl,
                  500
                ) +
                '"><span class="title p_xcenter nowrap" title="' +
                a.name +
                '">' +
                o +
                "</span></div>";
            else {
              if ("link_img" == a.type)
                s = '<img src="' + _waseeVRObj.setOSSimg(a.url, 500) + '">';
              else if ("link_3D" == a.type && $.isJSONstr(a.content)) {
                let e = JSON.parse(a.content).D3mobel.cover_url;
                "" != e &&
                  (s = '<img src="' + _waseeVRObj.setOSSimg(e, 500) + '">');
              }
              n +=
                '<div class="searitem" data-sid="' +
                a.sceneid +
                '" data-sname="' +
                a.name +
                '" data-type="' +
                a.type +
                '">' +
                s +
                '<span class="title p_xcenter nowrap" title="' +
                a.title +
                '">' +
                o +
                "</span></div>";
            }
          }
          this.searkeydata &&
            $(".searchAbaotsce .search .sinput .ylruselt").html(r),
            $(".searchAbaotsce .searruselt").html(n);
        }
      },
    },
    isbigpixelsmooth: !1,
    bigxixelsmooth: function (e) {
      "1" == e
        ? (this.isbigpixelsmooth = !0)
        : "0" == e &&
          ((this.isbigpixelsmooth = !1),
          $(".bigpixel").length > 0 && $(".bigpixel").remove(),
          (_waseeVRObj.bigpixelData = []));
    },
    setbigpixel_a_b: function (e) {
      _waseeVRObj.isbigpixelsmooth &&
        ("s" == e
          ? ($(".bigpixel").removeClass("on"),
            $(".bigpixel .btabel").addClass("none"),
            $(".bigpixel .stabel").removeClass("none"))
          : ($(".bigpixel").removeAttr("style"),
            $(".bigpixel .btabel").removeClass("none"),
            setTimeout(function () {
              $(".bigpixel .btabel span").addClass("showw");
            }, 100),
            $(".bigpixel .stabel").addClass("none"),
            $(".bigpixel").addClass("on")));
    },
    setBigpixel: function () {
      var e = "",
        a = "",
        t = "";
      for (var o in this.bigpixelData) {
        var s = this.bigpixelData[o];
        (e +=
          '<span tabindex="' +
          o +
          '" tname="' +
          s.name +
          '" ath="' +
          s.ath +
          '" atv="' +
          s.atv +
          '"><img src="' +
          s.a_style +
          '"></span>'),
          s.a_style;
      }
      "" != e &&
        ("1" == paramObj.bullet_screen_status && (t = " none"),
        (a =
          '<div class="bigpixel"><div class="closebigp"></div><div class="btabel flex' +
          t +
          '">' +
          e +
          '<span class="more"><a class="flex__center" href="https://mp.weixin.qq.com/mp/profile_ext?action=home&__biz=MzI3MTcwNjEyNg==&scene=126&bizpsid=0#wechat_redirect">' +
          _langObj.more +
          "</a></span></div></div>"));
      var i = function () {
        "" != a &&
          (_panoGroupObj.isShowpanogroup({ show: "reon" }),
          $("body").append(a),
          $(".bigpixel").on("click", ".closebigp", function () {
            _waseeVRObj.setbigpixel_a_b("s"),
              _panoGroupObj.isShowpanogroup({ show: "on" }),
              $(".bigpixeltipst").length > 0 && $(".bigpixeltipst").remove();
          }),
          setTimeout(function () {
            $(".bigpixel").addClass("on");
          }, 100),
          setTimeout(function () {
            $(".bigpixel .btabel").hasClass("none") ||
              $(".bigpixel .btabel span").addClass("showw");
          }, 600));
      };
      i();
    },
    _mrhotsnamelist: "",
    getDefaultHot_fei: function () {
      var e =
          location.protocol +
          "//" +
          location.host +
          "/p/" +
          paramObj._pool_ +
          "/Wasee/Cityhome/getHotspotDataForScene",
        a = { sceneid: _waseeVRObj.sceneId, obj_type: 136 };
      $.ajax({
        type: "GET",
        url: e,
        data: a,
        success: function (e) {
          if (1 == e.status) {
            for (var a in ((_waseeVRObj._mrhotsnamelist = ""), e.list)) {
              var t = e.list[a];
              if ("bigpixel" == t.htype) _waseeVRObj.bigpixelData.push(t);
              else {
                _waseeVRObj._mrhotsnamelist += "|" + t.name;
                var o = "";
                for (var s in t) o += "," + s + '="' + t[s] + '"';
                _krpano.call("set(lshotspot[" + t.name + "]" + o + ")");
              }
            }
            "" != _waseeVRObj._mrhotsnamelist && _krpano.call("loadHotspot()"),
              _waseeVRObj.bigpixelData.length > 0 &&
                _waseeVRObj.isbigpixelsmooth &&
                _waseeVRObj.setBigpixel();
          }
        },
      });
    },
    setOSSimg: function (e, a, t, o) {
      if (
        0 == e.indexOf("http://resource.v123.cn") ||
        0 == e.indexOf("https://resource.v123.cn") ||
        0 == e.indexOf("http://resource.720think.com") ||
        0 == e.indexOf("https://resource.720think.com") ||
        e.indexOf("video.720think.com") >= 0 ||
        e.indexOf("resourcenew.wasee.com") >= 0
      )
        switch (t) {
          case 1:
            e +=
              (e.indexOf("?") > 0 ? "&" : "?") +
              "x-oss-process=image/resize" +
              escape(",l_" + a);
            break;
          case "m_fill":
            e +=
              (e.indexOf("?") > 0 ? "&" : "?") +
              "x-oss-process=image/resize" +
              escape(",m_fill,h_" + o + ",w_" + a);
            break;
          default:
            e +=
              (e.indexOf("?") > 0 ? "&" : "?") +
              "x-oss-process=image/resize" +
              escape(
                ",m_fixed" + (a > 0 ? ",w_" + a : "" + o > 0 ? ",h_" + o : "")
              );
        }
      return e;
    },
    setChangeHttps: function (e) {
      return 0 == e.indexOf("http:") && (e = e.replace("http:", "https:")), e;
    },
    loadHotspot: function (e) {
      "string" == typeof e && (e = JSON.parse(e));
      var a = _waseeVRObj.sceneId,
        t = !1,
        o = null,
        s = {},
        i = "",
        n = "",
        r = !1,
        p = "",
        l = this;
      if (
        (e && e.sceneId > 0 && ((a = e.sceneId), (t = e.sceneId)),
        (o = _panoGroupObj.panoOFFgroup[a].hotspots),
        o.length > 0 || JSON.stringify(o).length > 10)
      ) {
        for (var d in o) {
          let e = o[d],
            a = "";
          if (
            "city" == e.pertain ||
            (1 == paramObj._isexport && "link_3D" == e.type)
          )
            continue;
          if (
            ("function" != typeof Object.assign &&
              (Object.assign = function (e) {
                "use strict";
                if (null == e)
                  throw new TypeError(
                    "Cannot convert undefined or null to object"
                  );
                e = Object(e);
                for (var a = 1; a < arguments.length; a++) {
                  var t = arguments[a];
                  if (null != t)
                    for (var o in t)
                      Object.prototype.hasOwnProperty.call(t, o) &&
                        (e[o] = t[o]);
                }
                return e;
              }),
            (i += "|" + e.name),
            (s[e.name] = Object.assign({}, e)),
            "area" == e.tip_type)
          ) {
            for (var _ in ((null == e.polydata ||
              JSON.stringify(e.polydata).length < 10) &&
              (e.polydata = {
                polybg: "#32caff",
                polyalpha: "0.2",
                polyord: "#ffffff",
                polyordw: "1",
                polybg2: "#32caff",
                polyalpha2: "0.5",
                polyord2: "#ffffff",
                polyordw2: "1",
              }),
            e.polydata.polyalpha ||
              ((e.polydata.polyalpha = "0.2"), (e.polydata.polyalpha2 = "0.5")),
            e.polydata)) {
              let t =
                -1 == e.polydata[_].toString().indexOf("#")
                  ? e.polydata[_]
                  : "0x" + e.polydata[_].substr(1);
              a += "," + _ + '="' + t + '"';
            }
            let t,
              o,
              s = e.ath.toString().split(","),
              i = -1,
              n = e.atv.toString().split(",");
            for (let a = 0; a < n.length; a++) {
              let r = Number(n[a]),
                p = Number(s[a]);
              "t" == e.position && (-1 == i || r < o)
                ? ((o = r), (i = a), (t = p))
                : "m" == e.position && (-1 == i || r > o)
                ? ((o = r), (i = a), (t = p))
                : "l" == e.position && (-1 == i || p < t)
                ? ((t = p), (i = a), (o = r))
                : "r" == e.position && (-1 == i || p > t)
                ? ((t = p), (i = a), (o = r))
                : "c" == e.position &&
                  (-1 == i
                    ? ((t = p), (o = r), (i = a))
                    : ((t += p), (o += r)));
            }
            "t" == e.position
              ? (o = Number(o) - 3)
              : "m" == e.position
              ? (o = Number(o) + 3)
              : "l" == e.position
              ? (t = Number(t) - 3)
              : "r" == e.position
              ? (t = Number(t) + 3)
              : "c" == e.position &&
                ((t = Number(t) / n.length), (o = Number(o) / n.length)),
              (a += ',ath2="' + t + '",atv2=' + o);
          } else e.icon = this.setOSSimg(this.getNewHoticon(e.icon), 400);
          let t = "true",
            r = 12,
            h = "true",
            g = 1,
            v = "",
            w = e.title,
            j = e.icon;
          if (
            (this.is_switch_nav > 0 &&
              "object" == typeof _panonavObj &&
              _panonavObj.isStartNav() &&
              (h = "false"),
            "manyou" == e.type &&
              ("nav" == e.pertain || "attract" == e.pertain))
          ) {
            if (0 == this.is_switch_nav || !_panonavObj.isStartNav()) continue;
            "nav" == e.pertain
              ? ((j =
                  "%$mypath%img/hot/nav_" +
                  e.iconFangx +
                  ("red" == __WASEE_DATA__.product.panoinfo.nav.nav_skin
                    ? "_red"
                    : "") +
                  ".png"),
                (w =
                  "前行" +
                  e.distance +
                  "米" +
                  ("l" == e.iconFangx
                    ? "后左转"
                    : "r" == e.iconFangx
                    ? "后右转"
                    : "")),
                (h = "false"))
              : ((p += "|hot_" + e.name),
                (j = "%$mypath%img/iocton/0.gif"),
                (h = "true")),
              (v += ',pertain="' + e.pertain + '"');
          }
          for (var _ in e)
            if ("content" == _) {
              if ($.isJSONstr(e[_])) {
                let o = JSON.parse(e[_]);
                if (
                  (o.closetitle && 1 == o.closetitle && (t = "false"),
                  o.titlesize && o.titlesize > 0 && (r = o.titlesize),
                  "gxh" == e.tip_type && "object" == typeof o.indivstyle)
                )
                  for (var c in o.indivstyle)
                    Object.hasOwnProperty.call(o.indivstyle, c) &&
                      (a += "," + c + '="' + o.indivstyle[c] + '"');
                if (
                  (o.zorder && (g = o.zorder),
                  o.animaobj && (h = "false"),
                  "" != o.hotcate && (v += ',hotcate="' + o.hotcate + '"'),
                  ("link_selec" == e.type || "link_eject" == e.type) &&
                    o.subhotlist &&
                    o.subhotlist.length > 0)
                ) {
                  let a = "";
                  for (let t = 0; t < o.subhotlist.length; t++) {
                    const s = o.subhotlist[t];
                    var u = $.html2Escape(s.title),
                      m = s.icon;
                    m.indexOf("%$mypath%") >= 0 &&
                      (m = l.getNewHoticon(
                        m.replace(
                          "%$mypath%",
                          paramObj.resourceWasee + "/home/vrpano/"
                        )
                      )),
                      (a +=
                        '<a class="item" style="background-image: url(' +
                        m +
                        ');" onclick="_waseeVRObj.hotspotClick(\'' +
                        e.name +
                        "','subhot','" +
                        s.name +
                        "')\">" +
                        u +
                        "</a>");
                  }
                  (a =
                    '<div class="selecttBody p-re" id="' +
                    e.name +
                    '"> <div class="selecain flex_center_x flex_column"> <div class="hoticon p-re"' +
                    (this.isAndroid
                      ? ""
                      : " onclick=\"_waseeVRObj.hotspotClick('" +
                        e.name +
                        "')\"") +
                    ">" +
                    ("false" == t || "" == e.title
                      ? ""
                      : '<span class="hottitle p-ab t">' +
                        e.title +
                        "</span>") +
                    '</div> <div class="sublist tipsafter">' +
                    a +
                    "</div> </div> </div>"),
                    (v += ",html='" + a + "'");
                }
              }
            } else
              "title" != _ && "icon" != _ && (a += "," + _ + '="' + e[_] + '"');
          if (
            ("" != w && (w = w.split("\n").join("<br>")),
            (a +=
              ',title="' +
              w +
              '",icon="' +
              j +
              '",titlevisible="' +
              t +
              '",titlesize="' +
              r +
              '",visible="' +
              h +
              '",zorder="' +
              g +
              '"' +
              v),
            "manyou" == e.type || "navmanyou" == e.type)
          ) {
            if (1 == e.subs && e.targetScene == this.sceneId) continue;
            var b = "BLEND(1.0, easeInCubic)";
            let t = "",
              o = "",
              s = "";
            if (1 == e.subs) o = "js(_waseeVRObj.setPrevpano());";
            else {
              switch (e.blendmodes) {
                case "blend_a":
                  b = "NOBLEND";
                  break;
                case "blend_b":
                  b = "BLEND(1.0, easeInCubic)";
                  break;
                case "blend_c":
                  b = "ZOOMBLEND(1.0, 2.0, easeInOutSine)";
                  break;
                case "blend_d":
                  b = "OPENBLEND(1.0, 0.0, 0.2, 0.0, linear)";
                  break;
                case "blend_e":
                  b = "COLORBLEND(1.0, 0x000000, easeOutSine)";
                  break;
                case "blend_f":
                  b = "COLORBLEND(1.0, 0xFFFFFF, easeOutSine)";
                  break;
                case "blend_g":
                  b = "LIGHTBLEND(1.0, 0xFFFFFF, 2.0, linear)";
                  break;
                case "blend_h":
                  b = "SLIDEBLEND(1.0, 180.0, 0.2, linear)";
                  break;
                case "blend_i":
                  b = "SLIDEBLEND(1.0, 90.0, 0.2, linear)";
                  break;
                case "blend_j":
                  b = "SLIDEBLEND(1.0, 0.0, 0.2, linear)";
                  break;
                case "blend_k":
                  b = "SLIDEBLEND(1.0, -90.0, 0.2, linear)";
                  break;
                case "blend_l":
                  b = "OPENBLEND(1.0, -1.0, 0.3, 0.0, linear)";
                  break;
                case "blend_m":
                  b = "OPENBLEND(1, 1.0, 0.3, 0.0, linear)";
                  break;
                case "blend_n":
                  b = "SLIDEBLEND(1.0, 135.0, 0.4, linear)";
                  break;
                case "blend_o":
                  b = "SLIDEBLEND(1.0, 35.0, 0.4, linear)";
                  break;
                case "blend_p":
                  b = "SLIDEBLEND(1.0, 215.0, 0.4, linear)";
                  break;
                case "blend_q":
                  b = "SLIDEBLEND(1.0, -35.0, 0.4, linear)";
              }
              e.hmat_lc &&
                e.vmat_lc &&
                e.fmat_lc &&
                "" != e.hmat_lc &&
                "" != e.vmat_lc &&
                "" != e.fmat_lc &&
                (t +=
                  "lookto(" +
                  e.hmat_lc +
                  "," +
                  e.vmat_lc +
                  "," +
                  e.fmat_lc +
                  ",tween(linear,1));");
            }
            "attract" == e.pertain && (s += "js(_panonavObj.setAttraction());"),
              (t +=
                o +
                "removelivepanohot();" +
                s +
                "loadscene(scene" +
                e.targetScene +
                ",null, " +
                (_panoGroupObj.panoOFFgroup[e.targetScene] &&
                _panoGroupObj.panoOFFgroup[_waseeVRObj.sceneId].media_type ==
                  _panoGroupObj.panoOFFgroup[e.targetScene].media_type
                  ? "MERGE"
                  : "KEEPSCENES") +
                ", " +
                b +
                ");"),
              e.hmat &&
                e.vmat &&
                e.fmat &&
                "" != e.hmat &&
                "" != e.vmat &&
                "" != e.fmat &&
                (t +=
                  "set(view,vlookat=" +
                  e.vmat +
                  ",hlookat=" +
                  e.hmat +
                  ",fov=" +
                  e.fmat +
                  ");"),
              e.hmat_zd &&
                e.vmat_zd &&
                e.fmat_zd &&
                "" != e.hmat_zd &&
                "" != e.vmat_zd &&
                "" != e.fmat_zd &&
                (t +=
                  "delayedcall(1,lookto(" +
                  e.hmat_zd +
                  "," +
                  e.vmat_zd +
                  "," +
                  e.fmat_zd +
                  ",tween(linear,1)));"),
              (a += ',onclick="' + t + '"');
          } else
            (a += ',onclick="hotspotClick(' + e.name + ')"'),
              "link_selec" == e.type || e.type;
          e.hotZoom || (a += ',hotZoom="1"'),
            (n += "set(lshotspot[" + e.name + "]" + a + ");");
        }
        "" != i
          ? ((_panoGroupObj.panoOFFgroup[a].hotspots = s),
            (n += "loadHotspot();addlivepanoHotspot(" + t + ");"))
          : (n += "addlivepanoHotspot();");
      } else n += "addlivepanoHotspot();";
      (!e || !e.sceneId) &&
        _panoGroupObj.panoOFFgroup[this.sceneId].pid &&
        _panoGroupObj.panoOFFgroup[this.sceneId].pid > 0 &&
        0 == _panoGroupObj.panoOFFgroup[this.sceneId].child_type &&
        (r = _panoGroupObj.panoOFFgroup[this.sceneId].pid),
        r &&
          ("" == n
            ? this.loadHotspot({ sceneId: r })
            : (n += 'js(_waseeVRObj.loadHotspot({"sceneId":"' + r + '"}));')),
        this.searchAllObj.clickhotName &&
          ((n +=
            "looktohotspot(hot_" +
            this.searchAllObj.clickhotName +
            ');delayedcall(1,js(_waseeVRObj.hotspotClick("' +
            this.searchAllObj.clickhotName +
            '")));'),
          delete this.searchAllObj.clickhotName),
        "" != n &&
          ("" != p && (n += 'set(attractlisthot,"' + p + '");'),
          _krpano.call(n),
          "" != i && this.deletePanoelem("other", "lshotspot", i));
    },
    loadHotspot_vr: function (e) {
      "string" == typeof e && (e = JSON.parse(e));
      var a = _waseeVRObj.sceneId,
        t = null,
        o = {},
        s = "",
        i = "",
        n = "",
        r = !1;
      if (
        (e && e.sceneId > 0 && ((a = e.sceneId), e.sceneId),
        (t = _panoGroupObj.panoOFFgroup[a].hotspots),
        t.length > 0 || JSON.stringify(t).length > 10)
      ) {
        for (var p in t) {
          let e = t[p],
            a = "";
          if ("manyou" != e.type || "city" == e.pertain) continue;
          if (
            ((i += "|" + e.name),
            (s += "|vr_hot_" + e.name),
            (o[e.name] = Object.assign({}, e)),
            "area" == e.tip_type)
          ) {
            for (var l in ((null == e.polydata ||
              JSON.stringify(e.polydata).length < 10) &&
              (e.polydata = {
                polybg: "#32caff",
                polyalpha: "0.2",
                polyord: "#ffffff",
                polyordw: "1",
                polybg2: "#32caff",
                polyalpha2: "0.5",
                polyord2: "#ffffff",
                polyordw2: "1",
              }),
            e.polydata.polyalpha ||
              ((e.polydata.polyalpha = "0.2"), (e.polydata.polyalpha2 = "0.5")),
            e.polydata)) {
              let t =
                -1 == e.polydata[l].toString().indexOf("#")
                  ? e.polydata[l]
                  : "0x" + e.polydata[l].substr(1);
              a += "," + l + '="' + t + '"';
            }
            let t,
              o,
              s = e.ath.toString().split(","),
              i = -1,
              n = e.atv.toString().split(",");
            for (let a = 0; a < n.length; a++) {
              let r = Number(n[a]),
                p = Number(s[a]);
              "t" == e.position && (-1 == i || r < o)
                ? ((o = r), (i = a), (t = p))
                : "m" == e.position && (-1 == i || r > o)
                ? ((o = r), (i = a), (t = p))
                : "l" == e.position && (-1 == i || p < t)
                ? ((t = p), (i = a), (o = r))
                : "r" == e.position &&
                  (-1 == i || p > t) &&
                  ((t = p), (i = a), (o = r));
            }
            "t" == e.position
              ? (o = Number(o) - 3)
              : "m" == e.position
              ? (o = Number(o) + 3)
              : "l" == e.position
              ? (t = Number(t) - 3)
              : "r" == e.position && (t = Number(t) + 3),
              (a += ',ath2="' + t + '",atv2=' + o);
          } else
            "gxh" == e.tip_type &&
              ((e.tip_type = "icon"),
              (e.icon = "%$mypath%img/iocton/1000.gif?20210225001")),
              (e.icon = this.setOSSimg(this.getNewHoticon(e.icon), 400));
          let r = "true",
            c = 12,
            u = "true",
            m = 1;
          if (
            "manyou" != e.type ||
            ("nav" != e.pertain && "attract" != e.pertain)
          ) {
            for (var l in e)
              if ("content" == l) {
                if ($.isJSONstr(e[l])) {
                  let t = JSON.parse(e[l]);
                  if (
                    (t.closetitle && 1 == t.closetitle
                      ? (r = "false")
                      : (s += "|vr_hot_" + e.name + "_tip"),
                    t.titlesize && t.titlesize > 0 && (c = t.titlesize),
                    "gxh" == e.tip_type && "object" == typeof t.indivstyle)
                  )
                    for (var d in t.indivstyle)
                      Object.hasOwnProperty.call(t.indivstyle, d) &&
                        (a += "," + d + '="' + t.indivstyle[d] + '"');
                  t.zorder && (m = t.zorder), t.animaobj && (u = "false");
                }
              } else
                "title" == l && "" != e[l]
                  ? (a += "," + l + '="' + e[l].split("\n").join("<br>") + '"')
                  : (a += "," + l + '="' + e[l] + '"');
            if (
              ((a +=
                ',titlevisible="' +
                r +
                '",titlesize="' +
                c +
                '",visible="' +
                u +
                '",zorder="' +
                m +
                '"'),
              "manyou" == e.type)
            ) {
              if (1 == e.subs && e.targetScene == this.sceneId) continue;
              var _ = "BLEND(1.0, easeInCubic)";
              let t = "",
                o = "";
              if (1 == e.subs) o = "js(_waseeVRObj.setPrevpano());";
              else {
                switch (e.blendmodes) {
                  case "blend_a":
                    _ = "NOBLEND";
                    break;
                  case "blend_b":
                    _ = "BLEND(1.0, easeInCubic)";
                    break;
                  case "blend_c":
                    _ = "ZOOMBLEND(1.0, 2.0, easeInOutSine)";
                    break;
                  case "blend_d":
                    _ = "OPENBLEND(1.0, 0.0, 0.2, 0.0, linear)";
                    break;
                  case "blend_e":
                    _ = "COLORBLEND(1.0, 0x000000, easeOutSine)";
                    break;
                  case "blend_f":
                    _ = "COLORBLEND(1.0, 0xFFFFFF, easeOutSine)";
                    break;
                  case "blend_g":
                    _ = "LIGHTBLEND(1.0, 0xFFFFFF, 2.0, linear)";
                    break;
                  case "blend_h":
                    _ = "SLIDEBLEND(1.0, 180.0, 0.2, linear)";
                    break;
                  case "blend_i":
                    _ = "SLIDEBLEND(1.0, 90.0, 0.2, linear)";
                    break;
                  case "blend_j":
                    _ = "SLIDEBLEND(1.0, 0.0, 0.2, linear)";
                    break;
                  case "blend_k":
                    _ = "SLIDEBLEND(1.0, -90.0, 0.2, linear)";
                    break;
                  case "blend_l":
                    _ = "OPENBLEND(1.0, -1.0, 0.3, 0.0, linear)";
                    break;
                  case "blend_m":
                    _ = "OPENBLEND(1, 1.0, 0.3, 0.0, linear)";
                    break;
                  case "blend_n":
                    _ = "SLIDEBLEND(1.0, 135.0, 0.4, linear)";
                    break;
                  case "blend_o":
                    _ = "SLIDEBLEND(1.0, 35.0, 0.4, linear)";
                    break;
                  case "blend_p":
                    _ = "SLIDEBLEND(1.0, 215.0, 0.4, linear)";
                    break;
                  case "blend_q":
                    _ = "SLIDEBLEND(1.0, -35.0, 0.4, linear)";
                }
                e.hmat_lc &&
                  e.vmat_lc &&
                  e.fmat_lc &&
                  "" != e.hmat_lc &&
                  "" != e.vmat_lc &&
                  "" != e.fmat_lc &&
                  (t +=
                    "lookto(" +
                    e.hmat_lc +
                    "," +
                    e.vmat_lc +
                    "," +
                    e.fmat_lc +
                    ",tween(linear,1));");
              }
              this.navigator.indexOf("firefox") > 0 &&
              this.navigator.indexOf("mobile vr") > 0
                ? (t +=
                    o +
                    "removelivepanohot();js(_waseeVRObj.toLoadscenetovr(scene" +
                    e.targetScene +
                    "));")
                : (t +=
                    o +
                    "removelivepanohot();loadscene(scene" +
                    e.targetScene +
                    ",null, " +
                    (_panoGroupObj.panoOFFgroup[e.targetScene] &&
                    _panoGroupObj.panoOFFgroup[_waseeVRObj.sceneId]
                      .media_type ==
                      _panoGroupObj.panoOFFgroup[e.targetScene].media_type
                      ? "MERGE"
                      : "KEEPSCENES") +
                    ", " +
                    _ +
                    ");"),
                e.hmat &&
                  e.vmat &&
                  e.fmat &&
                  "" != e.hmat &&
                  "" != e.vmat &&
                  "" != e.fmat &&
                  (t +=
                    "set(view,vlookat=" +
                    e.vmat +
                    ",hlookat=" +
                    e.hmat +
                    ",fov=" +
                    e.fmat +
                    ");"),
                e.hmat_zd &&
                  e.vmat_zd &&
                  e.fmat_zd &&
                  "" != e.hmat_zd &&
                  "" != e.vmat_zd &&
                  "" != e.fmat_zd &&
                  (t +=
                    "delayedcall(1,lookto(" +
                    e.hmat_zd +
                    "," +
                    e.vmat_zd +
                    "," +
                    e.fmat_zd +
                    ",tween(linear,1)));"),
                (a += ',onclick="' + t + '"');
            } else a += ',onclick="hotspotClick(' + e.name + ')"';
            e.hotZoom || (a += ',hotZoom="1"'),
              (n += "set(lshotspot[" + e.name + "]" + a + ");");
          }
        }
        (this._mrhotsnamelist = s), "" != s && (n += "loadHotspot_vr();");
      }
      (!e || !e.sceneId) &&
        _panoGroupObj.panoOFFgroup[this.sceneId].pid &&
        _panoGroupObj.panoOFFgroup[this.sceneId].pid > 0 &&
        0 == _panoGroupObj.panoOFFgroup[this.sceneId].child_type &&
        (r = _panoGroupObj.panoOFFgroup[this.sceneId].pid),
        r &&
          ("" == n
            ? this.loadHotspot({ sceneId: r })
            : (n += 'js(_waseeVRObj.loadHotspot({"sceneId":"' + r + '"}));')),
        "" != n &&
          (_krpano.call(n),
          "" != i && this.deletePanoelem("other", "lshotspot", i));
    },
    loademebed: function () {
      let e = _panoGroupObj.panoOFFgroup[_waseeVRObj.sceneId].embeds,
        a = "",
        t = {};
      if (e.length > 0) {
        for (var o in e)
          if (e.hasOwnProperty.call(e, o)) {
            const s = e[o],
              i = JSON.parse(s.tbody);
            if (((s.tbody = i), (t[s.name] = s), 1 == s.type)) {
              if ("object" == typeof i.imglist) {
                i.showindeximg = 0;
                for (let e = 0; e < i.imglist.length; e++) {
                  const t = i.imglist[e];
                  a +=
                    "set(config.panos.pano[" +
                    _waseeVRObj.sceneName +
                    "].embeds.embed[" +
                    s.name +
                    "],chtype=" +
                    i.chtype +
                    ",time=" +
                    i.time +
                    ',url="' +
                    this.setOSSimg(t.url, 2e3, 1) +
                    '");';
                  break;
                }
              }
              0 == s.tbody.lockheiwid &&
                (a +=
                  "set(config.panos.pano[" +
                  _waseeVRObj.sceneName +
                  "].embeds.embed[" +
                  s.name +
                  "],lockheiwid=0,scale=1,width=" +
                  s.tbody.width +
                  ",height=" +
                  s.tbody.height +
                  ");");
            } else
              3 == s.type &&
                (i.master && i.master > 0
                  ? (i.url =
                      paramObj.resourceWasee +
                      "/home/vrpano/img/hot/master/" +
                      i.master +
                      ".png")
                  : i.bztype &&
                    i.bztype.length > 3 &&
                    (i.url =
                      paramObj.resourceWasee +
                      "/home/vrpano/img/" +
                      i.bztype +
                      ".png"),
                i.url &&
                  (a +=
                    "set(config.panos.pano[" +
                    _waseeVRObj.sceneName +
                    "].embeds.embed[" +
                    s.name +
                    "].url," +
                    i.url +
                    ");"));
            2 == s.tbody.showtype &&
              (a +=
                "set(config.panos.pano[" +
                _waseeVRObj.sceneName +
                "].embeds.embed[" +
                s.name +
                '].distorted,"false");');
            let n = "";
            (1 != s.type && 2 != s.type) ||
              ("string" == typeof s.tbody.clearcolor &&
                7 == s.tbody.clearcolor.length &&
                s.tbody.threshold >= 0 &&
                s.tbody.smoothing >= 0 &&
                (n =
                  "0x" +
                  s.tbody.clearcolor.substring(1) +
                  "|" +
                  s.tbody.threshold +
                  "|" +
                  s.tbody.smoothing),
              (a +=
                "set(config.panos.pano[" +
                _waseeVRObj.sceneName +
                "].embeds.embed[" +
                s.name +
                "],distorted=" +
                (2 == s.tbody.showtype ? "false" : "true") +
                ",chromakey=" +
                n +
                ");"));
          }
        (_panoGroupObj.panoOFFgroup[_waseeVRObj.sceneId].embeds = t),
          "" != a && _krpano.call(a);
      }
    },
    autochangeememimg: function (e) {
      let a = _panoGroupObj.panoOFFgroup[_waseeVRObj.sceneId].embeds[e].tbody;
      1 == a.chtype &&
        setTimeout(function () {
          a.showindeximg++,
            a.showindeximg >= a.imglist.length && (a.showindeximg = 0),
            _krpano.set(
              "hotspot[" + e + "].url",
              _waseeVRObj.setOSSimg(a.imglist[a.showindeximg].url, 2e3, 1)
            );
        }, 1e3 * a.time);
    },
    clickemebed: function (e) {
      function a() {
        o.tbody &&
          o.tbody.clickitem &&
          t.hotspotClick(
            e,
            null,
            $.extend(o.tbody.clickitem, { type: o.tbody.clickitem.clicktype })
          );
      }
      let t = this;
      this.lSNOCLS = !0;
      let o = _panoGroupObj.panoOFFgroup[_waseeVRObj.sceneId].embeds[e];
      1 == o.type && 2 == o.tbody.chtype
        ? (o.tbody.showindeximg++,
          o.tbody.showindeximg >= o.tbody.imglist.length &&
            (o.tbody.showindeximg = 0),
          _krpano.set(
            "hotspot[" + e + "].url",
            t.setOSSimg(o.tbody.imglist[o.tbody.showindeximg].url, 2e3, 1)
          ))
        : a();
    },
    getNewHoticon: function (e) {
      let a = "20210207001",
        t = "20220920";
      return "string" == typeof e
        ? (e.indexOf("/hot/") > 0
            ? (e = e.split(".png")[0] + ".png?" + a)
            : e.indexOf("/iocton/") > 0 &&
              (e = e.split(".gif")[0] + ".gif?" + t),
          e)
        : "";
    },
    getloadlmhotData: function () {
      let e = this;
      if (!e.mhotData && _panoGroupObj.panogroupData.length > 0)
        if (
          ((e.mhotData = { scenehotspot_list: {}, scenehotspotids_list: {} }),
          "object" == typeof __WASEE_DATA__.product.openmap)
        ) {
          if (
            ((e.mhotData.group_data = __WASEE_DATA__.product.openmap.groups),
            (e.mhotData.scene_data = __WASEE_DATA__.product.openmap.scenelist),
            __WASEE_DATA__.product.openmap.customs)
          ) {
            let t = __WASEE_DATA__.product.openmap.customs;
            for (var a in t)
              if (t.hasOwnProperty.call(t, a)) {
                let o = t[a];
                "object" ==
                  typeof _panoGroupObj.panogroupIdlist[o.obj_id + "_g"] &&
                  ((o.gid = o.obj_id), e.mhotData.scene_data.push(o));
              }
          }
          if (e.mhotData.scene_data) {
            e.mhotData.hotspot_list || (e.mhotData.hotspot_list = {});
            for (let a = 0; a < e.mhotData.scene_data.length; a++) {
              const t = e.mhotData.scene_data[a];
              22013 != t.obj_type
                ? ((t.target_scene = t.obj_id),
                  e.is_scenic > 0 &&
                    ((e.mhotData.scenehotspotids_list[t.id] = t),
                    (t.cover_url =
                      _panoGroupObj.panoOFFgroup[t.obj_id].thumburl),
                    (e.mhotData.scenehotspot_list[t.target_scene] = t)))
                : e.is_scenic > 0 &&
                  ((e.mhotData.scenehotspotids_list[t.id] = t),
                  (e.mhotData.scenehotspot_list["22013_" + t.id] = t));
            }
          }
        } else
          paramObj._isWaseehost &&
            ($.ajax({
              type: "GET",
              url:
                location.protocol +
                "//" +
                location.host +
                "/p/" +
                paramObj._pool_ +
                "/Wasee/VRHome/getGroupHotspotList",
              data: { krpano_id: paramObj.krpano.krpano_id },
              success: function (a) {
                void 0 === e.mhotData && (e.mhotData = {}),
                  1 == a.status && (e.mhotData.group_data = a.data);
              },
            }),
            $.ajax({
              type: "GET",
              url:
                location.protocol +
                "//" +
                location.host +
                "/p/" +
                paramObj._pool_ +
                "/Wasee/VRHome/getSceneHotspotList",
              data: { krpano_id: paramObj.krpano.krpano_id },
              success: function (a) {
                void 0 === e.mhotData && (e.mhotData = {}),
                  1 == a.status && (e.mhotData.scene_data = a.data);
              },
            }));
    },
    loadlmhot: function (e) {
      function a() {
        if (o.mhotData.isload_group_data) _krpano.call("lmhot()");
        else {
          o.mhotData.isload_group_data = !0;
          let a = "";
          for (var e in o.mhotData.group_data)
            if (o.mhotData.group_data.hasOwnProperty(e)) {
              const t = o.mhotData.group_data[e],
                s =
                  t.icon.length > 10
                    ? t.icon
                    : "%$exportpath%img/hot_icon1.png",
                i = t.icon_zoom ? 100 * t.icon_zoom : 24;
              let n = t.title;
              if (o.is_scenic > 0) {
                let a = o.mhotData.group_data[e].hotcount;
                if (null == a) {
                  a = 0;
                  for (
                    let e = 0;
                    e < _waseeVRObj.mhotData.scene_data.length;
                    e++
                  ) {
                    const o = _waseeVRObj.mhotData.scene_data[e];
                    t.obj_id == o.gid && a++;
                  }
                }
                a > 0 &&
                  ((o.mhotData.group_data[e].hotcount = a),
                  (n += "(" + a + ")"));
              }
              a +=
                "set(config.maps.mapspots.hotspot[gm" +
                t.obj_id +
                '],title="' +
                n +
                '",ath="' +
                t.ath +
                '",atv="' +
                t.atv +
                '",icon="' +
                s +
                '",width="' +
                i +
                '",idd="' +
                t.obj_id +
                '");';
            }
          "" != a && _krpano.call(a + "lmhot();set(switch_hotmap,1);");
        }
      }
      function t() {
        if (!o.mhotData.isload_scene_data) {
          o.mhotData.isload_scene_data = !0;
          let a = "";
          for (var e in o.mhotData.scene_data)
            if (o.mhotData.scene_data.hasOwnProperty(e)) {
              const t = o.mhotData.scene_data[e],
                s =
                  t.icon.length > 10
                    ? t.icon
                    : "%$exportpath%img/hot_icon2.png",
                i = t.map_sand
                  ? "jscall(_waseeVRObj.map_sand=" + t.map_sand + ");"
                  : "",
                n =
                  t.url.length > 0
                    ? "js(_waseeVRObj.showInfo(" + t.url + "))"
                    : i +
                      "loadscene(scene" +
                      t.obj_id +
                      ",, " +
                      (_panoGroupObj.panoOFFgroup[t.obj_id] &&
                      _panoGroupObj.panoOFFgroup[_waseeVRObj.sceneId]
                        .media_type ==
                        _panoGroupObj.panoOFFgroup[t.obj_id].media_type
                        ? "MERGE"
                        : "KEEPSCENES") +
                      ", ZOOMBLEND(1.0, 2.0, easeInOutSine))",
                r = t.icon_zoom ? 100 * t.icon_zoom : 32;
              a +=
                "set(config.maps.hotspots.hotspot[m" +
                t.id +
                '],title="' +
                t.title +
                '",ath="' +
                t.ath +
                '",atv="' +
                t.atv +
                '",parentId="gm' +
                t.gid +
                '",onclick="' +
                n +
                '",icon="' +
                s +
                '",width="' +
                r +
                '");';
            }
          "" != a && _krpano.call(a);
        }
        1 != __WASEE_DATA__.product.switch.overallNav.switch_hotmap &&
          _krpano.call("lmhot_sub()");
      }
      let o = this;
      if ("object" == typeof o.mhotData)
        return o.is_scenic > 0
          ? (_krpano.set("is_scenic", 1),
            void ("object" == typeof _scenicObj
              ? ("22001_0" != _scenicObj.scenicData.scenic_default_show &&
                  "0" != _scenicObj.scenicData.scenic_default_show &&
                  "3" != e) ||
                (1 == __WASEE_DATA__.product.switch.overallNav.switch_hotmap
                  ? "object" == typeof o.mhotData.group_data &&
                    (o.mhotData.group_data.length > 0
                      ? (a(), _scenicObj.loadlmhot(null, 1))
                      : (_scenicObj.loadlmhot(),
                        (__WASEE_DATA__.product.switch.overallNav.switch_hotmap = 0)))
                  : _scenicObj.loadlmhot())
              : setTimeout("_waseeVRObj.loadlmhot()", 1e3)))
          : (1 == __WASEE_DATA__.product.switch.overallNav.switch_hotmap &&
              ("object" == typeof o.mhotData.group_data
                ? o.mhotData.group_data.length > 0
                  ? a()
                  : (__WASEE_DATA__.product.switch.overallNav.switch_hotmap = 0)
                : (this.mapinter_group = setInterval(function () {
                    "object" == typeof o.mhotData.group_data &&
                      (clearInterval(_waseeVRObj.mapinter_group),
                      delete _waseeVRObj.mapinter_group,
                      a());
                  }, 1e3))),
            void ("object" == typeof o.mhotData.scene_data
              ? t()
              : (this.mapinter_scenic = setInterval(function () {
                  "object" == typeof o.mhotData.scene_data &&
                    (clearInterval(_waseeVRObj.mapinter_scenic),
                    delete _waseeVRObj.mapinter_scenic,
                    t());
                }, 1e3))));
      setTimeout("_waseeVRObj.loadlmhot()", 1e3);
    },
    getHotspotDataForScene: function (e) {
      var a =
          location.protocol +
          "//" +
          location.host +
          "/p/" +
          paramObj._pool_ +
          "/Wasee/Cityhome/getHotspotDataForScene",
        t = $.extend({ sceneid: _waseeVRObj.sceneId }, e.data);
      e.turl && (a = e.turl),
        "0" == t.category_id && delete t.category_id,
        (_waseeVRObj.inforCommentHotIdlist = []),
        (_waseeVRObj.inforCommentHotlistData = []),
        t.callBack && delete t.callBack,
        $.ajax({
          type: "GET",
          url: a,
          data: t,
          success: function (a) {
            _waseeVRObj.isAjaxCount++,
              e.callBack(a),
              1 == a.status &&
                ((_waseeVRObj.pageHotlistData.totalPage = a.totalPage),
                (_waseeVRObj.pageHotlistData.pageIndex = t.pageIndex + 1),
                (_waseeVRObj.pageHotlistData.objData = t),
                (_waseeVRObj.pageHotlistData.objData.callBack = e.callBack));
          },
        });
    },
    setfullScreen: function () {
      _waseeVRObj.isfullScreen
        ? ($.exitScreen(), (_waseeVRObj.isfullScreen = !1))
        : ($.fullScreen(), (_waseeVRObj.isfullScreen = !0));
    },
    isgetmapscenelist: !1,
    getScenicDataVoiceurl: {},
    getmapscenelist: function (e) {
      function a(e) {
        var a = _waseeVRObj.scenelistHotlistData,
          o = "";
        for (var s in a) {
          var i = a[s],
            n = i.scenes;
          for (var r in n) {
            _waseeVRObj.scenelistHotlistDatacount++;
            var p = n[r];
            1 == p.has_hotspot &&
              (0,
              (_waseeVRObj.getScenicDataVoiceurl[p.hotspot_data.id] =
                p.voiceurl),
              (o +=
                "addMapHotspot(" +
                p.hotspot_data.id +
                ",123," +
                p.title +
                "," +
                _waseeVRObj.hot_icon({ obj_type: "123" }).src +
                ",0x" +
                _waseeVRObj.hot_icon({ obj_type: "123" }).color.substring(1) +
                "," +
                p.hotspot_data.ath +
                "," +
                p.hotspot_data.atv +
                "," +
                t +
                "," +
                i.id +
                "," +
                p.id +
                ",," +
                p.cover_url +
                ");"));
          }
        }
        (_waseeVRObj.navbottom_obj_type = 0),
          "" != o && ((this.isgetmapscenelist = !0), _krpano.call(o));
      }
      if ("0" != paramObj.krpano.scenic_map) {
        var t = "";
        if (this.isgetscenelist) a();
        else {
          this.isgetscenelist = !0;
          var o =
              location.protocol +
              "//" +
              location.host +
              "/p/" +
              paramObj._pool_ +
              "/Wasee/Scenichome/getScenicData",
            s = { pano_id: paramObj.krpano.krpano_id };
          (_waseeVRObj.scenelistHotlistDatacount = 0),
            (_waseeVRObj.scenelistHotlistData = []),
            $.ajax({
              type: "GET",
              url: o,
              data: s,
              success: function (e) {
                1 == e.status &&
                  ((_waseeVRObj.scenelistHotlistData = e.data), a());
              },
            });
        }
      }
    },
    toScenelink: function (e) {
      this.toLoadscene({ id: e });
    },
    deletePanoelem: function (e, a, t) {
      var o = t.split("|"),
        s = "";
      for (var i in o)
        "" != o[i] &&
          o[i].length > 0 &&
          ("other" == e
            ? (s += "delete(" + a + "[" + o[i] + "]);")
            : "hotspot" == e
            ? (s += "removehotspot(" + o[i] + ");")
            : "plugin" == e && (s += "removeplugin(" + o[i] + ");"));
      "" != s && _krpano.call(s);
    },
    deleteZdHotspot: function (e) {
      for (var a = _krpano.get("hotspot.count"), t = "", o = 0; o < a; o++) {
        var s = _krpano.get("hotspot[" + o + "].objtype");
        if (
          (null == s && (s = _krpano.get("hotspot[" + o + "].obj_type")),
          "object" == typeof e)
        ) {
          if ("scenicmapall" == e.type) {
            let e = _krpano.get("hotspot[" + o + "].id"),
              a = _krpano.get("hotspot[" + o + "].sceneid");
            (t +=
              "removehotspot(map_newspot" +
              e +
              ");removeplugin(maphot_tip" +
              e +
              ");"),
              "22009" == s && (t += "removeplugin(maphot_tip_w" + e + ");"),
              ("22009" == s || "22001" == s || a > 0) &&
                (t +=
                  "removeplugin(maphot_tip_big" +
                  e +
                  ");removeplugin(maphot_tip_big_icon" +
                  e +
                  ");removeplugin(maphot_tip_big_title" +
                  e +
                  ");removeplugin(maphot_tip_big_more" +
                  e +
                  ");");
          }
        } else if (e.indexOf(s) > -1) {
          var i = _krpano.get("hotspot[" + o + "].name");
          (t += "removehotspot(" + i + ");"),
            "21001" == s
              ? (t +=
                  "removehotspot(" + i + "_txt);removehotspot(" + i + "_txt2);")
              : "21006" == s
              ? (t +=
                  "removeplugin(" +
                  i +
                  "_img);removeplugin(" +
                  i +
                  "_txt);removeplugin(" +
                  i +
                  "_line);")
              : "21009" == s &&
                (t +=
                  "removeplugin(" + i + "_img);removehotspot(" + i + "_txt);");
        }
      }
      "" != t && _krpano.call(t);
    },
    addJavascript: function (e) {
      if ($.isIE()) {
        var a = document.createElement("script"),
          t = e.callBack || function () {};
        (a.type = "text/javascript"),
          (a.src = e.src),
          (a.onload = a.onreadystatechange =
            function () {
              (a.readyState &&
                "loaded" != a.readyState &&
                "complete" != a.readyState) ||
                ((a.onreadystatechange = null), t());
            }),
          document.getElementsByTagName("head")[0].appendChild(a);
      } else
        $.ajax({ url: e.src, dataType: "script", cache: !0 }).done(function () {
          "function" == typeof e.callBack && e.callBack();
        });
    },
    hotspotClick: function (name, type, obj) {
      if (
        this.is_switch_nav > 0 &&
        "object" == typeof _panonavObj &&
        _panonavObj.isStartNav()
      )
        return !1;
      var _this = this;
      if (
        (this == window && (_this = window._waseeVRObj),
        "played" != _this.autoGuidesObj.status)
      ) {
        var _thisHot = {},
          _content = {};
        switch (
          ("object" == typeof obj
            ? ((_thisHot = obj),
              _thisHot.type || (_thisHot.type = _thisHot.clicktype))
            : "menu" == type
            ? ((_thisHot =
                __WASEE_DATA__.product.switch.definimenu.menus["_" + name]),
              (_thisHot.type = _thisHot.linktype),
              4 != __WASEE_DATA__.product.panoinfo.skinItem ||
                !_this.isIOS ||
                ("url" != _thisHot.type && 1 != _thisHot.type) ||
                3 == _thisHot.openlinktype ||
                $(
                  ".skinItem4.mobile .bottommeun,.skinItem4.mobile .bottommeun .menusBody,.bottommeun .menusBody .showmenuItem"
                ).removeClass("on"))
            : ((_thisHot =
                _panoGroupObj.panoOFFgroup[_waseeVRObj.sceneId].hotspots[name]),
              !_thisHot &&
                0 ==
                  _panoGroupObj.panoOFFgroup[_waseeVRObj.sceneId].child_type &&
                _panoGroupObj.panoOFFgroup[_waseeVRObj.sceneId].pid > 0 &&
                (_thisHot =
                  _panoGroupObj.panoOFFgroup[
                    _panoGroupObj.panoOFFgroup[_waseeVRObj.sceneId].pid
                  ].hotspots[name]),
              "subhot" == type &&
                ($.isJSONstr(_thisHot.content) &&
                  (_content = JSON.parse(_thisHot.content)),
                (_thisHot = _content.subhotlist.find(function (e) {
                  return e.name == obj;
                })))),
          $.isJSONstr(_thisHot.content)
            ? (_content = JSON.parse(_thisHot.content))
            : _thisHot.content && (_content.tbody = _thisHot.content),
          _thisHot.type)
        ) {
          case "manyou":
          case 10:
            _this.toLoadscene({
              id: _thisHot.targetScene ? _thisHot.targetScene : _thisHot.url,
            });
            break;
          case "link_html":
          case 7:
            _waseeVRObj__isApp.API_Wasee_Front_CallBack(4, {});
            let _html =
              '<div class="mask_Box_overlay on" onclick="_waseeVRObj.closeMask_Box(\'.link_html\')"><span class="allclose"></span></div>';
            (_html +=
              '<div class="mask_Box link_html scrollbarw on" style="text-align: inherit;">' +
              (_thisHot.title && "" != _thisHot.title
                ? '<div class="title">' + _thisHot.title + "</div>"
                : "") +
              '<pre class="tbody" style="font-size:' +
              (_content.tbodysize && _content.tbodysize > 0
                ? _content.tbodysize + "px"
                : "14px") +
              '">' +
              $.html2Escape(_content.tbody) +
              "</pre></div>"),
              $("#subinformain").append(_html),
              _waseeVRObj.setAutorotateObj.goautogyro(0),
              _waseeVRObj.setAutorotateObj.govideoautoplay(0),
              _waseeVRObj.setAutorotateObj.goembedvideo(0);
            break;
          case "link_img":
          case 8:
            _waseeVRObj__isApp.API_Wasee_Front_CallBack(4, {});
            let img = new Image(),
              _url = _thisHot.url;
            (img.src = _url),
              _waseeVRObj.toast({ text: _langObj.loading + "...", time: 3e8 }),
              (img.onload = function () {
                let e = img.width,
                  a = img.height;
                _waseeVRObj.change_move_img({ url: _url, width: e, height: a });
              }),
              _waseeVRObj.setAutorotateObj.goautogyro(0),
              _waseeVRObj.setAutorotateObj.govideoautoplay(0),
              _waseeVRObj.setAutorotateObj.goembedvideo(0);
            break;
          case "link_sound":
          case 9:
            if (
              _this.is_ememap >= 1 &&
              2 != _this.is_ememap &&
              3 != _this.is_ememap &&
              _this.isfememap()
            )
              return;
            _thisHot.isplay
              ? (_soundObj.stopsound("othermusic"),
                "link_sound" == _thisHot.type &&
                  (_panoGroupObj.panoOFFgroup[_waseeVRObj.sceneId].hotspots[
                    name
                  ].isplay = !1),
                _soundObj.stopsound("allsound", "temporary_nopause"))
              : ("link_sound" == _thisHot.type &&
                  _soundObj.soundList.othermusic &&
                  _soundObj.soundList.othermusic.sceneId &&
                  _soundObj.soundList.othermusic.hostname &&
                  _panoGroupObj.panoOFFgroup[
                    _soundObj.soundList.othermusic.sceneId
                  ].hotspots[_soundObj.soundList.othermusic.hostname] &&
                  (_panoGroupObj.panoOFFgroup[
                    _soundObj.soundList.othermusic.sceneId
                  ].hotspots[_soundObj.soundList.othermusic.hostname].isplay =
                    !1),
                "link_sound" == _thisHot.type &&
                  name &&
                  _panoGroupObj.panoOFFgroup[_waseeVRObj.sceneId].hotspots[
                    name
                  ] &&
                  (_panoGroupObj.panoOFFgroup[_waseeVRObj.sceneId].hotspots[
                    name
                  ].isplay = !0),
                _soundObj.playsound("othermusic", _thisHot.url, !1, {
                  sceneId: _waseeVRObj.sceneId,
                  hostname: name,
                  end_callBack: function () {
                    "link_sound" == _thisHot.type &&
                      name &&
                      _panoGroupObj.panoOFFgroup[_waseeVRObj.sceneId].hotspots[
                        name
                      ] &&
                      (_panoGroupObj.panoOFFgroup[_waseeVRObj.sceneId].hotspots[
                        name
                      ].isplay = !1);
                  },
                }));
            break;
          case "link_video":
          case 5:
            if (_this.isfememap()) return;
            _waseeVRObj__isApp.API_Wasee_Front_CallBack(4, {}),
              _content.videofrom && (_thisHot.videofrom = _content.videofrom),
              _thisHot.videofrom && 1 == _thisHot.videofrom
                ? ((_thisHot.url = unescape(_thisHot.url)),
                  _thisHot.url.indexOf("&#039;") > -1 &&
                    (_thisHot.url = $.replaceAll({
                      strData: _thisHot.url,
                      list: [{ "&#039;": '"' }],
                    })),
                  _thisHot.url.indexOf("http") >= 0 &&
                  _thisHot.url.indexOf(".mp4") + 4 == _thisHot.url.length
                    ? videoBlend.goPlayvide(_thisHot.url, null, null, 0)
                    : $("#pano_body").append(
                        '<div class="mBoxbg on remove boxvideo" onclick="videoBlend.closevideo();"></div><div id="vVideo" class="windowBody nofull on othervideo">' +
                          _thisHot.url +
                          '</div><span class="allclose closeaddvideoo" onclick="videoBlend.closevideo(1)" style="z-index: 100000000;">X</span>'
                      ),
                  _soundObj.stopsound("allsound", "temporary_pause"),
                  _waseeVRObj.setAutorotateObj.goautogyro(0),
                  _waseeVRObj.setAutorotateObj.govideoautoplay(0),
                  _waseeVRObj.setAutorotateObj.goembedvideo(0))
                : 1 == _thisHot.openlinktype
                ? window.open(_thisHot.url)
                : 2 == _thisHot.openlinktype
                ? (window.location = _thisHot.url)
                : 3 == _thisHot.openlinktype &&
                  videoBlend.goPlayvide(
                    _thisHot.url,
                    null,
                    null,
                    _thisHot.fullscreen
                  );
            break;
          case "link_quanjing":
            (_thisHot.url =
              location.protocol +
              "//" +
              location.host +
              "/wasee/VRHome/panorama?id=" +
              _thisHot.toquanjingid +
              "&def_sid=" +
              _thisHot.scene),
              _waseeVRObj.showInfo(_thisHot);
            break;
          case "url":
          case 1:
            _waseeVRObj.showInfo(_thisHot);
            break;
          case "tel":
          case 3:
            3 == _thisHot.type && (_thisHot.tel = _thisHot.url),
              _thisHot.tel.indexOf("tel:") >= 0 &&
                (_thisHot.tel = _thisHot.tel.replace("tel:", "")),
              _krpano.get("device.mobile")
                ? (window.location = "tel:" + _thisHot.tel)
                : (_thisHot.title || (_thisHot.title = _langObj.tel),
                  $("#subinformain").append(
                    '<div class="mBoxbg totelbg on" onclick="$(this).remove();$(\'.windowBody.totel\').remove();"></div><div class="windowBody totel on"><span class="title">' +
                      _thisHot.title +
                      '</span><span class="close" onclick="$(\'.totelbg\').remove();$(\'.windowBody.totel\').remove();">X</span><div class="telbody"><a href="tel:' +
                      _thisHot.tel +
                      '" class="list flex__justify__b flex_center_y"><span class="telt">' +
                      _thisHot.tel +
                      '</span><em class="flex__center"><i class="iconfont icon_tel"></i>' +
                      _langObj.boda +
                      "</em></a></div></div>"
                  ));
            break;
          case "link_imgbody":
          case 2:
            let _imgbodyData = [];
            if (
              "object" == typeof _content &&
              (_content.tbody || (_content = { tbody: _content }),
              (_imgbodyData = _content.tbody),
              $.isJSONstr(_imgbodyData) &&
                (_imgbodyData = JSON.parse(_imgbodyData)),
              _thisHot.title || (_thisHot.title = ""),
              _waseeVRObj.is_ememap >= 1 && (_thisHot.url = ""),
              "object" == typeof _imgbodyData)
            ) {
              let e = "",
                a = 0,
                t = _thisHot.title,
                o = [],
                s = 0,
                i = "<div>" + _thisHot.title + "（<span>1</span>/4）</div>",
                n =
                  _imgbodyData.length > 1
                    ? '<div class="mobile_tbody_catary flex__justify__b"><span class="swiper_prev nexticon2 swiper-button-disabled">' +
                      _langObj.prev2 +
                      '</span><span class="swiper_next nexticon2 swiper-button-disabled">' +
                      _langObj.next2 +
                      "</span></div>"
                    : "";
              for (let s = 0; s < _imgbodyData.length; s++) {
                const i = _imgbodyData[s];
                let r = "",
                  p = "",
                  l = "",
                  d = "",
                  _ = "";
                if (
                  (i.title &&
                    i.title.length > 0 &&
                    ((_ = i.title), 0 == s && (t = i.title)),
                  "" != i.tbody &&
                    (_waseeVRObj.is_ememap >= 1 &&
                      (i.tbody = $.replaceAll({
                        strData: i.tbody,
                        list: [
                          { "href=": "ahref=" },
                          { "href =": "ahref=" },
                          { onclick: "ahref" },
                        ],
                      })),
                    (i.tbody = $.html2Escape(i.tbody)),
                    _waseeVRObj.isDesktop
                      ? ((r =
                          '<pre class="tbody scrollbarw">' +
                          i.tbody +
                          "</pre>"),
                        _thisHot.url &&
                          _thisHot.url.length > 10 &&
                          (r +=
                            '<div class="musicbody flex_center_y" data-url="' +
                            _thisHot.url +
                            '"><i class="iconfont icon_play emmusic ibtn"></i><span class="timeing time">00:00</span><div class="zjdu_body flex_center_y"><span class="zjdu"><i class="jdu"></i></span></div><span class="alltime time">00:00</span></div>'))
                      : (d =
                          '<div class="righttbody"><pre class="tbody scrollbarw">' +
                          i.tbody +
                          "</pre></div>")),
                  i.imgs && i.imgs.length > 0)
                ) {
                  let e = "";
                  for (let a = 0; a < i.imgs.length; a++) {
                    let t = i.imgs[a];
                    "object" == typeof t && (t = t.url),
                      0 == s && 0 == a ? (new Image().src = t) : o.push(t),
                      (e +=
                        '<div class="swiper-slide imglist"><div data-url="' +
                        t +
                        '"></div></div>');
                  }
                  if ("" != e) {
                    (e = '<div class="swiper-wrapper">' + e + "</div>"),
                      i.imgs.length > 1
                        ? ((e +=
                            '<div class="swiper-pagination-img flex__center"></div><div class="imgcontrool tipsafter swiper_prev2 previcon swiper-button-disabled none" tips="' +
                            _langObj.prev +
                            '"></div><div class="imgcontrool tipsafter swiper_next2 nexticon swiper-button-disabled none" tips="' +
                            _langObj.next +
                            '"></div>'),
                          0 == s && (a = 2))
                        : 0 == s && 1 == i.imgs.length && (a = 1);
                    let t = "",
                      o = "";
                    "" == r &&
                      ((t = ' style="width: 100%;max-width: inherit;"'),
                      _thisHot.url &&
                        _thisHot.url.length > 10 &&
                        (o =
                          '<div class="musicbody flex_center_y" data-url="' +
                          _thisHot.url +
                          '"><i class="iconfont icon_play emmusic ibtn"></i><span class="timeing time">00:00</span><div class="zjdu_body flex_center_y"><span class="zjdu"><i class="jdu"></i></span></div><span class="alltime time">00:00</span></div>')),
                      (l =
                        '<div class="right"' +
                        t +
                        '><div class="imgcon flex_center_x"><div class="top swiper-container">' +
                        e +
                        "</div></div>" +
                        d +
                        '<div class="imgcontrol flex__center noselect">' +
                        o +
                        n +
                        '<div class="scaleimg flex"><em class="ibtn add flex__center"><i class="iconfont icon_addscale"></i><i>' +
                        _langObj.fangda +
                        '</i></em><em class="ibtn sub flex__center"><i class="iconfont icon_subscale"></i><i>' +
                        _langObj.suoxiao +
                        '</i></em></div><div class="chongzhi flex__center"><em class="ibtn flex__center"><i class="iconfont icon_shuaxin"></i><i>' +
                        _langObj.chongzhi +
                        "</i></em></div></div></div>");
                  }
                } else if (!_waseeVRObj.isDesktop) {
                  let e = "",
                    a = "";
                  "" == r &&
                    ((e = ' style="width: 100%;max-width: inherit;"'),
                    _thisHot.url &&
                      _thisHot.url.length > 10 &&
                      (a =
                        '<div class="musicbody flex_center_y" data-url="' +
                        _thisHot.url +
                        '"><i class="iconfont icon_play emmusic ibtn"></i><span class="timeing time">00:00</span><div class="zjdu_body flex_center_y"><span class="zjdu"><i class="jdu"></i></span></div><span class="alltime time">00:00</span></div>')),
                    (l =
                      '<div class="right"' +
                      e +
                      ">" +
                      d +
                      '<div class="imgcontrol flex__center noselect">' +
                      a +
                      n +
                      '<div class="scaleimg flex"><em class="ibtn add flex__center"><i class="iconfont icon_addscale"></i><i>' +
                      _langObj.fangda +
                      '</i></em><em class="ibtn sub flex__center"><i class="iconfont icon_subscale"></i><i>' +
                      _langObj.suoxiao +
                      '</i></em></div><div class="chongzhi flex__center"><em class="ibtn flex__center"><i class="iconfont icon_shuaxin"></i><i>' +
                      _langObj.chongzhi +
                      "</i></em></div></div></div>");
                }
                "" != r &&
                  ("" == l &&
                    (p =
                      ' style="width: 100%;padding-right: 0;margin-right: 0;max-width: inherit;border-right: none;"'),
                  (r = '<div class="left"' + p + ">" + r + "</div>")),
                  (e +=
                    '<div class="swiper-slide list flex" data-title="' +
                    _ +
                    '">' +
                    r +
                    l +
                    "</div>");
              }
              if (_imgbodyData.length > 0) {
                let o =
                    '<div class="swiper-wrapper">' +
                    e +
                    '</div><div class="swiper-pagination swiper-pagination-custom"></div>',
                  i = _waseeVRObj.isDesktop ? "desktop" : "mobile";
                if (
                  (_imgbodyData.length > 1 &&
                    ((i += " lists"),
                    (o +=
                      '<div class="tipsafter swiper_prev previcon swiper-button-disabled" tips="' +
                      _langObj.prev2 +
                      '"></div><div class="tipsafter swiper_next nexticon swiper-button-disabled" tips="' +
                      _langObj.next2 +
                      '"></div>')),
                  (o =
                    '<div class="swiper-container bodycontainer">' +
                    o +
                    "</div>"),
                  _imgbodyData.length > 1 &&
                    (o +=
                      '<div class="tidai tipsafter swiper_prev previcon swiper-button-disabled none" tips2="替代" tips="' +
                      _langObj.prev2 +
                      '"></div><div class="tidai tipsafter swiper_next nexticon swiper-button-disabled none" tips2="替代" tips="' +
                      _langObj.next2 +
                      '"></div>'),
                  0 == $("#subinformain .imgbody").length &&
                    $("#subinformain").append(
                      '<div class="imgbody flex__center"></div>'
                    ),
                  $("#subinformain .imgbody")
                    .addClass(i)
                    .html(
                      '<div class="bodylist" data-title="' +
                        _thisHot.title +
                        '"><div class="swiperpaginationbody"><a>' +
                        t +
                        "</a><span></span></div>" +
                        o +
                        '</div><span class="allclose"></span>'
                    ),
                  4 == __WASEE_DATA__.product.panoinfo.skinItem &&
                    ($(
                      ".imgbody .bodycontainer .list .right .imgcontrol .ibtn.add"
                    ).html(_langObj.fangda + " " + _languageObj.EN.fangda),
                    $(
                      ".imgbody .bodycontainer .list .right .imgcontrol .ibtn.sub"
                    ).html(_langObj.suoxiao + " " + _languageObj.EN.suoxiao),
                    $(
                      ".imgbody .bodycontainer .list .right .imgcontrol .chongzhi"
                    ).html(_langObj.chongzhi + " " + _languageObj.EN.chongzhi)),
                  _waseeVRObj.isDesktop ||
                    $(".bodycontainer .swiper-wrapper .swiper-slide").each(
                      function () {
                        $(this).find(".imgcon").length > 0
                          ? $(this)
                              .find(".imgcon")
                              .css(
                                "height",
                                "calc(100% - " +
                                  (($(this).find(".righttbody").length > 0
                                    ? $(this).find(".righttbody").height() + 12
                                    : 0) +
                                    $(this).find(".imgcontrol").height() +
                                    12) +
                                  "px)"
                              )
                          : $(this)
                              .find(".righttbody")
                              .css({
                                height:
                                  "calc(100% - " +
                                  ($(this).find(".imgcontrol").height() + 12) +
                                  "px)",
                                "max-height": "inherit",
                              });
                      }
                    ),
                  _waseeVRObj__isApp.API_Wasee_Front_CallBack(4, {}),
                  _imgbodyData.length > 1
                    ? ($(".imgbody .bodylist .tidai").removeClass("none"),
                      _soundObj.imgbodyData._A1())
                    : ($(
                        ".imgbody .bodylist .bodycontainer>.swiper-wrapper .list"
                      ).addClass("swiper-slide-active"),
                      $(".imgbody .bodylist .tidai").remove()),
                  2 == a
                    ? $(
                        ".imgbody .bodylist .bodycontainer>.swiper-wrapper .list:eq(0) .swiper-container .swiper-button-disabled"
                      ).removeClass("none")
                    : $(
                        ".imgbody .bodylist .bodycontainer>.swiper-wrapper .list:eq(0) .swiper-container .swiper-button-disabled"
                      ).remove(),
                  a > 0)
                ) {
                  _soundObj.imgbodyData._A2();
                  let e = $(
                      ".imgbody .bodylist .bodycontainer>.swiper-wrapper .list:eq(0) .swiper-container .swiper-wrapper .imglist:eq(0) div:eq(0)"
                    ),
                    a = e.attr("data-url"),
                    t = e.attr("data-width"),
                    o = e.attr("data-height");
                  if (
                    (e.parent().addClass("moveimgbody"),
                    0 == $("#toast .txt[isload=1]").length &&
                      _waseeVRObj.toast({
                        text: _langObj.loading + "...",
                        time: 3e8,
                        attr: " isload=1",
                      }),
                    t > 0 && o > 0)
                  )
                    _waseeVRObj.change_move_img({
                      url: a,
                      width: t,
                      height: o,
                      from: "musicimgbody",
                    });
                  else {
                    let t = new Image();
                    (t.src = a),
                      (t.onload = function () {
                        _B(1),
                          e.attr({
                            "data-width": t.width,
                            "data-height": t.height,
                          }),
                          _waseeVRObj.change_move_img({
                            url: a,
                            width: t.width,
                            height: t.height,
                            from: "musicimgbody",
                          });
                      });
                  }
                  setTimeout(function () {
                    (s = 0) && _B(2);
                  }, 1e4);
                }
                let n = _waseeVRObj.setAutorotateObj.goembedvideo(0);
                _thisHot.url &&
                  _thisHot.url.length > 10 &&
                  (n
                    ? setTimeout(function () {
                        _soundObj.imgbodyData.playsound(_thisHot.url);
                      }, 500)
                    : _soundObj.imgbodyData.playsound(_thisHot.url)),
                  _waseeVRObj.setAutorotateObj.goautogyro(0),
                  _waseeVRObj.setAutorotateObj.govideoautoplay(0);
              }
              function _B(e) {
                if (o.length > 0 && 0 == s) {
                  s = 1;
                  for (let e = 0; e < o.length; e++) new Image().src = o[e];
                }
              }
            }
            break;
          case "link_article":
          case 4:
            if (_this.isfememap()) return;
            "link_article" == _thisHot.type &&
              (_thisHot.articleid = _thisHot.url),
              _waseeVRObj__isApp.API_Wasee_Front_CallBack(4, {}),
              location.hostname.indexOf("wasee.com") > 0 ||
              location.hostname.indexOf("onethink.com") > 0
                ? "object" == typeof pano_otherModule
                  ? pano_otherModule.alert_article({ id: _thisHot.articleid })
                  : _waseeVRObj.addJavascript({
                      src:
                        paramObj.resourceWasee +
                        "/home/vrpano/js/pano_other.min.js?" +
                        paramObj.pano_other_time,
                      callBack: function () {
                        pano_otherModule.alert_article({
                          id: _thisHot.articleid,
                        });
                      },
                    })
                : _this.showInfo({
                    openlinktype: 3,
                    url:
                      location.protocol +
                      "//www.wasee.com/Wasee/VRHome/communitydetailforiframe?id=" +
                      _thisHot.articleid,
                  }),
              _waseeVRObj.setAutorotateObj.goautogyro(0),
              _waseeVRObj.setAutorotateObj.govideoautoplay(0),
              _waseeVRObj.setAutorotateObj.goembedvideo(0),
              1 == _content.closemusic &&
                _soundObj.soundList.bgmusic &&
                1 == _soundObj.soundList.bgmusic.isplay &&
                _soundObj.stopsound("bgmusic", "temporary_pause"),
              1 == _content.closevoice &&
                _soundObj.soundList.bgvoice &&
                1 == _soundObj.soundList.bgvoice.isplay &&
                _soundObj.stopsound("bgvoice", "temporary_pause");
            break;
          case "link_navig":
          case "navi":
          case 6:
            if (
              ("menu" == type && (_content = _thisHot),
              "object" != typeof obj ||
                (_content.longitude && _content.latitude) ||
                ((_content.longitude = _thisHot.longitude),
                (_content.latitude = _thisHot.latitude)),
              !_content.longitude ||
                !_content.latitude ||
                "" == _content.longitude ||
                "" == _content.latitude)
            )
              return;
            _waseeVRObj__isApp.API_Wasee_Front_CallBack(4, {}),
              self != top &&
              1 == $.getParameter("ispage") &&
              "function" == typeof window.parent.openAppMap &&
              $.isWeiXinClient()
                ? window.parent.openAppMap({
                    latitude: _content.latitude,
                    longitude: _content.longitude,
                  })
                : "object" == typeof pano_otherModule
                ? pano_otherModule.alert_map({
                    longitude: _content.longitude,
                    latitude: _content.latitude,
                  })
                : _waseeVRObj.addJavascript({
                    src:
                      paramObj.resourceWasee +
                      "/home/vrpano/js/pano_other.min.js?" +
                      paramObj.pano_other_time,
                    callBack: function () {
                      pano_otherModule.alert_map({
                        longitude: _content.longitude,
                        latitude: _content.latitude,
                      });
                    },
                  }),
              _waseeVRObj.setAutorotateObj.goautogyro(0),
              _waseeVRObj.setAutorotateObj.govideoautoplay(0),
              _waseeVRObj.setAutorotateObj.goembedvideo(0);
            break;
          case "openMap":
          case 11:
            "object" == typeof openmapModule &&
              "function" == typeof openmapModule.openMap &&
              openmapModule.openMap();
            break;
          case "link_H5":
          case 12:
            _thisHot.url > 0 &&
              ((_thisHot.yurl =
                location.origin + "/Wasee/VRHome/page?id=" + _thisHot.url),
              (_thisHot.url =
                location.origin + "/Wasee/VRHome/page?id=" + _thisHot.url)),
              3 == _thisHot.openlinktype
                ? (_thisHot.url = _thisHot.yurl + "&scfrom=1")
                : (_thisHot.url = _thisHot.yurl),
              (_thisHot.fullscreen = 1),
              _waseeVRObj.showInfo(_thisHot);
            break;
          case "link_event":
            if (_content.tbody && "" != _content.tbody)
              if (1 == $.is_wx_microprogram() || paramObj._isexport) {
                let _content_tbody = unescape(_content.tbody);
                if ("h202251510253614" == name) return towxmic(), !1;
                if (0 == _content_tbody.indexOf("wx:"))
                  _this.isopenWxmic(_content_tbody.split(":")[1]);
                else if (paramObj._isexport)
                  try {
                    eval(_content_tbody);
                  } catch (e) {
                    goalert(e.toString());
                  }
              } else if ("h202251510253614" == name) {
                let e = unescape(_content.tbody);
                return towxmic(), !1;
              }
            break;
          case "link_doc":
          case 13:
            "link_doc" == _thisHot.type && (_thisHot.linktype = 13),
              "object" == typeof pano_otherModule
                ? pano_otherModule.alert_iframe({
                    from: "menu",
                    data: _thisHot,
                  })
                : _waseeVRObj.addJavascript({
                    src:
                      paramObj.resourceWasee +
                      "/home/vrpano/js/pano_other.min.js?" +
                      paramObj.pano_other_time,
                    callBack: function () {
                      pano_otherModule.alert_iframe({
                        from: "menu",
                        data: _thisHot,
                      });
                    },
                  });
            break;
          case "link_3D":
          case 14:
            if (1 == paramObj._isexport) return;
            14 == _thisHot.type && (_content.D3mobel = _content),
              _content.D3mobel ||
                ((_content.D3mobel = $.extend({}, _thisHot)),
                delete _content.D3mobel.url,
                delete _content.D3mobel.clicktype,
                delete _content.D3mobel.type);
            let _html2 =
              '<div class="mask_Box_overlay on" onclick="_waseeVRObj.closeMask_Box(\'.link_3D\')"><span class="allclose"></span></div>';
            function _A() {
              _waseeVRObj.setCss(
                "#html3D canvas{max-width:" +
                  $("#html3D").width() +
                  "px;max-height:" +
                  $("#html3D").height() +
                  "px;width: auto!important;height: auto!important;margin: 0 auto;}"
              ),
                loadModel(
                  $.extend(
                    {
                      id: _thisHot.url,
                      document: $("#html3D"),
                      maxwidth: $("#html3D").width(),
                      maxheight: $("#html3D").height(),
                      zoomOutSelector: "zoomadd",
                      zoomInSelector: "zoomsub",
                      resetSelector: "zoomreset",
                    },
                    _content.D3mobel
                  )
                );
            }
            (_html2 +=
              '<div class="mask_Box link_3D scrollbarw on"><div class="html3Dbody p-re flex_center_y"><div id="html3D" class="flex__center"></div><div class="imgcontrol flex__center noselect p-ab"><div class="scaleimg flex"><em id="zoomadd" class="ibtn add flex__center"><i class="iconfont icon_addscale"></i><i>放大</i></em><em id="zoomsub" class="ibtn sub flex__center"><i class="iconfont icon_subscale"></i><i>缩小</i></em></div><div id="zoomreset" class="chongzhi flex__center"><em class="ibtn flex__center"><i class="iconfont icon_shuaxin"></i><i>重置</i></em></div></div></div><pre id="html3Dtext" class="scrollbarw">' +
              _content.D3mobel.tbody +
              "</pre></div>"),
              $("#subinformain").append(_html2),
              (_content.D3mobel.tbody && _content.D3mobel.tbody.length > 0) ||
                ($(".html3Dbody #html3Dtext").remove(),
                $(".html3Dbody").css("height", "100%").addClass("allcenter")),
              _waseeVRObj.setAutorotateObj.goautogyro(0),
              _waseeVRObj.setAutorotateObj.govideoautoplay(0),
              _waseeVRObj.setAutorotateObj.goembedvideo(0),
              1 == _content.D3mobel.playmusic &&
                _soundObj.soundList.bgmusic &&
                1 == _soundObj.soundList.bgmusic.isplay &&
                _soundObj.stopsound("bgmusic", "temporary_pause"),
              1 == _content.D3mobel.playvoice &&
                _soundObj.soundList.bgvoice &&
                1 == _soundObj.soundList.bgvoice.isplay &&
                _soundObj.stopsound("bgvoice", "temporary_pause"),
              "function" != typeof initOBJLoader
                ? $.addJavascript({
                    src:
                      paramObj.resourceWasee +
                      "/VRHome/js/modelLoader.js?" +
                      new Date().getTime(),
                    callBack: function () {
                      _A();
                    },
                  })
                : _A();
            break;
          case "link_selec":
            $(".selecttBody#" + name + " .selecain").toggleClass("on");
        }
        return !1;
      }
    },
    isopenWxmic: function (e) {
      if (1 == $.is_wx_microprogram() && "string" == typeof e && e.length > 0)
        try {
          wx.miniProgram.reLaunch({
            url: e,
            success: function () {},
            fail: function () {
              _waseeVRObj.toast("fail");
            },
          });
        } catch (e) {
          _waseeVRObj.toast(e.toString());
        }
    },
    isshowinfo: !1,
    showInfo: function (e) {
      function a() {
        let a = 1 == e.fullscreen ? ' class="full"' : "";
        var t =
          '<div id="navmenuiframediv"><iframe name="navmenuiframe"' +
          a +
          ' id="navmenuiframe" onload="" scrolling="yes" frameborder="0" src="' +
          o +
          "\" allowtransparency=\"true\"></iframe><div id=\"closeIframe\" class=\"close2 closeIframe nfclose\" onclick=\"$('#navmenuiframediv').addClass('off');_waseeVRObj__isApp.API_Wasee_Front_CallBack(1,{});setTimeout(function(){ $('#navmenuiframediv').remove();if($('#navmenuiframediv').length==0) $('.closeIframe').remove();},200);_waseeVRObj.setAutorotateObj.goautogyro();_waseeVRObj.setAutorotateObj.govideoautoplay();\"></div></div>";
        $("body").append(t),
          ("link_H5" != e.type && 12 != e.type) ||
            $("#navmenuiframediv").addClass("H5"),
          _waseeVRObj.setAutorotateObj.goautogyro(0),
          _waseeVRObj.setAutorotateObj.govideoautoplay(0),
          _waseeVRObj.setAutorotateObj.goembedvideo(0),
          _waseeVRObj__isApp.API_Wasee_Front_CallBack(4, {}),
          paramObj._isForAPP;
      }
      if (!this.isfememap() && "played" != this.autoGuidesObj.status) {
        "object" != typeof e && (e = { url: e });
        var t = this,
          o = e.url;
        if (
          !(t.isshowinfo || $("#navmenuiframe").length > 0) &&
          ((t.isshowinfo = !0),
          setTimeout(function () {
            t.isshowinfo = !1;
          }, 2e3),
          o && "" != o)
        )
          if (o.indexOf("tel:") > -1)
            (o = o.replace("tel:", "")),
              _krpano.get("device.mobile")
                ? (window.location = "tel:" + o)
                : (e.title || (e.title = _langObj.tel),
                  $("#subinformain").append(
                    '<div class="mBoxbg totelbg on" onclick="$(this).remove();$(\'.windowBody.totel\').remove();"></div><div class="windowBody totel on"><span class="title">' +
                      e.title +
                      '</span><span class="close" onclick="$(\'.totelbg\').remove();$(\'.windowBody.totel\').remove();">X</span><div class="telbody"><a href="tel:' +
                      o +
                      '" class="list flex__justify__b"><span class="telt">' +
                      o +
                      '</span><em class="flex__center"><i class="iconfont icon_tel"></i>' +
                      _langObj.boda +
                      "</em></a></div></div>"
                  ));
          else {
            if (
              paramObj._isForAPP &&
              (o.indexOf("wasee.com/c/") > 0 ||
                o.indexOf("wasee.com/s/") > 0 ||
                o.indexOf("wasee.com/wt/") > 0)
            )
              return void (window.location = o);
            o = $.replaceAll({ strData: o, list: [{ "&amp;": "&" }] });
            if (1 == e.openlinktype) window.open(o);
            else if (2 == e.openlinktype) window.location = o;
            else if (3 == e.openlinktype)
              if (
                ("https:" == location.protocol && 0 != o.indexOf("https:")) ||
                ("http:" == location.protocol && 0 != o.indexOf("http:"))
              )
                window.open(o);
              else {
                var s = o.toLowerCase(o);
                s.indexOf(".mp4") == s.length - 4
                  ? videoBlend.goPlayvide(o)
                  : a();
              }
            else window.open(o);
          }
      }
    },
    isfememap: function () {
      return this.is_ememap >= 1;
    },
    setmousetips: function (e, a) {
      if (1 == e.del)
        return void ($(".mousetips").length > 0 && $(".mousetips").remove());
      0 == $(".mousetips").length
        ? $("#subinformain").append(
            '<div class="mousetips">' + e.text + "</div>"
          )
        : $(".mousetips").html(e.text);
      let t = 0,
        o = 0,
        s = $(".mousetips").width();
      e.doc && e.doc.length > 0
        ? ((t = e.doc.offset().top - 40 - 7),
          (o = e.doc.offset().left + e.doc.width() / 2 - (s + 28) / 2))
        : e.top && e.left
        ? ((t = e.top), (o = e.left))
        : a
        ? ((t = a.pageY - 40 - 20), (o = a.pageX - (s + 28) / 2))
        : $(".mousetips").remove(),
        $(".mousetips").length > 0 &&
          $(".mousetips").css({ top: t + "px", left: o + "px" });
    },
    en_number: function (e) {
      var a = e;
      if (a > 0 && ((a = Number(a)), a > 1e4)) {
        var t = a / 1e3;
        t = t.toFixed(1);
        var o = t.split(".");
        a = 0 == o[1] ? o[0] + "K" : t + "K";
      }
      return a;
    },
  });
var AMapModule = {
    data: { map: null, geocoder: null, map_temp_markers: [] },
    map_control: function (e) {
      var a = this;
      a.data.map && (a.data.map.destroy(), (a.data.map = null)),
        (this._element = e && e.element ? e.element : "dilimap"),
        "object" == typeof AMap && a.map_new(e);
    },
    map_new: function (e) {
      var a = this,
        t = e.longitude ? e.longitude : "",
        o = e.latitude ? e.latitude : "",
        s = e.zoom ? e.zoom : 18;
      (t && o && 0 != Number(t) && 0 != Number(o)) ||
        ((t = "121.635348"), (o = "31.211521")),
        (a.data.map = new AMap.Map(e && e.element ? e.element : "map-d", {
          zoom: s,
          center: [t, o],
        })),
        a.data.map.on("complete", function () {
          "radarimg" == e.element &&
            (e.longitude && e.latitude && e.zoom
              ? (a.data.map.panTo([t, o]), a.data.map.setZoom(s))
              : a.data.map.setFitView(),
            2 != e.fromt && _waseeVRObj.radarObj.setradar_amap.panoToscene());
        });
    },
  },
  videoBlend = {
    _vVideo: document.getElementById("vVideo"),
    isOnePlay: !1,
    isfullscreen: 1,
    onegoPlayvide: function () {
      _waseeVRObj.isfememap() ||
        ("played" != _waseeVRObj.autoGuidesObj.status &&
          (videoBlend.isOnePlay ||
            ((videoBlend.isOnePlay = !0), videoBlend.addplayvideo("#"))));
    },
    goPlayvide: function (e, a, t, o) {
      _waseeVRObj.isfememap() ||
        ("played" != _waseeVRObj.autoGuidesObj.status &&
          (a && (videoBlend.started = a),
          t && (videoBlend.ended = t),
          null != o && (videoBlend.isfullscreen = o),
          _waseeVRObj.toast({ text: _langObj.loading + "...", time: 0 }),
          _waseeVRObj.setAutorotateObj.goautogyro(0),
          _waseeVRObj.setAutorotateObj.govideoautoplay(0),
          _waseeVRObj.setAutorotateObj.goembedvideo(0),
          _soundObj.stopsound("allsound", "temporary_pause"),
          videoBlend.addplayvideo(e)));
    },
    addplayvideo: function (e) {
      if (_waseeVRObj.isfememap()) return;
      if ("played" == _waseeVRObj.autoGuidesObj.status) return;
      if (!e || null == e || "" == e)
        return _waseeVRObj.toast("无加载源"), void $.hideLoading();
      0 == $("#vVideo").length
        ? ($("#pano_body").append(
            '<div class="mBoxbg on remove boxvideo" onclick="videoBlend.closevideo();"></div><video id="vVideo" playsinline="true" crossorigin="anonymous" x5-video-player-type="h5" x5-video-player-fullscreen="true" x5-video-orientation="portrait"></video>'
          ),
          (videoBlend._vVideo = document.getElementById("vVideo")))
        : $("#vVideo").before('<div class="mBoxbg on remove"></div>'),
        $("#vVideo")
          .attr("src", e)
          .removeClass("nofull shipGD")
          .addClass("windowBody"),
        "shipGD" == videoBlend.isfullscreen
          ? _waseeVRObj.isDesktop
            ? $("#vVideo").attr("controls", "controls")
            : ($("#vVideo").addClass("shipGD"),
              $("#vVideo").removeAttr("controls"))
          : ($("#vVideo").attr("controls", "controls"),
            0 == videoBlend.isfullscreen && $("#vVideo").addClass("nofull"));
      var a = function () {
          videoBlend.closevideo(1),
            videoBlend._vVideo.removeEventListener("ended", a, !1),
            videoBlend._vVideo.removeEventListener("canplay", t, !1);
        },
        t = function () {
          if (
            (_waseeVRObj.toast({ close: 1 }),
            "#" != e && e.length > 5 && !$("#vVideo").hasClass("on"))
          ) {
            let e = $("#vVideo")[0].videoWidth / paramObj._width,
              a = $("#vVideo")[0].videoHeight / paramObj._height;
            e > a
              ? $("#vVideo").css("width", paramObj._width + "px")
              : $("#vVideo").css("height", paramObj._height + "px"),
              $("#vVideo").addClass("on"),
              videoBlend.started && "" != videoBlend.started
                ? _krpano.call(videoBlend.started)
                : "shipGD" != videoBlend.isfullscreen &&
                  0 == $(".closeaddvideoo").length &&
                  $("#vVideo").after(
                    '<span class="allclose closeaddvideoo" onclick="videoBlend.closevideo(1)" style="z-index: 100000000;">X</span>'
                  );
          }
        };
      let o = this;
      videoBlend._vVideo.addEventListener(
        "play",
        function () {
          _soundObj.stopsound("allsound", "temporary_pause"),
            _panoGroupObj.panoOFFgroup[_waseeVRObj.sceneId].embeds &&
              JSON.stringify(
                _panoGroupObj.panoOFFgroup[_waseeVRObj.sceneId].embeds
              ).length > 10 &&
              (o.stopallsoundcount ||
                ((o.stopallsoundcount = 0),
                (o.stopallsound = setInterval(function () {
                  o.stopallsoundcount++,
                    o.stopallsoundcount > 10 &&
                      (clearInterval(o.stopallsound),
                      delete o.stopallsound,
                      (o.stopallsoundcount = 21)),
                    _soundObj.stopsound("allsound", "temporary_pause");
                }, 200))));
        },
        !1
      ),
        videoBlend._vVideo.addEventListener("ended", a, !1),
        videoBlend._vVideo.addEventListener("canplay", t, !1),
        videoBlend._vVideo.play();
    },
    closevideo: function (e) {
      _waseeVRObj.toast({ close: 1 }),
        this.stopallsound &&
          (clearInterval(this.stopallsound), delete this.stopallsound),
        this.stopallsoundcount >= 0 && delete this.stopallsoundcount,
        _waseeVRObj__isApp.API_Wasee_Front_CallBack(1, {}),
        _soundObj.stopsound("allsound", "temporary_nopause"),
        videoBlend._vVideo && videoBlend._vVideo.pause(),
        1 == e && $("#vVideo").removeClass("on").prev(".mBoxbg").click(),
        $(".othervideo").length > 0 && $(".othervideo").remove(),
        $(".closeaddvideoo").remove(),
        _waseeVRObj.setAutorotateObj.goautogyro(),
        _waseeVRObj.setAutorotateObj.govideoautoplay();
    },
  };
